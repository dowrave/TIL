## 1. 데이터 연결
- 파일, 서버, 데이터 원본(퍼블릭 X) 등이 연결 대상
- 연결 시 데이터 유형과 역할이 자동으로 할당되며, 원하는 바가 아닐 수 있으므로 항상 체크할 것
- 연결하면 아래에 데이터 원본, 시트 등이 뜬다
	- 데이터 원본은 테이블 간의 관계를 정리할 수 있는 부분으로 보임
	- 시트가 시각화해주는 영역으로 보이고
	- 대시보드는 이 시트들을 정리해서 보여주는 곳으로 보인다

## 2. 시트에서 작업
- `sample_superstore`로 작업
	- `Order Date`를 열로, `Sales`를 행으로 드래그
	- **시간이 포함**된 뷰를 처음 만든다면 **자동으로 라인 차트가 생성**된다. 
	- 차트 유형을 바꾸고 싶다면 마크 카드의 드롭다운 메뉴에 이거 저거 있음
		- 근데 왜 파이차트를 눌러도 큰 원을 나누는 게 아니라 점만 동그라미로 찍냐?
- ![[Pasted image 20230313183556.png]]

- 사실 지금 행이랑 열을 배치한 것 만으로 `Groupby` 한 다음`sum`한 것과 동일하단 말임?
- 따라서 추가로 **조건을 주고 싶다면 지금까지 준 조건의 뒤에 열을 더 추가**하면 됨(드래그앤드랍 or 더블클릭)

- 또한 툴바에서 행렬 바꾸기도 지원한다(위 이미지에서 `분석(A)` 밑의 아이콘)

- 더 자세히 보기 위해 `Sub-Category`도 추가함

#### 색깔 주기
- `seaborn`으로 따지면 `hue` 기능
- 해당하는 항목들을 따로 구분해서 색깔을 주고 싶다면, 해당 피쳐를 마크 카드의 색상에 드래그앤 드랍하면 된다.
![[Pasted image 20230313184327.png]]

- 위 항목에서 행렬 바꾸고 열의 `sub-category`를 제거하면 누적막대그래프가 나온다.
![[Pasted image 20230313184509.png]]
- 누적막대그래프에 아래부터 나열되는 순서는 `Sales` 축이 아니라 **`Sub-Category`에 정리된 순서**이다(일단 예제에서는 abc순임)

## 3. 결과를 집중적으로 보기
- 왼쪽 테이블의 각 칼럼에 대해, **필터 표시**(`우클릭 - 필터 표시`)를 켜고 끌 수 있다
	- 즉 특정 조건만을 보거나 제외할 수 있다는 얘기임
	- 시각화에 사용된 행, 열의 피쳐들 외의 다른 피쳐들도 이 필터 표시로 조건을 줄 수 있다.

#### 색상 정리하기
- `Profit` 값을 `마크 - 색상`에 드래그 & 드롭 한 결과 생성된 그래프
![[Pasted image 20230314165418.png]]
> 그래프의 y축은 `Sales`에 값을 따르나, 색깔은 `Profit` 값을 따른다.
> 즉, 오른쪽의 범례에서 보여주듯이 `Profit` 값이 음수인 항목은 위에서 노란색으로 표시되고, 양수인 항목은 파란색으로 표시된다.

- 색상표 : `색상 - 색상 편집`으로 들어가서 수정할 수 있음

### 주요 정보 확인하기
- 위 예제의 경우 결국 판매량과 수익을 확인할 수 있었고, 적자인 항목 또한 확인할 수 있었다.
- 위에서 적자를 본 항목인 `Bookcases, Machines, Tables`만을 필터링으로 확인하면 연도에 따른 각 항목의 흑자/적자 상태를 확인할 수 있다. 
- 예제의 경우 `Machines`를 확인하기로 했고, `Region` 항목도 끌어옴.
![[Pasted image 20230314170312.png]]
> South의 적자 막대가 더 진한 갈색인 걸 볼 수 있음 : 색의 진하기가 적자의 규모를 나타냄


- 지금 상황이 연도, 항목, 지역에 따른 총 판매량과 수익률임
- 아래에서 시트 이름을 더블클릭해서 바꿀 수 있고, **`복제`해서 중단한 위치에서 다시 작업할 수도 있다.**

- 결과적으로 `South`에서 문제가 발생했음을 확인할 수 있었지만, 뚜렷한 원인을 본 건 아니다
- 이를 채우기 위해 지리적인 탐색을 볼 필요가 있다. 

## 4. 데이터 지리적으로 탐색
- 새로운 시트를 생성해서 기존 작업 내용을 유지한 채로, `State`를 더블클릭해 마크 카드의 세부 정보에 추가함
- 국가 정보(`대한민국`)가 들어가 있다면 정상적으로 매핑되지 않는 현상이 있었는데, `Country`를 같이 넣어주면 뜸
- 자동으로 `Country` 필드가 뷰에 추가된다 : 계층의 일부라 그러함
- 위도, 경도 데이터도 자동으로 추가된다 : `Tableau`에 의해 생성되나, 그렇지 않은 경우도 있으며 이 경우 두 필드를 데이터에 추가해야 함

- `Region`을 필터로 끌어와 `South`만 지정한 뒤
- `Sales`를 마크 카드의 색상으로 옮긴다. 색깔도 녹색 - 빨간색으로 바꿔준다.
![[Pasted image 20230314172115.png]]
> 중요한 건 이 자체가 데이터를 유용하게 전달한다고 볼 수 없다는 것이다.  
> 예를 들면 이 그래프는 매출의 크기만이 주어졌기 때문에, 단순히 사람이 많고 적음에 따라 매출량이 차이가 난 걸 수도 있다.

- 한편, 색상에 `Sales` 대신 `Profit`을 끌면 이런 결과를 얻을 수 있다.  
![[Pasted image 20230314172337.png]]
> Sales가 높음에도 적자를 보는 지역들이 있음을 알 수 있다. 그 이유를 찾아보자.


## 5. 세부 정보로 드릴다운

- 위의 작업 내용을 `Profit Map`으로 저장하고, 복제해서 `Negative Profit Bar Chart`로 이름을 변경한다.
- 이후, 우측 상단 `표현 방식` - `가로 막대` 를 클릭한다.
- 적자를 보는 지역들만 커서로 `ctrl + 클릭`해서 `이 항목들만 포함`을 선택한다. (드래그도 가능)
- Column 간 계층이 있다면 행, 열에 있는 각 피쳐에 대해 `+` 혹은 `-`표시가 있다. 이렇게 **더 깊은 피쳐로 접근하는 방식을 드릴 다운**이라고 한다. 
	- 근데 내 경우 저 표시가 뜨지 않았음 : `시`에 대해 자세히 접근하므로, `City`를 `행` 으로 드래그했다.

- 이후 `City`를 필터 카드로 옮긴 다음, 뜨는 대화상자에서 `상위` 탭으로 간다. `필드 기준 - 상위 드롭다운 - 하위, 5`를 입력해서 실적이 가장 낮은 5개의 도시를 표시한다. 
	- 예제의 경우 바로 값이 뜨지 않는데, 아래의 이유 떄문이라고 한다.(난 뜨는데 5개가 아니라 6개가 뜨며 JacksonVille이 Florida와 North Carolina에 중복으로 뜸)
	> Tableau의 필터 적용 순서는
	> 1. 추출 필터  
	> 2. 데이터 원본 필터  
	> 3. 컨텍스트 필터  
	> 4. 상위 N 필터  
	> 5. 차원 필터
	> 6. 측정값 필터  
	> - 필터 선반에 유저가 배치하는 순서는 Tableau가 뷰에 필터를 적용하는 순서를 변경하지 않는다.
	> - 상위 N 필터가 적용될 때 "전체 맵"에 대해 실적이 가장 저조한 5개 도시에 적용되는데, 어느 도시도 남부에 없어서 적용되지 않는단다
	> - 이걸 바꿔주려면 `컨텍스트`에 필터를 추가하는 방식으로 이뤄지면 된다 : 즉 상위 N 필터를 적용하기 전에 지역을 한정지어 줘야 함
- **컨텍스트**는 필터에서 `원하는 항목 우클릭 - 컨텍스트에 추가`만 해주면 됨
- `North Carolina의 JacksonVille`이 양수인데도 뜨는 이유 : `City`가 뷰에 포함된 가장 낮은 세부 수준이기 때문임 : 더 낮은 세부수준(우편 번호)을 추가하면 노스캐롤라이나의 잭슨빌만을 제외시킬 수 있다. 

- `Postal Code`을 행에 추가한 뒤, `28540`을 우클릭해서 제외한 다음, `Postal Code`를 행 밖으로 드래그함(행 밖으로 드래그하면 그냥 없어짐)
![[Pasted image 20230314174228.png]]

### 문제 항목 식별하기
- 어떤 항목이 문제를 일으키고 있는가를 파악하는 과정
1. `Sub-Category`를 행으로 옮긴다
2. `Profit`을 색상으로 옮긴다
3. `Order Date`를 우클릭한 뒤, 필터 표시를 선택한다

- `Machines, Tables, Binders`의 항목이 특히 마이너스 값이 큼을 알 수 있는데, 이들을 제거하면 이 지역들의 수익이 올라갈까?를 살펴보자

- 이전에 작업한 `Profit Map`으로 돌아간 다음, 
- `Sub-Category`의 필터 표시를 켜고, 
- `Profit` 항목을 `레이블`로 옮긴다. (마우스 오버 없이 그래프에 `Profit` 값이 표시된다.)
- `Order Date`의 필터 표시를 켠다.
- `Sub-Category`의 `Binders, Machines, Tables`을 끈다. 
- 이를 통해 기존에 수익이 `-`였던 지역들이 모두 `+`로 바뀌는 것을 알 수 있다.
- ![[Pasted image 20230314174922.png]]
- 주의해야 할 건, 저 세 지역이 `+`로 바뀌었을 뿐이지 **다른 지역들에서 저 항목들이 `-`의 역할을 했다고 볼 수는 없다**는 것이다! (필터를 켜고 끄면서 변하는 값들을 확인할 수 있다)

#### 추가 질문들
1. 세 지역의 `Machines` 매출과 판매량, 수익의 연관성
	- Florida, NorthCarolina에서만 Machines 판매가 있음. North Carolina의 판매량이 더 적음(Quantity가 판매량이라면) 에도 더 큰 손해를 보고 있는 것도 알 수 있음
	- 오히려 `Quantity`는 `Sales`랑 비례함 
	- `Discount`가 할인율이라면 평균값이 50%으로 동일함
2. 할인율 관련
	- 손해를 보는 게 할인율과 꼭 비례하는 건 아님
	- 그러나 특기할만한 점은, **손해를 보는 항목들 모두 할인율이 통상(20%)보다 높음(40% 이상)**
3. Table과 Binder
	- 일단 Quantity를 그렇게 볼 필요는 없을 듯 : Sales가 더 중요한 것 같다
	- 얘네들도 손해를 보는 항목이긴 한데, Binder의 경우 Memphis, Burlington, Concord에서 두드러짐
		- 할인율이 영향을 준다고 보긴 힘듦 : Binder는 판매하는 지역 모두의 할인율이 동일하다
4. Bookcase
	- 역시 상기한 지역들에서 손해를 보고 있는 항목들 
	- 도시로 들어가면 `Coral Springs, Fort Lauderdale, Miami, Fayetteville 등에서 손실이 나고 있음`
	- 손실이 나는 도시들을 확인했을 때, 평균 할인율은 `0.2`로 동일함
	- 근데 **판매 수와 적자 순서가 동일함 : 즉, 많이 팔수록 더 손해를 본다는 것**
	- 판매액은 `For Lauerdale`이 더 높았다 : 그러나 판매액(`Sales`)이 높은 곳들이 더 손실을 많이 봤음.
![[Pasted image 20230314181601.png]]

- **원하는 차트를 띄운 상태에서 다른 것들을 할 수 있게 해주는 시트 복제 기능이 ㄹㅇ 좋다.**

## 6. 심층 정보 표시하기 : 대시보드 작성
- 대시보드를 만들면 왼쪽에 현재 사용하고 있는 시트들이 있음
- 이 시트들을 빈 대시보드에 드래그하면 **여러 시트를 한 곳에 모아서 볼 수 있다.**
- 일단 `Sales In South`와 `Profit Map`을 드래그해서 이용함

1. `Profit Map`이 이미 남부에 대한 정보이므로, 그래프의 열에 표시된 `Region`은 굳이 필요하지 않다.  -> 이를 없애려면 해당 항목을 우클릭 해서 `머리말 표시` 체크를 해제하면 됨.
	- 마찬가지로 대시보드에서 표시하고 싶지 않은 영역(제목, 축 이름 등)을 우클릭해서  숨길 수 있다.

2. 시트에서 `필터 표시`한 항목들은, 대시보드에서도 기본적으로 유지되어 같이 창에 뜬다.
	- 만약 이를 제거하고 싶다면, 해당 항목을 클릭하면 `X`표시가 뜸. 그거 클릭하면 됨. 

3. 만약 어떤 필터를 마음대로 움직이고 싶다면, 해당 카드 클릭 -> 드롭다운 버튼 클릭 -> `부동` 활성화하면 움직일 수 있음 
> 부동 vs 바둑판식
> 바둑판식 : 항목 배치 영역에 따라 자동으로 크기가 조절됨
> 부동 : 자유롭게 이동할 수 있고 크기를 조절할 수 있다. 
- `Order Date 연도 필터의 드롭다운 - 단일 값(슬라이더)`을 만지면 `Sales In South`의 각 연도에 따른 판매액을 볼 수 있음(누적 X, 각 연도)
![[Pasted image 20230316155329.png]]

### 상호작용 추가하기
1. `대시보드에 띄운 Profit Map`을 클릭하면 3번째로 깔때기 **`필터로 사용` 아이콘**이 있다. 그걸 클릭함
2. 위 지도에서 어떤 주를 클릭하면, **아래의 `Sales In South`의 정보가 해당 주에 대한 정보만을 보여주게 된다.**
3. 원상 복귀 : 클릭했던 주(지도)를 다시 클릭함.
4. **`Order Date` 연도 필터 - 드롭다운 화살표 - `워크시트에 적용` - `선택한 워크시트` 클릭 후 대시보드 모든 항목에 적용**하면 여기도 마찬가지로 연도 슬라이더를 바꾸는 것으로 지도에 보여주는 정보를 바꿀 수 있다. (모든 정보를 보려면 슬라이더를 가장 앞으로 끌어당기면 된다.)
 ![[Pasted image 20230316155746.png]]
 ![[Pasted image 20230316155805.png]]
 > 예제 2개 : 2015년과 2016년의 Profit 정보(지도)와 판매 정보
 
## 7. 프레젠테이션 스토리 작성
1. `새 스토리` 클릭
	- 대시보드 초기 상태와 비슷한데, `스토리`는 `시트`, `대시보드` 모두 사용할 수 있다.
2. `Sales in the South` 드래그 후, 회색의 캡션 상자에서 `연도별 매출 및 수익`이라고 텍스트 추가

- 노스캐롤라이나주의 Machines 판매에 대한 스토리를 설명하기 위한 내용 정리
1. 스토리 패널 - 복제(스토리 패널은 왼쪽에 있다..) 
2. 복제된 스토리에서 `Sub-Category` 필터에서 `Machines`만 남김
3. 캡션 상자를 클릭하면 위에 4개의 아이콘이 뜨는데, 그 중 오른쪽 `ㄴ>ㅁ` 아이콘을 클릭함--> `Machines의 연도별 매출과 수익` 항목 추가
> 저 캡션 상자를 클릭할 때마다 뜨는 그래프가 달라짐!

> 현재 시점에서 손실의 원인에 들어가는 주를  확인할 수 없음


### 포인트 만들기
- 스토리 포인트는 **왼쪽 탭에 보면 `새 스토리 포인트`라고 떠 있는게 있네? 복제도 이거 얘기**인듯;
- 스토리 패널의 공백(`캡션 상자의 오른쪽`)에 `Regional Sales and Profit` 드래그 & 드랍 -> 새로운 캡션 상자가 추가되고 해당 대시보드를 가져오게 됨
- `North Carolina`로 한정하기
	- 돌이킬 수 있게 하기 위해, `복제`를 누른 다음 새로운 스토리 탭에서 `North Carolina`를 클릭해서 정보들이 바뀌는지 확인한다.

### 결과 설명하기
1. 왼쪽 패널 - `텍스트를 끌어와서 추가` 선택 후 뷰로 끌어온다
2. 해당 대시보드에 대한 설명을 입력한다(이 텍스트 박스는 크기 조절이 가능함)
3. 세부 정보 드릴다운하기 : 스토리 패널(=캡션 상자)의 빈 공간에 `Negative Profit Bar Chart`을 드래그앤 드랍 
4. `Order Date`를 `2017년`만 표시
5. `Burlington`의 `Machines`의 마이너스 막대가 특히 큰 것을 볼 수 있다. `해당 막대 우클릭 - 주석 추가 - 마크` 클릭
6. `"2017년 Burlington의 장비는 약 4000$의 손실을 입혔습니다."`라는 텍스트 추가
7. 주석의 위치 조절(클릭 후 드래그)
8. 스토리포인트에 캡션 "노스캐롤라이나 주의 장비 수익에서 손실이 나는 곳이 어디입니까?"를 지정함
9. 지금 스토리 탭을 `Improve Profits in the South`로 변경함

> 크기 변경하기 
> 프레젠테이션 모드에서 오른쪽에 스크롤 막대가 생겼다면, 화면이 너무 큰 것일 수 있다. 
> 이 경우 편집 모드에서 크기를 만져줄 수 있음


## 8. 결과 공유
-  `Tableau Public`을 사용한 예제임
	- `Public`은 뷰의 데이터를 **모든 사용자**와 공유하는 것이 됨 : 기밀 정보를 쓸 경우 `Server`나 `Cloud`를 쓰는 게 좋다

1. `서버 - Tableau Pbulic - Tableau Public에 저장`을 선택, 로그인
2. 연결 유형을 `라이브`에서 `추출`로 변경
3. `서버 - Tableau Pbulic - Tableau Public에 저장`
4. 브라우저가 열리면 스토리를 검토함.
5. `세부 정보 편집`으로 들어가서 시각화 제목을 업데이트하고 설명을 추가함
6. `저장` 클릭 (웹에 게시됨)
7. 동료와 공유하려면, 시각화 아래의 `공유`를 누름
8. 스토리 공유 방법은 이외에도
	- 웹 사이트에 내장 : 내장 코드의 HTML을 복사해 웹페이지 HTML에 붙여넣는다
	- 링크 보내기
	- 이메일 아이콘을 클릭해 기본 이메일 클라이언트로 메일을 보냄
	- 해당 아이콘을 클릭해 트위터나 페북에서 공유함 