#스팀프로젝트
- 마지막으로 만진게 18일 전이네 ㄷㄷ

### 이전에 Details로 받아온 특성들 정리
1. `Languages`, `Genre` 는 `,`로 구분된 여러 개의 특성이 있음
2. `tags`는 `dict` 형태로 저장됨 : `{tag_name : tag_count}`

--- 
#### 얘네들을 특성으로 올려보자

## 1. 한 특성 내에 `,`로 구분된 값들을 특성으로 올리기


> 예시 )   
> `df`의 `Languages` 특성 내에 `Arabic, Azerbaijani, Basque, Korean,Korean` 같은 식으로 구분되어 있음

- 목표 : `,`로 구분된 각 문자열을 특성으로 만들고, 있다 / 없다로 표시할 거임

- 여기서 쓸 수 있는 게 **원핫인코딩**이다. 판다스에서는 `pd.get_dummies()`를 지원하지만 문자열에 접근하는 `pd.str.get_dummies()` 방식도 있음.

```python
df.langauges.str.get_dummies(sep = ',')
```
- 이 방식은 레코드마다 다른 순서로 특성들이 오더라도, 같은 특성에 값을 올려줄 수 있다는 장점이 있다.

## 2. 같은 값을 가리키는데 값이 다를 때 합치기

> 예제처럼 `, Korean,Korean` 같은 방식으로 들어가 있다면 위 코드는 ` Korean`과 `Korean`이라는 2가지 특성으로 구분된다.

- 별개의 특성으로 잡히기 때문에 이들을 합쳐주는 함수를 작성할 수 있다.
```python
def merge_columns(df):
    result = df.copy()
    
    for col in result.columns:
        if col[0] == ' ':
            if col.strip() in result.columns:
                df[col.strip()] = result[[col, col.strip()]].sum(axis = 1).apply(lambda x : 1 if x > 0 else 0)
                result = result.drop(col, axis = 1)

	return result

df = merge_columns(df)
```
- 함수를 작성할 때 주의할 것은 **반드시 함수 내부에서 수정된 `df`를 반환해야 한다**는 것이다. 
- 이렇게 작성할 경우, 함수 내부에서 쓰이는 데이터프레임의 이름을 구분해주는 게 좋다.
- 함수 밖에서는 똑같이 `df`로 받으면 된다.

- 만약 `return`을 쓰고 싶지 않다면, 아래처럼 작성할 수 있다 (`inplace = True`)
```python
def merge_columns2(df):
        
    for col in df.columns:
        if col[0] == ' ':
            if col.strip() in df.columns:
                df[col.strip()] = df[[col, col.strip()]].sum(axis = 1).apply(lambda x : 1 if x > 0 else 0)
                df.drop(col, axis = 1, inplace = True) # 여기 수정

merge_columns2(df) # 여기 수정
```

### 시행착오
```python
(df.langauges.str.get_dummies(sep = ',')
				.rename(columns = lambda x : x.strip())
 )
```
- Bing이 추천해준 방법인데, 실제로 쓰려면 문제가 있음
- 동일한 이름의 Column이 생기기 때문에, 이후에 Column의 이름을 이용한 작업을 하려고 하면 동시에 잡힌다. 
- 예를 들면 `df['Korean']`을 하면 2개의 열이 동시에 잡힌다. 별개의 열로 작업해야 하므로 이 방법은 제외했음