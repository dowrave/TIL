
`Bing`의 사례 : 광고 헤드라인 표시법 바꾸기 - `가장 앞에 나오는 내용을 제목으로 올리자!`  
이를 A/B 테스트로 실험하고 전체에 적용한 결과, 빙의 매출은 12% 증가했으며 다른 사용자 경험 지표를 저해하지도 않았다. 이 아이디어의 교훈
	- 아이디어의 가치는 평가하기 힘들다
	- 작은 변화도 큰 영향을 줄 수 있다
	- 큰 영향을 발생시키는 실험은 드물다
	- 실험을 실행하는 오버헤드는 적어야 한다.
	- 전체 평가 기준(OEC)이 명확해야 한다. 위 예제의 경우 `매출`을 봤지만 `사용자 경험 지표`도 같이 봤다는 것. 

### 온라인 종합 대조 실험 용어
`종합 대조 실험Controlled Experiment`, 혹은 `A/B 테스트`라는 용어로 제시될 것.
- UI, 알고리즘(검색, 광고, 개인 정보 확인, 추천 상품), 지연 시간/성능, 콘텐츠 관리 시스템, 고객 지원 시스템 등이 실험되며, 웹사이트, 앱, 모바일 앱, 이메일 등 여러 채널에서 실행된다.
- **사용자는 여러 그룹으로 무작위로 분할되며, 한 번 지정된 분할은 바뀌지 않는다.**

#### 전체 평가 기준OEC, Overall Evaluation Criterion
- 실험 목적의 계량적 지표. 단기적으로 측정할 수 있으면서 장기적으로 전략적인 목표가 될 수 있어야 한다.
- 흔히 통계에서 `반응, 종속 변수`라고 불리며, 결과, 평가, 적합도 함수가 동의어가 될 수 있다.
	- 검색 엔진의 경우 아래 예시들의 조합이 평가 기준이 되는 경우도 있다.
		- `사용량Usage` : 사용자당 세션 수
		- `관련성Relevance` : 성공적인 세션, 성공까지 걸린 시간
		- `광고 수익`
- 단일 지표를 갖는게 권장되지만, 실험은 여러 목표를 가질 수 있으며, `밸런스 스코어 카드 접근 방식`을 사용할 수 있다.

#### 파라미터
- OEC나 기타 관심 지표에 영향을 주는 것으로 간주되는 통제 가능한 실험 변수.
- `요인Factors`, `변수Variables`라고도 한다.
- 할당되는 값을 `수준Level`이라고 한다. 
- 단순 A/B 테스트에서는 2개의 값을 갖는 단일 파라미터가 있으며, 온라인에서는 여러 값(2개 이상의 범주)을 가진 단일 변수 설계를 사용한다.
- `다변수 테스트MVT : MultiVariate Tests`는 다중 파라미터를 함께 평가해 파라미터가 상호작용할 때의 전역적 최적값을 발견할 수 있도록 한다.

#### 변형군
- 파라미터에 값을 할당해서 테스트하는 사용자 경험.
- A/B 테스트에서는 `실험군 = 변형군`이며, 대조군은 비교할 기준이 되는 기존 버전으로 간주한다. 
	- 예를 들면 실험에서 버그가 발견되었다면 모든 사용자를 대조군으로 넣어야 한다.

#### 무작위 추출 단위
- `준무작위 추출`(해싱 등) 과정을 각 `단위`(**사용자** or 페이지)에 적용해 변형군에 할당한다. 
- 각 변형군에 들어간 사용자들이 통계적으로 비슷해야 하므로 무작위 추출은 중요하다. 
	- 샘플을 뽑을 때 사용자는 동일한 경험을 일관되게 가져야 하며, 한 사용자의 변형군 지정이 다른 사용자의 변형군 지정에 영향을 줘선 안된다.
- **`사용자`를 그 기준으로 삼는 게 매우 일반적이며 권장된다.**
	- 일부 실험 설계에서는 페이지, 세션, 사용일 등으로 무작위 추출을 선택하는데, 사용자 경험이 서버에 의해 정의된 매 24시간 동안 일관성이 유지되어야 한다.
- **무작위 추출은 중요하고, 어렵다.** 아래는 그 예시.
	- 맥박 기계로 만든 100만개의 난수에서, 하드웨어의 편향으로 인해 다시 무작위 추출하는 경우.
	- `종합 대조 실험`은 처음에 의료 분야에서 나왔다. 결핵에 대한 스트렙토마이신 실험을 실시했으나 의사의 내과적 편견에 의해 편향이 발생, 실험이 실패한 경우가 있다.
- **랜덤성은 마구잡이식이거나 계획되지 않은 게 아니라, 확률에 기초한 의도적인 선택**이다.

### 실험 이유
> 예시 : 매달 사용자의 X%가 이탈하는 구독 사업에서, 새로운 기능을 A/B 테스트로 도입했더니 이탈률이 X/2%가 되었다. 이 기능을 확장하면 이탈률을 줄일 수 있을까?
- 답은 `이 데이터에서는 결론을 내릴 수 없다`이다. 실제로 적용했을 때 사용자가 감소할 수도 있고 증가할 수도 있다.

- 예시) 오피스 365에서 오류가 많이 뜨고 충돌을 경험한 사용자의 이탈률이 낮다면, 더 많은 충돌을 유발해야 할까? 아닐 것이다. 
	- `오류, 충돌, 이탈` 모두 `사용률Usage`이라는 1가지 요인으로 발생한다.
	- 제품을 많이 쓰는 사람은 오류 메시지가 더 많이 뜨고, 충돌이 더 많이 발생하며, 더 적게 이탈한다는 것이다.
- 따라서 관찰에만 지나치게 의존하면 상관관계를 인과관계로, 잘못된 결정을 내리게 된다.

- **인과관계를 확립하는 최고의 기준은 무작위 추출 종합 대조 실험이다.** 이 실험을 검토하는 메타분석은 더 많은 증거와 일반화 가능성을 제공한다.
```
# 임상시험 설계 품질 평가를 위한 증거 계층(위로 갈수록 좋음)

1. 메타 분석
2. 무작위 종합 대조 실험
3. 기타 종합 대조 실험
4. 관찰 연구
5. 사례 연구(그룹의 개인 분석) & 일화, HiPPO(최고 경영자 의견) 등의 개인 의견
```

- 저자들은 온라인 종합 대조 실험을 이런 것이라고 믿는다 :
	- 높은 확률로 인과관계를 확립할 수 있는 최선의 과학적 방법
	- 다른 기법으로 탐지하기 어려운 작은 변화 감지 가능
	- 예상치 못한 변화 감지 가능 : 성능 저하, 충돌/오류 증가, 클릭 수 감소 등.

- 온라인 종합 대조 실험이 불가능한 경우에만 관찰 연구 등을 사용하는 것을 권장한다.

### 유용한 종합 대조 실험을 위한 필수 재료

1. 서로 간의 간섭 효과 없이 여러 변형군에 할당될 수 있는 실험 단위.
	- **사용자**

2. 종합 대조 실험에 충분한 실험 단위. 수천 개를 권장하며, 클수록 더 작은 효과도 탐지할 수 있다.

3. 평가 가능하면서도 다른 사람도 동의하는 핵심 지표. 목표 측정이 어렵다면 대체 지표를 합의하는 것이 중요하다.

4. 용이한 변경. 

### 원칙

#### 1. 조직은 데이터 중심 결정을 내리고 OEC를 공식화한다.
데이터 중심적이 되려면 조직은 짧은 기간(1~2주)에 걸쳐 쉽게 측정할 수 있는 OEC를 정의해야 한다. 대규모 조직은 여러 개의 OEC를 가질 수 있으며, 이들은 분야 간 공유되며 분야별로 적절히 수정되어 사용한다. 어려운 건 단기간 측정 가능 & 차이를 보일 정도로 민감 & 장기 목표를 예측할 수 있는 지표를 찾아내는 일이다.  또한, 조직이 전사적으로 이해관계가 일치하는 OEC에 동의하는 것이 중요하다.  
- 예를 들어 `가격 인상`은 단기 이익을 증가시키나 장기적으론 이를 해칠 수 있기 때문에 `이익`은 좋은 OEC가 아니다.   


`데이터 정보 기반Data-Informed`, `데이터 인지Data-Aware`는 의사 결정이 단일 데이터(종합 대조 실험 등)에 의해 내려지지 않았음을 의미하기 위해 사용된다. 궁극적으로 `종합 대조 실험`, `조사`, 새로운 코드의 유지보수 비용 추정 등을 포함한 다양한 데이터로 의사결정이 이뤄져야 한다. 이게 잘 되는 집단은 직관에 의존하지 않고 데이터를 수집해 최고 경영자에게 전달하는 방식으로 일을 진행한다.

#### 2. 조직은 종합대조실험을 실행하고 신뢰성을 확인하기 위해 인프라, 테스트에 기꺼이 투자할 용의가 있다.
온라인 소프트웨어 영역은 종합 대조 실험에 필요한 조건을 쉽게 충족할 수 있다. `애자일 소프트웨어 개발`, `고객 개발 프로세스`, `MVP : Minimum Viable Products`와 결합할 때 유용하다.

#### 3. 조직은 아이디어의 가치를 평가하는데 서툴다는 것을 인지한다.
**많은 곳에서 대부분의 아이디어는 핵심 지표를 개선하는 데 실패한다**. 암만 높아도 1/3을 넘지 못한다. 


### 시간에 따른 개선
주요 지표의 개선은 **0.1% ~ 2% 정도의 수많은 작은 변화로 달성**된다.  

### 전략, 전술과 이들의 실험의 관계
- 실험에 필요한 요소들이 충족되면 모든 수준의 조직 결정에 정보를 주도록 실험이 수행되어야 한다. 적절한 지표를 통해 잘 실험된 실험은 비즈니스 전략, 제품 설계를 보완하고 조직의 데이터 중심화를 통해 운영 효율성을 개선한다. 

#### 시나리오 1. 비즈니스 전략 O, 실험할 수 있는 충분한 사용자 O
이 시나리오에서 실험은 전략과 제품에 기초해 국지적 최소화를 달성하는 데 도움이 될 수 있다.
- 실험은 ROI가 높은 분야 : 노력 대비 OEC를 가장 많이 개선하는 분야 식별에 도움을 준다. 
	- 최소 기능 제품(MVP)으로 상이한 분야를 시도하면 큰 자원 투입 전에 많은 분야를 더 빨리 탐색할 수 있다.
- 실험은 설계자에게 명확하지 않을 수 있지만 `큰 차이를 낼 수 있는 최적화`에 도움이 될 수 있다.
	- `색상, 간격, 성능` 등
- 실험은 `초두 효과Primacy Effect`, 즉 이전 기능에 익숙하다면 완전한 재설계가 아니라 지속적으로 더 나은 사이트를 재설계하도록 돕는다.
	- 완전한 재설계는 목표 달성 실패 + 이전 사이트와의 동등성 달성도 실패한다.
- 백엔드 알고리즘과 인프라 구조 최적화에 실험이 중요할 수 있다. 

회사에는 `어떻게 실험을 제대로 실행하는가`에 초점을 맞추는 팀도 있지만, `지표 선택, 검증, 개선`에 초점을 맞추는 팀도 있다. 지표 개선은 시간이 지남에 따라 진화하는 전략에 의해 필요하며, `CTR` 등 전통적 지표에 한계가 왔을 때도 지표 개선이 필요해진다.   
이 전략을 OEC에 연결하면 `전략 무결성Strategy Integrity`이라는 개념이 생성된다. 이해관계가 일치하고, 어떻게 수행되는지 아는 조직에 의해 올바른 전략이 실행된다. 하향식 관점과 상향식 과제를 매칭하는 것이다.  
궁극적으로 좋은 OEC가 없다면 자원을 낭비하는 것이다. 일단 가장 중요한 건 안전성. 소프트웨어에서 중요한 건 `충돌` 이슈다.  
전략은 트레이드오프인 무엇을 하지 않을까 또한 중요하기 떄문에, `가드레일 지표`를 정의하는 것은 무엇을 변화시키려 하지 않는가를 식별하기 위해 중요하다. 


#### 시나리오 2. 제품과 전략이 있으나 결과는 방향 전환을 검토할 필요가 있음을 제시
보통 항상 `아이디어 포트폴리오`를 만들 것을 권고한다. 대부분의 큰 전환은 실패하지만, 위험/보상의 트레이드 오프가 있다. 급진적인 아이디어 테스트 시 평가 방법은 아래 사항을 고려해야 한다.

- **실험 기간** 
	- UI의 경우 단기 측정한 변화는 `초두 효과`나 `변화 회피`의 영향을 받을 수 있다. 
	- 실험군, 대조군의 직접 비교는 진짜 장기적인 결과를 측정하지 못할 수 있다.
	- `양면 시장(플랫폼을 통해 구매자 - 판매자 간의 거래가 이뤄지는 시장)`에서 변화가 충분하지 않으면 변화 시험이 시장에 영향을 미치지 않을 수 있다. 
- **테스트 아이디어 수**
	- OEC를 개선하지 못하는 단일 실험은 특정 전술이 부실할 수 있기 때문일 수 있으며, 이게 전체 전략이 반드시 나쁨을 의미하는 것은 아니다. 
	- 실험은 가설 테스트라면, 전략은 훨씬 광범위하다 
	- 종합 대조 실험은 전략을 수정하거나 비효과적인 부분을 보여주고 방향 전환 장려를 돕는다. 

- 종합 대조 실험 수행 능력은 당신이 `최소 기능 제품`을 시도하고, 데이터를 얻고, 반복함으로써 불확실성을 줄일 수 있게 해준다. 그러나 모든 사람이 테스트에 몇 년을 가질 수는 없기 때문에 불확실성 속에서 결정을 내려야 할 수 있다.
- 이 때 중요한 개념 중 하나가 `EVI : Expected Value of Information`이다.
	- 추가 정보가 의사결정에 어떻게 도움이 될 수 있는지를 포착한다.

### 추가 참고 문헌
- `Georgi Georgiev`의 2019년 저서 : 통계적 설명이 포함되어 있음
- `멀티 암드 밴딧Multi-Armed Bandit`은 `실험 트래픽 배분Experiment Traffic Allocation`이 동적으로 업데이트 될 수 있는 실험의 한 유형이다.
	- 매 시간마다 실험을 관찰, 각 변형군의 성과를 관찰하고, 각 변형군이 받는 트래픽의 비율을 조정할 수 있다. 잘 하는 변형군은 트래픽을 많이 얻는다.
	- 일반적인 A/B 테스트보다 효과적이다. 실험 중 변형군 쪽으로 트래픽을 이동시키기 때문이다. 
	- 적절한 문제가 광범위하게 존재하지만, 평가 목표는 `단일 OEC`가 되어야 하며 재할당 간에 합리적으로 잘 측정될 수 있어야 한다는 것이 제한사항이다. 변형군의 범위가 변하면서 편향이 생기는 것도 단점.
