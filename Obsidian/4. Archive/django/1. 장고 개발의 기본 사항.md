[[#1. MTV 개발 방식|1. MTV 개발 방식]]
[[#2. MTV 코딩 순서|2. MTV 코딩 순서]]
[[#3. Settings.py 주요 사항|3. Settings.py 주요 사항]]
[[#4. models.py 주요 사항|4. models.py 주요 사항]]
[[#5. URLconf 주요 사항|5. URLconf 주요 사항]]
[[#6. views.py 주요 사항|6. views.py 주요 사항]]
[[#7. Templates 주요 사항|7. Templates 주요 사항]]
[[#8. Admin 사이트|8. Admin 사이트]]
[[#9. 개발용 웹 서버 : runserver|9. 개발용 웹 서버 : runserver]]

- Django 웹 프로그래밍 개발은 쉽고 빠르다.
	- Django 개발은 `MTV(Model - Template - View)`에 따른 일정한 룰로 진행된다.
	- 필요한 기능을 미리 만들어둔 다음, `단축 함수`, `제네릭 뷰` 등으로 제공한다.
	- 서드파티에 의한 외부 라이브러리가 풍부하다
	- 해외에서 가장 많이 사용되는 웹 프레임워크라 레퍼런스가 많다.

## 1. MTV 개발 방식

- 웹 프로그래밍 영역을 3가지 개념으로 나눠 개발한다.
	- `모델Model` : 테이블 정의
	- `템플릿Template` : 사용자가 보는 화면 정의
	- `뷰View` : 앱의 제어 흐름 및 처리 로직 정의

각 MTV 모듈 간의 독립성을 유지할 수 있고, 느슨한 결합 설계의 원칙에도 부합한다.  
모델은 `models.py`에, 템플릿은 `template/` 디렉터리의 `*.html`에, 뷰는 `views.py`에 정의된다.   
파일 이름도 장고에서 지어준다. 

## 2. MTV 코딩 순서
- 정해진 순서는 없으나..
	- `화면 설계` -> `뷰, 템플릿`
	- `테이블 설계` -> `모델`
- 따라서 **독립적으로 설계할 수 있는 `모델`을 먼저 코딩한 후, `뷰와 템플릿`은 모델 이후에 같이 코딩한다.**
- 뷰, 템플릿의 경우 필자는 UI를 생각하며 로직을 푸는 게 쉬워서 템플릿을 먼저 코딩한다.
	- 단, `클래스형 뷰CBV : Class-Based Views` 같이 뷰의 코딩이 매우 쉬운 경우는 뷰를 먼저 코딩한다.

- 이 책은 대부분 클래스형 뷰를 사용하므로, `모델 -> 뷰 -> 템플릿` 순서로 코딩하며, 이외에도 프로젝트 설정 파일 및 URLconf 파일까지 포함한다. 
	- `프로젝트 뼈대 만들기`
	- `모델 코딩하기` - `models.py`, `admin.py`  등 테이블 관련 사항 개발
	- `URLconf 코딩` - URL 및 뷰 매핑 관계 정의 `urls.py`
	- `뷰 코딩` - 앱 로직 정의 `views.py`
	- `템플릿 코딩` - 화면 UI 개발 (`templates/` 하위의 `*.html`)

## 3. Settings.py 주요 사항
- `settings.py` : 프로젝트 설정 파일로, 아래 사항들은 필수 사항이라 필요 시 수정해야 한다.
```
DB - 디폴트 : SQLite3
템플릿 - TEMPLATES로 설정
정적파일 항목 설정 - STATIC_URL 등 관련 항목 지정
앱 등록 - 프로젝트에 포함되는 앱들은 **모두** 설정 파일에 등록되어야 한다.
타임존 지정 - 디폴트 UTC -> 한국 시간 변경 필요
```
- 이외에도 각종 디렉터리의 위치, 로그 형식, 디버그 모드, 보안 사항 등 프로젝트의 전반적인 사항을 설정하는 곳이다.

## 4. models.py 주요 사항
- `models.py` : 테이블을 정의한다.
- DB 처리 시`ORM:Object Relation Mapping` 기법을 사용한다.
	- 테이블을 클래스로 매핑한다. 테이블에 대한 CRUD 기능을 클래스 객체에 대해 수행하면 장고가 내부적으로 DB에 반영한다.
	- 테이블을 클래스로 매핑할 때, **테이블의 컬럼은 클래스의 변수로 매핑**한다.
	- `django.db.models.Model` 클래스를 상속 받아 정의하며, 클래스 변수의 각 타입도 장고에서 미리 정의해놓은 필드 클래스를 사용한다.
- `마이그레이션migrations` : DB의 변경 사항을 알려주는 정보
	- 물리적으로 앱 디렉터리 별로 `migrations/` 하위에 마이그레이션 파일들이 존재한다.
	- 관련 명령어 : `makemigrations`, `migrate`

## 5. URLconf 주요 사항
- `URLconf`는 `urls.py` 파일을 말하며, `urls.py`는 URL과 뷰를 매핑한다.
- 1개의 파일에 정의하는 방법과, 2개의 파일에 정의하는 방법이 있다. 
- 필자는 후자를 추천한다. 즉, 프로젝트 전체의 URL을 정의하는 `프로젝트 URL`과 앱마다 정의하는 `앱 URL`을 2계층으로 나눠서 코딩하는 방식이다.
	- 변경도 쉽고, 확장도 용이하며, 다른 프로젝트에서 이미 개발한 앱을 쓸 때도 `urls.py`을 수정 없이 재활용할 수 있다.
	- URL 패턴 별로 이름을 지정할 수 있고, 패턴 그룹에 대해 `이름공간namespace`을 지정할 수도 있다.
		- `reverse()` 함수나 `{% url %}` 템플릿 태그를 이용해, 하드코딩 없이 필요 URL을 추출할 수 있다.

## 6. views.py 주요 사항
- `views.py` : 뷰 로직을 코딩하는 가장 중요한 파일
	- 프로젝트가 커질수록 `views.py`의 코딩량도 많아진다. 
	- 따라서 가독성, 유지보수 편리, 재활용 등을 고려해야 한다.
- 뷰 로직을 어떻게 구현하느냐에 따라 `함수형 뷰Function-Based Views`와 `클래스형 뷰Class-Based Views`로 구분한다. 
	- 일반적으로 둘 다 쓰이지만, 장고에서 제공하는 `제네릭 뷰`를 사용할 수 있고 재활용 및 확장성 측면에서 유리한 `클래스형 뷰CBV`를 더 자세히 공부할 것을 개추한다.
	- 장고는 뷰 작성에 편리한 기능을 많이 제공하고 있다. `단축 함수`와 `클래스형 제네릭 뷰`

## 7. Templates 주요 사항
- 웹 페이지 별로 `*.html` 파일이 하나씩 필요하므로, 여러 템플릿 파일을 작성한 다음 한곳에 모아두기 위한 디렉터리가 필요하다.
- 템플릿 디렉터리는 `프로젝트 템플릿 디렉터리`와 `앱 템플릿 디렉터리`로 구분해서 사용한다.
	- `프로젝트 템플릿 디렉터리`는 TEMPLATES 설정의 DIRS 항목에 지정된 디렉터리이다.
		- `base.html` 등 전체 프로젝트의 `룩앤필Look And Feel` 관련 파일을 모아둔다.
	- `앱 템플릿 디렉터리`는 각 앱 디렉터리마다 존재하는 `templates/` 디렉터리를 말한다.

- 예시로, `mysite` 프로젝트의 `bookmark` 앱의 경우 템플릿 디렉터리는 다음과 같다.
```
프로젝트 베이스(루트) 디렉터리 : folder/
프로젝트 디렉터리 : folder/mysite/
프로젝트 템플릿 디렉터리 : folder/templates/
앱 템플릿 디렉터리 : folder/bookmark/templates/
```

- 장고에서 템플릿 디렉터리를 찾는 순서이다.
	1. 프로젝트 템플릿 디렉터리
	2. 앱 템플릿 디렉터리 (INSTALLED_APPS 설정 항목에 등록된 순서)

## 8. Admin 사이트
- 테이블의 내용 : `콘텐츠`를 열람하고 수정하는 기능을 제공한다.
- `User, Group` 테이블을 기본적으로 포함하는데, 이는 `settings.py` 파일에 `django.contrib.auth` 앱이 등록되어 있기 때문이다.
- SQL 없이도 테이블의 모습 및 내용을 확인하고, 테이블에 레코드를 입력하고 수정할 수 있다.
- `Admin` 사이트에 원하는 테이블을 등록하려면 `admin.py` 파일에서 작업하면 된다.

## 9. 개발용 웹 서버 : runserver
- 장고에서 현재 웹 프로그램을 실행하기 위한 테스트용 웹 서버
- 만약 고객에게 오픈하는 상용화를 고려한다면, `runserver` 대신 `Apache`나 `Nginx` 등의 상용 웹서버를 사용해야 한다. 처리 능력이나 보안 이슈 등에서 `runserver`가 모자라기 때문이다.