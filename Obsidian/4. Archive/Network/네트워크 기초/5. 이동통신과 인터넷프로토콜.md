## 1. 이동전화와 위성네트워크

### 이동전화
- `Cell` : 각 이동전화 서비스영역을 나누는 작은 영역
- `기지국Base Station` : 각 셀을 제어
- `MSC:Mobile Switching Center` : 각 기지국을 제어
	- MSC는 기지국 - 전화국 사이에 통신을 조정함
	- 전화연결, 요금 처리 등
![[Pasted image 20221222180809.png]]
> 무선 -> 유선 전화를 한다고 가정하자
>> 무선 영역은 `기지국 <-> 휴대전화`까지만이고
>> 유선 영역은 `기지국 -> MSC -> PSTN ->..`으로 실제로는 유선 구간이 훨씬 많음
> 중간에서 과금 정보 등을 관리하는 게 MSC의 역할

#### Handoff
- 이동전화가 **한 셀에서 다른 셀로 이동(기지국의 이동)**
	- **신호의 세기**를 기준으로 했음 : 이동에 따라 신호가 약해지면 **원래 기지국과의 정보를 끊고** 새로운 기지국과의 정보 를 주고 받게 됨
	- 문제점) 새로운 기지국에 할당될 곳이 없다면?

- `Hard Handoff` : 우선 기존 기지국과의 관계를 끊은 뒤 새로운 기지국과의 연결 시도
- `Soft Handoff` : 기존 기지국과의 관계를 **끊기 전에** 새로운 기지국과의 연결 시도 (현재 대부분)
	- **동시에 두 기지국과 연결**됨

### 무선 인터넷의 역사

![[Pasted image 20221222181710.png]]
- 1G : 아날로그 전화기(벽돌)
- 디지털로 바뀌면서 `CDMA`가 들어오게 되고, 상용화되면서 많은 사람이 사용하게 됨
- 디지털로 바꾸니까 여러 기능을 추가할 수 있더라
	- SMS
	- 인터넷
	- 음성과 데이터 통합
	- 화상, 영화 등

#### 1G
- 아날로그 신호를 사용한 음성 통신
- AMPS(Advanced Mobile Phone System)
	- FDMA사용, 각 채널 당 주파수를 단말에 할당
	- 순방향, 역방향 채널 2개의 아날로그 채널 사용

#### 2G
- **디지털화된 음성신호 사용**을 위한 설계
	- 아날로그는 잡음까지 증폭되나, **디지털은 이진화되어 있기 때문에 원래 신호로 복원하는 데 훨씬 유용**했음
	- 부가적으로 채널 용량이 커져 한 기지국에서 수용할 수 있는 전화기 대수도 증가함
- 유럽표준 GSM 도입 
- `CDMA(Code Division Multiple Access)`는 GPS, SMS를 사용하게 되었으며 인터넷 사용도 가능했음

#### 3G
- **디지털 데이터와 음성 통신을 합치자**
	- 음성 품질이 기존 전화망에 견줄 만해짐
- 데이터 전송속도 2Mbps까지 빨라짐
	- 인터넷 접속 원활해짐
- CDMA에서 확장한 Wideband CDMA와 북미표준 CDMA2000으로 나뉨

#### 4G
- **ALL IP : 디지털 데이터 + 음성통신 통합**
- 데이터 전송속도 100Mbps
- 인터넷 접속 & 멀티미디어 통신 원활
- LTE : WCDMA에서 확장
- Wibro : CDMA2000에서 확장

### 위성 네트워크
- 인공위성을 이용한 통신형태(GPS가 대표적)
![[Pasted image 20221222182717.png]]
- **2개의 Van Allen Belt**를 피해서 인공위성을 띄우게 됨
	- `Van Allen Belt` : 하전입자를 갖는 계층
		- 인공위성이 이곳에 위치할 경우 하전입자에 의해 파괴될 수 있음
- Van Allen Belt를 제외한 다른 층들을 고도에 따라 나눔
	- GEO(Geosynchronous Earth Orbit)
	- MEO(Medium-Earth Orbit)
	- LEO(Low-Earth Orbit) 

#### GEO Satelites
- 정지궤도 위성 : 지구의 자전속도와 동일하게 움직임
- 북극에서 봤을 때 각 위성이 120$^o$ 차이로 존재함
- 따라서 **3개**의 인공위성을 띄우면 **지구 전체**를 관찰하는 정지궤도위성이 생기게 됨

#### MEO Satelites
- Upper Van Allen Belt ~ Lower Van Allen Belt 사이에 위치
- **GPS가 여기 있음**  (`Global Positioning System`)
	- 6개의 궤도로 24개의 위성이 돌고 있음
	- **GPS는 4개의 위성**으로부터 정보를 받아야 **위치 계산이 가능**함
		- 평면은 3개의 점으로부터 거리를 알면 위치 추적이 가능
		- 공간은 4개의 점으로부터 ..
> 대충 수학적인 이해(평면)
>>1. 타겟 x가 점 A에서 떨어진 거리 a에 있다고 할 때, x의 후보는 원으로 나타날 거임
>>2. 이 타겟 x는 **동시에** 점 B에서 떨어진 거리에 b에 위치함. 따라서 x의 후보는 최소 1개, 최대 2개가 됨(0개가 될 수 없음 : `동시에`를 만족해야 하니까)
>>3. 교점이 2개인 경우, 점 C에서 떨어진 거리 c를 만족하는 점은 단 하나일 것임
> 공간은 대충 구 -> 면 -> 선 -> 점 이 되겠죠?

#### LEO Satelites
- 가장 가까이 인접했기 때문에 지연이 적어 음성 통신에 주로 사용됨
	- 왕복전파지연시간 20ms 이내
- `이리듐 위성` 사용
- 90 ~ 120분에 1번씩 지구를 돎
- 6개의 궤도에서 각 궤도 당 11개의 위성(총 66개)

## 2. 인터넷 프로토콜 : IP
- `연결지향 프로토콜(Connection-Oriented Protocol)`
	- 데이터 전송 전 반드시 연결 설정을 해야 함
- `비연결형 프로토콜(Connectionless Protocol)`
	- 연결 설정 과정 없이 데이터 전송만이 존재함

### IP 패킷의 형태
- 각각의 장단이 있으나, 대표 프로토콜인 **IP는 비연결형 프로토콜**임
- 데이터가 생기면 **바로** 보냄(연결 설정하고 메시지 보내고 돌아오는 걸 기다린 다음 보내는 게 아님)
- 그래서 `Unit Date Transfer`이라고도 함
- 연결 설정을 하지 않기 때문에 데이터가 `Unreliable`함. 실제로 데이터가 없어질 수 있음
	- `Best-Effort Delivery` : 보낼 수 있는 한 최대한 보내보겠다
	-  이를 방지하기 위해 신뢰성이 중요한 전송에선 **TCP를 함께 사용함**
- 에러제어, 흐름제어 하지 않음
- 헤더는 체크함 : 헤더에 에러가 있다면 그냥 폐기함
- 그럼에도 네트워크를 가장 효율적으로 쓸 수 있다 - 패킷 전달 시 항상 매 패킷마다 가장 좋은 길로 전달한다

#### `IP 패킷` = `IP 데이터그램`
![[Pasted image 20221222185407.png]]
- 각 영역을 `Field`라고 부름
1. 버전(Version : VER)
	- `IPv4`와 `IPv6`으로 나뉨

2. 헤더의 크기(Header Length : HLEN)
	- 헤더의 크기를 나타내며 4바이트 단위
	- 헤더가 20 ~ 60 바이트로 가변적인 크기를 갖기 때문에 헤더와 데이터의 위치를 구분하기 위해 있는 필드이다.

3. Service
	- IP 패킷 서비스의 형태
	- 응용 서비스마다 주요하게 다뤄야 할 특성으로 `지연 시간, 신뢰성, 처리량` 등 어떤 특성을 고려해야 할 지 명시

4. Total Length
	- IP 데이터그램을 바이트 단위로 나타낸 전체 길이

5. TTL (Time To Live : 생존시간)
	- IP 데이터그램이 지나가는 최대 `홉(hop)`의 수
	- 홉은 각 라우터를 지날 때마다 1씩 감소한다
	- 홉이 0이되면 라우터는 해당 데이터그램을 폐기함
	- 왜 필요한가?
		>  인터넷에 패킷을 보낼 때, 빠져나가지 못하고 패킷을 빙빙 돌 수가 있음
		>  목적지로 간다는 보장이 없기 때문에 설정해둠
		

6. Protocol
	- IP 계층 위에 존재하는 **상위 프로토콜을 명시함**
![[Pasted image 20221222190029.png]]
	- 데이터 부분을 어떤 프로토콜(SCTP vs TCP vs UDDP)에 **전달**할 지 표시해둔 부분

7. Checksum
	-  IP패킷의 **헤더에 대한 오류 검사**를 위해 사용
	- 계산 방법
		> 최초에 checksum = 0으로 설정
		> 전체 헤더를 16비트 단위로 구분, 1의 보수 연산 수행 (보수 : 값을 0으로 만드는 수)
		> 결과 값을 보수로 만들어서 체크섬 필드에 저장
	- 예시 )
		- 송신 : 10, 5, -15를 보냄
		- 수신 : 들어온 값들을 연산했더니 0이 나오면 에러가 없다
	- 에러가 있다면? IP 패킷을 버린다
	- 송신자 주소 & 목적지 주소 명시(IP주소)

#### 단편화
- 프레임의 크기와 형태는 네트워크에 따라 다르다
- IP 패킷은 여러 네트워크를 경유, 다양한 데이터링크 프로토콜을 거침

- `단편화Fragmentation` : IP 패킷은 네트워크가 수용할 수 있는 크기로 분할됨
	- `MTU Maximum Transfer Unit` : 한꺼번에 보낼 수 있는 데이터의 크기
	- 패킷이 MTU를 넘으면 전송할 수 있는 크기인 MTU로 잘라야 함

- `플래그 Flags` 
![[Pasted image 20221222190809.png]]
- 3비트로 구성됨
	- 1번째 비트는 사용 안함
	- 2번째 비트는 단편화 금지(True면 Fragmentation 하지 말라는 뜻)
	- 3번째 피트는 Fragment(단편)이 더 있음을 의미함
		- `1 =  단편이 더 있다`
		- `0 = 이게 마지막 단편이다`

- `단편화 위치 값 Fragmentation Offset`
![[Pasted image 20221222191012.png]]
- 13비트로 구성, 단편이 합쳐질 때 해당 단편의 위치 값
- 위치 값은 1번째부터 시작하며 8바이트 단위로 표시됨
- 패킷이 순서대로 도착한다는 보장이 없기 때문에 사용함
	- IP 패킷은 커넥션리스이기 때문

> ex) 1500바이트 IP 패킷이 있다
> 500 바이트씩 3개로 나눈다
> 각각 `0~499`, `500~999`, `1000~1499`로 번호를 붙인다
> 시작번호를 offset에 넣는다
> 시작번호를 보면 어디에 들어가야 하는지 알 수 있으며
> 종결은 위의 `flag`로 확인하면 된다

#### 옵션
![[Pasted image 20221222191459.png]]
- 최대 40바이트까지 가능하며 실질적으론 4개 씀
1. `Record Route` : IP 패킷이 지나가면서 어떤 장치들을 지나가는지 IP 주소를 저장함
2. `Source Route` : 보낼 때 어떤 장치를 지나가라고 IP 주소를 넣어둠
3. `Strict Source Route` : **반드시** 지나야 할 장치 경로를 지정함 (전체 경로를 엄격하게 지정)
4. `Loose Soure Route` : 다른 곳들은 지나도 되고 안 지나도 되는데 **여기만은 꼭 지나가라고 명시**함 (경로의 일부만을 엄격하게 지정)
- `Timestamp` : 통신 장치를 지날 때마다 몇 초에 지나갔는지 명시
