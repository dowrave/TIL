## 정의 : Confiugrable Secondary Calculation

### 1. Calculation
- 일반적인 계산은 `+, -, *, /`
- Tableau는 `Row 레벨, 집계, LOD 레벨 등`에서 테이블 계산이 이뤄짐

### 2. Secondary
- 우리가 작업하는 계산은 `부차적인` 계산임

> 예를 들어서, 우리가 어떤 측정값을 드래그앤 드랍해서 바 차트로 띄웠다고 생각해보자
- 태블로는 `Viz QL`이라는 기술이 있어서, 우리가 하는 행동(`드래그앤 드랍, 더블클릭 등`)을 데이터 소스가 이해할 수 있는 쿼리로 바꿔준 뒤, 신호를 받아 차트에 띄워줌

#### `2nd Calculation`의 의미

1. **데이터 원본 소스와 무관**
	- 1번째 레벨에서의 계산은 데이터 원본 소스에 명령을 보내고 결과를 받아와서 그림을 그리는 것임
	- 태블로의 계산은 원본 소스와 무관함 
	- 여기서 발생하는 문제는, **테이블 계산이 어려워진다는 점**임


2. **테이블 계산의 작동 순위는 비교적 늦다**
	- 태블로의 필터, 계산, 명령 등에는 정해진 순서가 있음(`Order of Operations`)
	- 장점 ) 편함
	> ex) 질문 2개 : 북미 시장에서의 매출은? 그게 전체 매출에서 차지하는 비중은?
	> 테이블 계산이 없으면 2번째 질문에 대답하기 위해 복잡한 과정을 거쳐야 하는데, 태블로에선 2번의 클릭만으로 도달할 수 있음
	 - 발생할 수 있는 문제) **필터 등 앞순위에서 이뤄지는 작동에서 테이블 계산이 큰 영향**을 받음

### 3. Configurable
- 테이블 계산의 **범위**를 설정할 수 있다.
- **`테이블`은 계산의 범위**를 의미하며, **`테이블, 패널, 셀`을 포괄**한다.

## Quick Table Calculation
- 비즈니스 현장이나 일상에서 자주 쓰는 연산들을 Tableau에서 골라서 뽑아놓은 것
- `측정값 우클릭 - 퀵 테이블 계산`하면 태블로가 자동으로 쿼리를 만들어서 계산을 해줌

--- 
### 강사님이 올려두신 [자료](https://www.tableau.com/blog/understanding-how-tableau-calculation-types-work-together) 내용

- 계산을 크게 4개로 나눴음

#### 1. Row-Level
- 각 행(=데이터 각각)에서 이뤄지는 계산
```tableau
[Quantity] * [Price]
```
- 이 결과로 나오는 새로운 특성은 **각 행에서 계산된 값을 새로운 특성으로 만들게 됨**

#### 2. Aggregation Calculation
- 정확한 LOD에서 데이터를 시각화하기 위해 태블로는 데이터를 집계함
- LOD는 현재 태블로 캔버스에 올라간만큼의 특성 수로 결정됨
	- 예를 들어 `달`을 올렸다면 태블로가 집계하는 수준은 `달`로 결정된다는 뜻임
```tableau
SUM([Revenue])
```


#### 3. Table Calculation
- **테이블 계산은 집계 이후에 계산됨**
- 이미 주어진 집계에서 더 집계하고 싶을 때 테이블 계산을 쓰거나`Running_sum`, 집계된 값들을 비교하고 싶을 때 사용함
```tableau
RUNNING_SUM(SUM([Revenue]))
```
> 1. 레코드 레벨인 `[Revenue]` 에서 계산이 이뤄짐
> 2. `SUM()`으로 집계됨
> 3. 테이블 계산이 이뤄짐 `RUNNING_SUM`
- 예를 들면 `2.`에서 각 `달`에 대한 집계가 이뤄졌다면, 집계값을 이용한 `RUNNING_SUM`은 주어진 기간에 대한 누적합을 나타냄

#### 4. LOD Expression
- 현재 조건에서의 LOD와 다른 조건에서의 LOD 값을 이용하고 싶을 떄가 있을 것임
- ![[Pasted image 20230426171741.png]]
- **LOD Calculation**만 다른 과정을 타고 있는 게 보일 거임. 그럼에도 이러한 데이터가 필요할 때가 있다는 것임
