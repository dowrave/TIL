# 참고
- **옵시디언으로 봐야 제대로 보인다.**
	- **옵시디언으로 작성된 만큼 깃허브의 마크다운에서는 지원하지 않는 기능들이 있을 수 있다.** `[[]]`, 이미지 첨부 방식 등이 대표적.
- `[[]]` 링크는 `유니티/보관함`이나 `작업 일지/직접 작성/일지`에 대부분 있다.
---
# 작업 내용 : 짭명방

## 남은 작업
- **이펙트 공부 후 수정 중** 
	- **VFX 그래프를 썼던 것도 모두 파티클 시스템으로 변환**
- 1-3 밸런싱, 보스 추가
- 테스트 및 수정

### 보고 참고할 내용
- [[오퍼레이터들 스탯 정리]]
- [[적 스탯 정리]]
- [[프로크리에이트로 텍스쳐 작업 시 유의할 점]]
## 사용 툴
- `Unity`
- UI 이미지 제작 : `Procreate`
- `VFX` 제작 사용 툴(강의 보면서 따라함)
	- `Krita`
	- `Blender`

## 하고 싶은데 못할 듯
- 캐릭터 스프라이트 
	- 현재 Capsule로 Operator나 Enemy 등을 구현한 상태
	- 이걸 투명한 Quad로 바꾸고 그 위에 2D 스프라이트들을 구현하는 방식이 명방에서 쓰고 있는 방식으로 보임
	- 직접 하려면 배워서 할 수는 있겠지만 시간이 문제겠다. 
- 도전과제 구현
- 인게임 / 다른 패널에서 스킬 범위 보여주기 
	- 일관성 때문에 다른 곳에서도 구현을 해보고는 싶은데, 일단 보류.
	- 현재는 정예화 패널에서만 스킬 범위를 볼 수 있음. 아니면 인게임에서 실행시켜도.




---
# 작업 일지


## 짭명방 예정

### 작업 중

>[!todo]
>- 보스 구현하기
>	- 보스 이펙트 만들기
>- 기존 이펙트 수정하기

>[!todo]
>남은 이펙트 정리해보기
>1. 스킬
>	- 슬래쉬 스킬
>	- 코스트...는 냅둘까?
>2. 보스
>	- 최종적으로 보스까지 구현하면 완료인 듯?

# 250828 - 짭명방

## SlashSkill 완성하기

### 이펙트
- 결국 버전 1을 사용함.

![[Skill_Slash_v1_Final.gif]]

구름이 모이는 효과, 1번째 공격에도 작은 Beam 추가, 각 슬래쉬에 서브 에미터로 파티클 추가 등등의 작업을 추가로 거쳤다.

일단은 이 정도로 하고 실제 효과 구현함.

### 효과
- 기존 `SlashSkill`을 보면...
```cs
protected override void PlaySkillEffect(Operator op)
{
	if (slashEffectPrefab == null) return;

	Vector3 spawnPosition = op.transform.position + op.transform.forward * 0.5f;
	Quaternion spawnRotation = Quaternion.LookRotation(op.FacingDirection);
	GameObject effectObj = Instantiate(slashEffectPrefab, spawnPosition, spawnRotation);

	SlashSkillController controller = effectObj.GetComponent<SlashSkillController>();
	if (controller != null)
	{
		controller.Initialize(op, op.FacingDirection, effectSpeed, effectLifetime, damageMultiplier, skillRangeOffset, op.OperatorData.HitEffectPrefab, op.HitEffectTag);
	}
}
```
> `SlashSkillController`라는 컴포넌트를 가진 이펙트 오브젝트를 하나 생성했다. 
> 이 컨트롤러는 목표 타일 위에 있는 적들에 대해 파티클과 적이 충돌했을 때 대미지를 입히는 방식으로 구현되었다. 1개의 검날 파티클이 앞으로 나아가는 방식으로 구현됐기 때문이다.

- 그런데 지금의 구현은 4개의 타일에 콜라이더를 놓고, 거기에 적이 있다면 **이펙트의 타이밍에 맞춰서 대미지를 넣는 방식으로 구현**하면 된다. 어떻게 보면 `ArcaneField`와 비슷한 면이 있겠음. 

#### 또 컴퓨터가 말썽이다
- 잘 돌아가다가 갑자기 멈추더니 화면들 다 나감. 컴퓨터는 계속 켜진 상태. 반복적으로 발생하는 이슈라서 결국 다시 본체를 열었다.
- 그래픽 카드를 뺐다가 다시 꼈다. 
	- 램 이슈면 차라리 나은데 그래픽 카드는 나사까지 돌려야 하니까 배로 귀찮다. 슬롯에 끼워도 나사 고정 때문에 위치가 조정되는데, 그래서 나사를 조이기 전에 잘 돌아가다가 나사를 조인 후에 또 돌아가지 않는 등의 이슈도 있었다.
	- 한 번에 해결되지 않아서 여러번 뺐다가 꼈다.

- 만약 **컴퓨터를 바꾼다면 9060xt 16gb 정도를 보고 있는데..** 지금 지출하기엔 좀 큰 돈이다.
	- 플레이엑스포 때 네오위즈 부스에서 내 바로 앞에서 다른 사람이 가져간 9070xt가 아른거린다..

#### 아무튼 다시 돌아옴
- 위에서는 "별도의 콜라이더를 만들고 거기에 충돌한 적들에게 대미지를 넣는다"라고 썼다.
- 그런데 공격 범위 타일이 정해져 있다면, **스킬 자체가 콜라이더를 갖는 경우 범위 밖의 적에게도 대미지를 주는 일이 발생할 수 있음.** 의도치 않게 대미지가 들어갈 수 있기 때문에 설명과는 조금 다른 효과를 가질 수 있겠다는 생각이 든다. 
- 그래서 타일 위에 있는 적들을 가져오는 정도로만 구현하면 충분할 것 같음. 별도의 콜라이더를 넣지 않고. 

#### 스크립트 구현과 디테일 설정
- 기존 `SlashSkill`은 `Legacy`로 빼뒀다. 이름 앞 뒤에 Legacy를 붙여서 남겨놨음.
- 이펙트 안에 실제 스킬 효과도 함께 들어갔다.
- 설계도 안에 스킬의 효과를 넣는 구현도 있지만, 설계도는 `MonoBehaviour`를 상속받지 않은 요소이므로 지금처럼 타이밍에 맞춰 대미지를 넣는 코루틴 구현이 불가능하다. 
- 그래서 설계도인 `SlashSkill.cs`는 공격 범위까지만 설정해서 `Controller`에 넘겨주고, `Controller`는 이를 받아 이펙트와 실제 공격 판정 기능을 수행한다.

- 전체적인 구현은 마쳤음.

- **스킬 이펙트는 잘 나타나지만 판정이 제대로 들어가지 않는 이슈** 수정.
	- 수정 완료 : `SlashSkill`에 공격 범위를 안 넣었다 엌ㅋㅋ

- **스킬을 시전하는 동안에는 평타 공격을 멈추는 구현도 추가**해야 할 듯. 
	- 기존의 `ActionRestriction`이 있었다. 이걸 스킬 컨트롤러에서 스킬이 시작할 때 오퍼레이터에게 걸고, 스킬이 끝날 때 해제하는 방식의 구현을 시도해봤음.
		- 기능적으로는 문제가 없지만, **구조상 어떤 제약을 걸고 해제하는 로직은 오퍼레이터 자체에서 이뤄져야 한다**고 한다.
	- ~~그러면 스킬에 공격을 중단해야 하는지를 표시해두고, 오퍼레이터가 스킬을 사용할 때 해당 부분을 체크해서 공격을 중단해야 하는 경우 자신에게 제약을 걸고 스킬이 끝날 때 푸는 방식으로 구현해야겠음.~~
	- 기존 스킬 중 스킬 동작 중에는 공격하지 않는 스킬이 있었다. `ArcaneField`인데, `CannotAttackBuff`를 `Operator`에게 추가해서 공격을 막는 방식이었음.
		- 다만 이 방식은 "여러 오퍼레이터가 같은 스킬을 쓸 때" 문제가 발생할 수 있다고 한다. **별도의 인스턴스를 갖는 개념이 아니기 때문에, `ScriptableObject`에서 상태를 갖는 건 권장되는 방식은 아니라는 듯.** 
		- 즉 다른 캐릭터의 스킬 동작에 의해 기존 캐릭터의 스킬 동작이 덮어씌워질 수 있다는 말임
	- 근데 그러면 어떻게 해제해야 할까?
		- **`UnitEntity`에서 스킬 단위로 버프를 해제할 수 있게 만듦.** 스킬이 끝나는 타이밍에 자신을 보내서 자신과 관련된 버프들을 해제하게 만듦.
		- **각 버프는 생성될 떄 어떤 스킬에 의해 생성되었는지 설정을 추가함**
			- **생성자를 Buff에 구현하지는 않았음.** 자식 생성자에서 대부분의 요소를 일일이 다시 쓰는데 이게 코드가 더러워보여서..

- 기능 구현은 거의 끝남. 저 스킬 사용 중 공격을 막는 로직 구현에 시간을 좀 썼다.
	1. 판정은 0초, 0.3초 0.45초, 0.6초에 발생한다. 그 동안 가드는 공격하지 않음.
	2. 배율은 1타는 공격력의 2배, 3번에 걸쳐 들어가는 대미지들은 각각 1.25배가 들어간다. 

![[Skill_Slash_v1_RealFinal.gif]]
- 이펙트가 지나간 다음에도 피격 이펙트가 나오는게 살짝 어색한 감이 있어서, 판정 간격을 줄여보고 있다. 위 gif는 간격이 0.15초였음.
- 0.1초가 적당해보여서 그렇게 설정함. 오늘은 여기까지! 내일은 아이콘 수정하고 드디어 보스 구현을 시작할 수 있겠다. 더 수정할 게 있나? 모르겟음.

- 비교) 기존 구현
![[Skill_Slash_Legacy.gif]]



### 스킬 아이콘
![[Skill_Slash_128.png]]
- 기존 스킬 아이콘
- 이걸 넣어본 다음에 나노바나나를 써봤는데 말한 대로 반영되지 않는다. 설명을 잘못한 탓일까 ㅋㅋ 어쨌든 스킬의 형태가 달라졌으니 아이콘도 다시 그려야 함


# 250827 - 짭명방

## SlashSkill 이펙트 구현(계속)
- 좌락 스킨 버전 3스킬도 참고해봤다.
- 반쪽짜리 화살표 이펙트가 먼 곳에서 날아와서 꽂히고 마지막에 두루마리가 펼쳐지는 모양임
	- 이 화살표 이펙트들은 0.2초 정도 유지된다.
	- 실제 시간으로 보면 정말 순식간에 지나가니까 보이지 않는 요소인데, 저런 짧은 순간에도 "어디선가 이펙트가 날아온다" 정도의 인식을 할 수 있었음.
- 그러면 지금의 검날 이펙트의 경우도 단순히 나타났다가 사라지는 게 아니라 `Guard`로부터 뻗어나오는 방식으로 연출할 수 있겠다.

### 일단 결과물
- 버전1 : 직진 후 검기
![[Skill_Slash_v1 1.gif]]

- 버전2 : 검기 후 직진
![[Skill_Slash_v2.gif]]

> 개인적으론 버전2가 마음에 드는데, 뭔가를 모으는 이펙트와 검기가 같이 나가는 건 이상하면서 번잡하다는 생각도 든다. 
> 스킬은 누르는 즉시 나가야 하는 걸 생각하면 버전 1이 나을지도 모르겠다. 원본 게임에서도 스킬을 누른 다음에 딜레이가 있는 경우는 거의 없는 걸로 기억함. 그나마 마르실 정도?

### 갑자기 컴퓨터가 사망했다.
다행히 소생시켰다.
- 램 탈착도 해보고 글카 탈착도 해보고 메인보드 배터리도 다시 바꾸는 등 
![[Pasted image 20250827234616.jpg]]

...이기 때문에 일은 마무리. **이펙트랑 스킬 효과 모두 다시 생각해봐야 할 듯.**
이럴 때마다 컴퓨터를 바꿔야 하나 싶지만 100만원 정도 되는 거금을 쓸 걸 생각하면 또 있는 거나 잘 쓰자~로 회귀.

# 이전 일지단

- 깃허브 링크는 향후 프로젝트 폴더 링크 이동에 따라 손상될 수 있음
- 이 경우 대부분 `4.Archive` 폴더에서 볼 수 있다.
## 짭명방
- [짭명방 프로젝트 일지 깃허브 링크](https://github.com/dowrave/TIL/tree/main/Obsidian/1.%20Projects%2C%20Ongoing/%EC%9C%A0%EB%8B%88%ED%8B%B0%20-%20%EC%9E%91%EC%9D%80%20%EB%AA%85%EB%B0%A9%20%EA%B5%AC%ED%98%84%ED%95%98%EA%B8%B0/%EC%9E%91%EC%97%85%20%EC%9D%BC%EC%A7%80/%EC%A7%81%EC%A0%91%20%EC%9E%91%EC%84%B1)
- 옵시디언 링크
	- [[24년 7월]]
	- [[24년 8월]]
	- [[24년 9월]]
	- [[24년 10월]]
	- [[24년 11월]]
	- [[24년 12월]]
	- [[25년 1월]]
	- [[25년 2월]]
	- [[25년 3월]]
	- [[1. Projects, Ongoing/유니티 - 작은 명방 구현하기/작업 일지/직접 작성/25년 4월|25년 4월]]
	- [[1. Projects, Ongoing/유니티 - 작은 명방 구현하기/작업 일지/직접 작성/25년 5월|25년 5월]]
	- [[짭명방_25년 6월]]
	- [[짭명방_25년 7월]]
	- [[짭명방_25년 8월]]
## 블로그
- [React + Django 프로젝트 일지 월별 작업 기록 깃허브 링크](https://github.com/dowrave/TIL/tree/main/Obsidian/1.%20Projects%2C%20Ongoing/%ED%8F%AC%ED%8F%B4%20%EA%B2%B8%20%EB%B8%94%EB%A1%9C%EA%B7%B8%20%EB%A7%8C%EB%93%A4%EA%B8%B0/%EC%9B%94%EB%B3%84%20%EC%9E%91%EC%97%85%20%EA%B8%B0%EB%A1%9D)
- 옵시디언 링크
	- [[23년 12월]]
	- [[24년 1월]]
	- [[24년 2월]]
	- [[24년 3월]]
	- [[24년 4월]]
	- [[24년 5월]]
	- [[1. Projects, Ongoing/블로그 만들기/월별 작업 기록/25년 4월|25년 4월]]
	- [[1. Projects, Ongoing/블로그 만들기/월별 작업 기록/25년 5월|25년 5월]]
	- [[블로그_25년 6월|블로그_25년 6월]]
	- [[블로그_25년 7월]]