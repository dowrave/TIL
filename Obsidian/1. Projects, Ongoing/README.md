# 참고
- **옵시디언으로 봐야 제대로 보인다.**
	- **옵시디언으로 작성된 만큼 깃허브의 마크다운에서는 지원하지 않는 기능들이 있을 수 있다.** `[[]]`, 이미지 첨부 방식 등이 대표적.
- `[[]]` 링크는 `유니티/보관함`이나 `작업 일지/직접 작성/일지`에 대부분 있다.
---
# 작업 내용 : 짭명방

## 남은 작업
- **이펙트 공부 후 수정 중** 
	- **VFX 그래프를 썼던 것도 모두 파티클 시스템으로 변환**
- 1-3 밸런싱, 보스 추가
- 테스트 및 수정

### 보고 참고할 내용
- [[오퍼레이터들 스탯 정리]]
- [[적 스탯 정리]]
- [[프로크리에이트로 텍스쳐 작업 시 유의할 점]]
## 사용 툴
- `Unity`
- UI 이미지 제작 : `Procreate`
- `VFX` 제작 사용 툴(강의 보면서 따라함)
	- `Krita`
	- `Blender`

## 하고 싶은데 못할 듯
- 캐릭터 스프라이트 
	- 현재 Capsule로 Operator나 Enemy 등을 구현한 상태
	- 이걸 투명한 Quad로 바꾸고 그 위에 2D 스프라이트들을 구현하는 방식이 명방에서 쓰고 있는 방식으로 보임
	- 직접 하려면 배워서 할 수는 있겠지만 시간이 문제겠다. 
- 도전과제 구현
- 인게임 / 다른 패널에서 스킬 범위 보여주기 
	- 일관성 때문에 다른 곳에서도 구현을 해보고는 싶은데, 일단 보류.
	- 현재는 정예화 패널에서만 스킬 범위를 볼 수 있음. 아니면 인게임에서 실행시켜도.




---
# 작업 일지


## 짭명방 예정

### 작업 중

>[!todo]
>- 보스 이펙트 만들기
>- 기존 이펙트 수정하기

>[!todo]
>남은 이펙트 정리해보기
>1. 스킬
>	- 범위 관련 이펙트들 : 기존에도 파티클 시스템이었을 거라 만질 게 많진 않고 바운더리에서 올라오는 이펙트들의 존재감이 너무 강하기 때문에 이것만 줄여주면 될 듯.
>	- 메테오 스킬
>	- 슬래쉬 스킬
>	- 코스트...는 냅둘까?
>2. 보스
>	- 최종적으로 보스까지 구현하면 완료인 듯?

### 발견한 이슈

### 예정
- `1-3` 스테이지 구현 완료
	- 보스 구현

# 250821 - 짭명방

>[!done]
>1. 셰이더 공부 & 수정
>2. `Wall` 셰이더 구현 및 적용
>3. `MeteorSkill` - 떨어지는 투사체 구현
>	- 타격이랑 범위 이펙트는 내일!
## 셰이더 탐구 : AddScroll과 Trail
- 어제 벽 효과 관련, `AddScroll` 쉐이더랑 `Trail` 쉐이더의 차이점을 알고 싶어졌다. 
	- 원하는 효과는 `Trail`인데, `AddScroll`도 그게 가능하지 않을까 싶어서 테스트해봤는데 그런 느낌이 나지 않았기 때문이다.

### `Trail` 쉐이더
![[Pasted image 20250821124715.png]]
> `Add`로 들어오는 `A`는 `Simple Noise`에 스크롤을 더한 값.

- 분석
	- `One Minus`는 왼쪽이 1, 오른쪽이 0인 행렬
	- `Add`로 노이즈 값들이 더해짐
	- 여기서 왼쪽이 0, 오른쪽이 1인 행렬을 뺌
	- 최종적으로 왼쪽은 1보다 크거나 1에 가까운 값들이 주로 오고 오른쪽은 0에 가까운 값들이 주로 오게 됨. 노이즈에 따라 값 편차는 있겠지만 전체적으로 이런 경향을 따르는 편.

### `AddScroll` 쉐이더
- 원리는 위와 크게 다르지 않다.
- 차이점
	1. `Gradient Noise`를 썼다는 것
	2. `UV`의 R값들을 이용한 `Color` 계산이 들어가지 않았다는 것
- 그래서 상대적으로 텍스쳐를 탄다. 


### 결론
- `AddScroll`로도 구현이 가능하다. 단, 텍스쳐를 탄다.
- `Trail`은 `U`값을 기반으로 한 밝기 설정이 추가로 들어가 있다. 그래서 어떤 텍스쳐를 받아도 방향 설정만 잘 해두면 일렁이는 효과를 낼 수 있다.
- **알파 클립 기능은 이런 경우에는 이용하지 않는 편이 더 좋아보인다.** 물론 케바케지만, 전체적인 알파 값들이 그렇게 밝지 않기 때문에 살짝만 건드려도 이펙트가 어색해보임.
- 불이 일렁이는 듯한 효과는 `Simple Noise`가 일단은 더 그런 느낌으로 보인다. 

![[Pasted image 20250821134243.png]]
> 왼쪽이 `Trail` 쉐이더를 이용한 `Quad`, 오른쪽이 `AddScroll` 쉐이더를 이용한 `Quad`이다.

## 셰이더 수정
- `Trail, AddScroll`에 노이즈에 `Power` 값을 곱하는 프로퍼티 추가
- ~~`AddScroll`의 경우 `Simple Noise`와 `Gradient Noise` 중 선택 가능하게 구현~~
	- `Simple Noise`를 선택하는 경우의 효과가 미미함. 추가적인 세팅이 들어가야 할 것으로 보여서 일단 `Gradient Noise`만 사용 가능하도록 유지함.

### Gradient Noise에 마젠타색이 나타나는 현상
- `Gradient Noise`에 `Power`를 연결했을 때 발생하는 현상.
![[Pasted image 20250821134001.png]]

- 이유)
	- **`Gradient Noise`는 -1 ~ 1 사이의 값을 갖는다.** 
	- 그래서 음수의 거듭제곱을 시도할 때, 예를 들어 `(-2)^5/2` 같은 연산도 발생할 수 있다. 음수의 제곱근은 실수 범위에서 존재하지 않기 때문에 `NaN`을 반환하게 된다.

- 해결)
	- `Gradient Noise`에 `Power`를 사용하려는 경우에는 `Remap`이나 `Saturate(0, 1 사이로 강제 제한)` 등을 연결해서 사용해야 한다.

## Wall 셰이더 만들기
- 텍스쳐의 좌우 스크롤 + 노이즈의 상하 스크롤로 텍스쳐에서 파티클들이 시작해서 서서히 위로 올라가면서 사라지는 듯한 효과를 주려고 함
- 생각보다 쉽진 않다. **텍스쳐의 경계와 노이즈의 경계가 부드럽게 녹아드는 느낌이 잘 안 나기 때문**임. `Lerp`라든가 `SmoothStep`이라든가 다 써보긴 했는데 잘 모르겠다. 스읍..
![[Pasted image 20250821152842.png]]
> 일단은 이런 느낌으로 마무리. 

> 인게임에서 보면 이런 느낌으로 들어갔다. 생각보다 괜찮다. 
> - 연기가 조금더 올라갔으면 하는 생각이 있다. 텍스쳐 모양만 어떻게 잡으면 구현이 될지도 모르겠다.
![[Area_CasterSkill_v1 1.gif]]

## MeteorSkill - 떨어지는 물체 구현
- 특사스의 3스킬이 모티브이긴 한데, Mesh로 구현해야 할까? Billboard로 구현해야 할까?
- `Mesh`로 검 모양을 만들고 모서리마다 윤곽선을 그리는 방식을 시도해봤는데, UV Map 만드는 부분에서 막혔다. **어디를 잘라야 전개도가 잘 그려지는지 감이 안 잡힘.**
- 그래서 텍스쳐만 만들고 빌보드 파티클을 이용하는 방식으로 구현한다.

![[Area_Meteor_v1.gif]]
> `MeteorSkill`은 타겟의 좌표를 정확히 추적하면서 y좌표만 +에서 -로 내리꽂는 방식인데, 이상하게 게임 화면에서는 살짝 뒷쪽으로 떨어지는 듯한 인상이 있다. 
> 근데 뚜렷한 해결법은 모르겠음.

**`Hit` 이펙트랑 `Area` 이펙트는 내일 해야겠다. 오늘 `Hit` 이펙트에 사용할 텍스쳐를 만들어봤는데 잘 모르겠음..**

## 기타 수정
- `Projectile`의 콜라이더 크기 `0.1`로 통일
	- 기존) `0.25` : 오브젝트에 부딪히기 전에 사라지는 것처럼 보여서.

- `MeteorSkill` 스크립트 수정
	- 메테오를 소환하는 로직 수정
		- 기존에는 2개를 만들어 놓은 다음 딜레이 후 1개씩 떨어뜨렸다면
		- 1개를 만듦 -> 딜레이 -> 다시 1개를 만드는 방식으로 수정함
	- `MeteorSkill` 자체는 `ScriptableObject`의 상속이므로 `Coroutine`의 실행이 불가능하다. `Operator`에 실행을 요청하는 방식으로 넣으면 됨. 이 때 `IEnumerator` 메서드는 `public`일 필요는 없는 듯?
```cs
	if (enemyIdSet.Add(enemy.GetInstanceID()))
	{
		// 코루틴은 Monobehaviour을 받는 객체에서만 실행 가능
		// 이 스크립트는 ScriptableObject의 상속임. 실행 가능한 객체에게 요청한다.
		op.StartCoroutine(CreateMeteorSequence(op, enemy));
	}
```



# 이전 일지

- 깃허브 링크는 향후 프로젝트 폴더 링크 이동에 따라 손상될 수 있음
- 이 경우 대부분 `4.Archive` 폴더에서 볼 수 있다.
## 짭명방
- [짭명방 프로젝트 일지 깃허브 링크](https://github.com/dowrave/TIL/tree/main/Obsidian/1.%20Projects%2C%20Ongoing/%EC%9C%A0%EB%8B%88%ED%8B%B0%20-%20%EC%9E%91%EC%9D%80%20%EB%AA%85%EB%B0%A9%20%EA%B5%AC%ED%98%84%ED%95%98%EA%B8%B0/%EC%9E%91%EC%97%85%20%EC%9D%BC%EC%A7%80/%EC%A7%81%EC%A0%91%20%EC%9E%91%EC%84%B1)
- 옵시디언 링크
	- [[24년 7월]]
	- [[24년 8월]]
	- [[24년 9월]]
	- [[24년 10월]]
	- [[24년 11월]]
	- [[24년 12월]]
	- [[25년 1월]]
	- [[25년 2월]]
	- [[25년 3월]]
	- [[1. Projects, Ongoing/유니티 - 작은 명방 구현하기/작업 일지/직접 작성/25년 4월|25년 4월]]
	- [[1. Projects, Ongoing/유니티 - 작은 명방 구현하기/작업 일지/직접 작성/25년 5월|25년 5월]]
	- [[짭명방_25년 6월]]
	- [[짭명방_25년 7월]]
	- [[짭명방_25년 8월]]
## 블로그
- [React + Django 프로젝트 일지 월별 작업 기록 깃허브 링크](https://github.com/dowrave/TIL/tree/main/Obsidian/1.%20Projects%2C%20Ongoing/%ED%8F%AC%ED%8F%B4%20%EA%B2%B8%20%EB%B8%94%EB%A1%9C%EA%B7%B8%20%EB%A7%8C%EB%93%A4%EA%B8%B0/%EC%9B%94%EB%B3%84%20%EC%9E%91%EC%97%85%20%EA%B8%B0%EB%A1%9D)
- 옵시디언 링크
	- [[23년 12월]]
	- [[24년 1월]]
	- [[24년 2월]]
	- [[24년 3월]]
	- [[24년 4월]]
	- [[24년 5월]]
	- [[1. Projects, Ongoing/블로그 만들기/월별 작업 기록/25년 4월|25년 4월]]
	- [[1. Projects, Ongoing/블로그 만들기/월별 작업 기록/25년 5월|25년 5월]]
	- [[블로그_25년 6월|블로그_25년 6월]]
	- [[블로그_25년 7월]]