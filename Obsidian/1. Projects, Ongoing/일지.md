- 240808~ : **Claude AI를 이용한 뒤에 대화가 너무 길어지거나 다른 내용으로 바꾸려고 하면 마지막에 지금까지 한 내용을 정리해달라는 식으로 넣겠음** 
	- 그날 뭐 배웠는지를 까먹거나, 정리하고 싶었는데 정리하지 못하고 지나가는 경우가 있어서 이런 식으로 LLM을 사용해본다.

# 앞으로 구현할 거 정리
- 경로
	- 지금 하는 a* 알고리즘이 아니라 개발자가 직접 설정할 수 있어야 함
	- 즉 Spawner는 적의 종류, 적이 생성되는 시간을 갖고 있어야 함
		- 여기서 생성되는 Enemy는 자신의 경로를 갖고 있어야 함 
		- 상대 경로로 들어갈지 그리드 좌표로 일일이 넣을지는 그 때 가서 생각해보자.
- OperatorManager에서의 배치 로직
	- 어떤 오퍼레이터를 클릭했다면 시간이 느려져야 함
	- 이 `시간이 느려진다`는 어떻게 구현할지 아직은 모르겠다.
- **라이프 포인트가 0이 될 때 게임이 끝나는 로직 구현 필요**
- 다양한 오퍼레이터 구현
- 스킬 구현
- 인게임 : 오퍼레이터 UI 추가 구현 아래 요소들 구현 필요
	- 시간이 느려짐(극도로 느려짐)
	- 오퍼레이터 관련 정보
	- 스킬 버튼
	- 퇴각 버튼
# 8월

## 240813

### 유사 명방

- [[AI) 240813 정리]]

- 클릭 시 UI 구현
	- 오퍼레이터 주위?에 퇴각 버튼, 스킬 사용 버튼이 나타나야 함
	- 화면의 왼쪽에 오퍼레이터의 정보가 나타나야 함
> 그러면 Canvas 를 그릴 때 `World Space vs Screen Space - Overlay` 둘 중에 뭘 써야 함?

- UI 요소를 프리팹으로 할당할 때 궁금한 점
	- 프리팹으로 실험하는 경우, 게임을 실행하지 않은 상태에서는 필드에 할당되지 않은 상태니까 프리팹을 테스트해볼 수 없는데, 그러면 자식 오브젝트로 둬서 실험하다가 테스트가 완료되면 프리팹으로 빼는 방식인가?
	- **특정 오브젝트에 완전히 종속되는 개념이 아니라면, 웬만하면 따로 프리팹으로 빼두는 편이 훨씬 낫다.** 자식 오브젝트로 놓는 방법에 비해 테스트가 조금 더 까다로워지는 면이 있지만.

#### Operator UI 관련 스크립트 뜯어고치기
- 기존엔 자식 오브젝트를 기준으로 했는데, 프리팹을 불러오는 것으로 수정하겠음
	- 갑자기 배치 로직이 이상하게 작동함... 왜 다른 부분을 수정했는데 여기가 안되지 ㅡㅡ
	- 프리팹 자체가 비활성화되어 있으면 불러와도 비활성화네 ㅋㅋㅋㅋㅋㅋ 어이가 없다
	- 사실 뜯어고칠 내용이 많지는 않다. 
		- 자식 오브젝트 제거
		- 필드 SerilaizedField화

#### 클릭시 UI 구현
1. `OnMouseDown` 메서드 구현 - UI에 가려져서 인지 Debug.Log 도 나타나지 않음
	- 화면에 `Main Canvas`가 있는 상황이라면 마우스버튼다운이 작동하지 않는 것 같다.
2. 레이캐스트 사용
	- 빈 화면 클릭은 레이캐스트 인식이 잘 되는데, 맵이나 오퍼레이터 등 구현된 것들을 클릭하면 레이캐스트에 아무런 반응이 없다. 내일 이거부터 수정하자. 뽈 차러 가야 한다.



## 240812
### 유사 명방
- [[AI) 240812 정리]]
- 저지 로직 수정
	- 여태까지는 저지 = 1로 테스트를 했는데, 저지 = 3을 하니까 몹이 6마리가 나오는데 전부 저지해버리는 상황이 생겼다. `Enemy`에서 같은 타일을 밟은 오퍼레이터를 체크하고, 그 오퍼레이터가 저지 가능한 경우에만 저지하도록 수정.
- 재배치 쿨타임 중 클릭이 되는 현상 수정
- 게임 오버 구현
	- [[Unity - 시간의 흐름]]
	- UI도 구현 완
	- 게임 승리 때의 애니메이션은 나중에 구현하기로 한다. 일단 비활성화된 캔버스가 나타나도록 함.
	- UI를 구현하는 과정에서 `Main Canvas`에 `UI Manager` 스크립트를 부여했다. 이 스크립트는 **개별 유닛의 UI를 담당하지는 않음**에 유의!

- Operator : 적을 처치했을 때 다른 적을 찾는 로직 : 자연스러운 것 같기도 하고, 아닌 것 같기도 하고..
## 240809

### 유사 명방
- 현재까지는 코스트만 만족하면 중복 배치가 가능한 상황임. 아래 것들 구현부터 시작.
	* 오퍼레이터 중복 배치 불가 : 오퍼레이터가 배치되었다면 BottomPanelOperatorBox에서 해당 Box가 사라짐
	* 이미 배치된 오퍼레이터가 사망(오퍼레이터의 체력이 0이 된 상황)하거나 퇴각(유저가 의도적으로 퇴각 버튼을 누름, 아직 구현하지 않음.)하는 경우, 다시 Box에 나타나지만 배치가 불가능하며, Box의 중앙에 재배치 쿨타임이 표시됨
	* [[Unity - Transform.Find()]]
	* 추가적인 시각화(시계 방향으로 어두운게 밝아진다든가?)가 필요할 것 같지만, 기본적인 로직 자체는 구현 완료.

- 화면 상단에 남은 적의 숫자와 라이프 포인트 구현하기
	- `StageManager`에서 관리.
	- 적의 총 숫자 : 맵에 존재하는 `EnemySpawner`들의 길이를 모두 합치면 될 듯
		- `현재 숫자 / 총 숫자`로 나타내며, `현재 숫자`는 적이 죽을 때마다 1씩 올라간다. `Enemy.Die()`랑 연결하면 될 것 같다.
		- 최종적으로 `현재 숫자 = 총 숫자`가 되면 게임이 승리로 끝난다.
	- 라이프 포인트 : `Enemy.ReachDestination()`이 있다. 이 메서드가 발동할 때마다 전체 라이프 포인트에서 1씩 깎이며, 최종적으로 라이프 포인트가 0이 되면 게임오버당한다.


## 240808

### 유사 명방
- [[AI) 240808 정리]] 
- 배치 코스트 및 UI 구현
	- `StageManager`에서 배치 코스트를 관리. 
	- 시각화를 위해 `MainCanvas`의 `BottomPanel` 바로 위의 오른쪽 끝에 배치 코스트 관련 패널이 오도록 구현.
	- UI 크기를 수정하는 상황이 있어서 이를 스크립트로 자동으로 맞춰줄까 했는데 그냥 인스펙터 상에서 눈으로 보고 테스트하겠음. 원하는 구현이 안 나온다. 
		- `RectTransform.rect`는 읽기만 가능하고 수정은 불가능함(get 메서드만 있음)
- 배치 가능한 타이밍 조절
	- 현재 전역 배치코스트가 오퍼레이터의 배치 코스트보다 낮다면, 해당 UI는 흐릿? 어둡?게 표현하고 아예 배치 시작을 불가능하게 변경
	- 필드를 쓰다가 프로퍼티를 쓰는 걸로 변경했다. 프로퍼티의 세터 함수에 이벤트를 넣어서 코스트가 변할 때마다 이벤트가 발생시키도록 한다. 
		- 특히 프로퍼티랑 필드는 나올 때마다 계속 헷갈리고 있으니 잘 기억해두자.
- [[Unity - 필드와 프로퍼티]]


## 240807

### 유사 명방
- 오퍼레이터의 색깔 정보가 하단 패널의 박스들에 반영되도록 함. 만약 Sprite가 있으면 해당 스프라이트를 넣는다.
- 박스를 클릭해도 클릭 인식하지 못하는 문제가 있었음 -> `IPointerClickHandler` 상속받는 거를 넣지 않아서 그랬다.
- (진행 중)UI 클릭과 배치 로직을 잇는 중 - Box에서 클릭해서 변경된 변수가 바로 다음 프레임에서 초기화되는 문제가 있다. 그래서 `오퍼레이터 클릭 -> 타일들 하이라이트되면서 오퍼레이터 미리보기` 가 제대로 되지 않고 있음. 
	- 이를 관리하는 변수가 클릭한 순간만 true가 되고 나머지는 false로 나타남. 클릭하는 중에만 true가 아니라 클릭하면 변수가 true로 바뀐다이고 이게 다음 프레임에도 유지돼야 하는데 이상하게 초기화되고 있다.
	- `ResetPlacement`가 발동하는 조건을 타고 있었다... 기존에는 선택하는 방식이 아니라 이미 선택된 상태를 가정하고 구현해놨었는데, UI 및 클릭하는 로직을 추가하는 과정에서 뭐가 꼬였던 듯. 

## 240806

### 유사 명방
- `OperatorManager` : 여러 Operator를 배정하고, 해당 Operator 클릭 시 Operator 배치 로직을 작동하도록 함
- UI 구현 중 - 일단 화면 하단에 Panel이랑 각 오퍼레이터 박스를 매치시켯음
- Operator들도 이제 OperatorData로 관리됨. 기존 프리팹은 OperatorData의 Prefab 필드에 들어간다.
## 240805

### 유사 명방
- `Background와 Fill Area 간의 불일치 이슈` 해결 - 의외로 `Fill Area` 와의 설정을 일치시키는 게 아니라 `Fill`과의 설정을 일치시켰다. 
- [[체력 게이지 관련 설정들]]에 현재 설정 기록해둠.
- `Enemy`도 여러 개를 만들어야 하므로 `EnemyData`을 구현, 기존에 스포너에 프리팹을 할당했는데 이 대신 스포너에 `EnemyData`를 할당하고, 그 EnemyData 각각에 기존 프리팹을 할당하는 방식이다.
- 저지 구현 완료 : 생각보다 오래 걸렸다(Data로 고치고... UI 또 적용 안되는 거 고치고...)


## 240802

### 유사 명방
- `MapEditorWindow` - 현재 맵의 Width, Height가 연동되지 않는 문제 해결
- `Health Bar` - 오퍼레이터, 적과 연동되지 않는 문제 해결 중 
- **UI Manager를 없애고 캔버스를 오브젝트의 하위에 붙이는 방식으로 다시 돌려놨다!** 
	- 그 과정에서 UI 관련 이것저것 수정 완료. 
- 일단 시야각은 90도로 놓겠음. 실제 명방은 그것보다는 사선에서 보는 느낌이지만, 캔버스 위치나 좌표를 잡기가 다소 애매한 면이 있어서 일단 이렇게 둔다.
- `UI Manager`, `Camera Manager` 등 제거.

## 240801

### 유사 명방
- 게이지 구현
	- Enemy의 서식을 가져와서 Operator에 구현해놨는데 이상하다. NullReference 에러부터 해결을 시작하도록 한다.
	- 부모 오브젝트의 스케일이 달랐다. 부모 오브젝트의 스케일은 전부 1로 고정하고, 자식 오브젝트들의 요소들을 조정하는 방식으로 수정 중.
- [[Unity - Rect Transform]]
- `Operator` 나 `Enemy` 내부에 `Canvas`가 들어가는데, 이 때 둘 모두를 따로 프리팹으로 저장하지 말고, 가장 상위의 오브젝트만 프리팹으로 저장하자
	- 일단은.
- 이런 식의 개발을 할 때, `Enemy`나 `Operator`를 따로 구분해서 만들지 말고 `Unit`이라는 베이스 오브젝트를 하나 만들고, 거기서 추가로 살을 덧붙이는 식으로 구현해나가는 게 좋을 것 같다. 지금처럼 구현하면 중복된 구현을 여러 번 해야 하는 문제가 있음.
#### 방향 수정 : UI를 관리하는 매니저를 별도로 구현하고, 인스턴스에 UI를 갖다 붙이는 방식으로 수정한다
- 지금처럼 구현하면 **부모 오브젝트의 회전에 UI도 영향을 받는 이슈가 있음**
- (그리고 사실 UI도 매니저를 이용해서 구현하라고 배웠는데, 어쩌다 보니 여기까지 왔다)
-  [[Unity - UI 매니저]]

#### 휴식 중.. (앞으로 할 일)
1. 전역 UI Manager가 생성된 인스턴스에 캔버스 프리팹을 할당
2. 지금 Stat을 가져오는 곳들이 약간 중구난방식임 : 어떤 값은 Stats에서, 어떤 값은 Data에서.. 교통 정리가 필요해보인다.

#### 다시 진행
- (수정 완)갑자기 잘 작동했던 오퍼레이터 배치 하이라이트 로직도 이상해짐
- (완) UI Manager를 이용해 Enemy와 Operator 의 체력 게이지 (및 SP 게이지) 구현
	- 추후에 카메라를 회전하면 로테이션을 바꿀 필요는 있어 보임(카메라를 수직 방향으로 바라보도록)
# 7월

## 240731
### 유사 명방
- 게이지 구현 
	- 체력바 : 아군, 적군 모두에게 공통적으로 나타남
	- 적은 체력이 1 이상 깎였을 때에만 체력바가 나타남
	- 아군은 체력바 외에도 SP 게이지 바도 나타남 
- 혼란) 애셋으로 어떻게 저장해둘까?
	- **Canvas 단위로 묶겠음** - 설정할 게 있으면 하이어라키에 올리고 편집해서 다시 저장하면 되니까
	- 즉 Bar 들을 따로 프리팹으로 저장해두는 게 아니라, Canvas 아래의 요소들로 통째로 묶는다.
- [[Unity - 하위 오브젝트 저장 방법]]

- 체력바 다듬기 <-- 이거 이상해짐
	- Enemy와 Operator의 하단에 Bar들이 떠야 함
	- Canvas 자체는 오퍼레이터를 감싸는 프레임처럼 구성돼야 할 듯?



## 240730

### 유사 명방
- `MapEditorWindow.cs` - 컴파일러가 다시 작동했을 때 윈도우가 정상적으로 맵을 얻지 못하는 현상 수정 완료(`OnEnable`에서 맵을 다시 초기화해주면 된다)
- `SniperOperator` - 공격 범위 이상한 문제 수정 완료

드디어 진도 나간다!!!!!!!!!!!!!
#### 원거리 공격 구현하기(완)
- `Projectile.cs` 작성, `Operator.cs` 수정
- 공격 범위 판정 
	- 오퍼레이터의 공격 범위는 "타일"로 설정
	- **"타일 위에 적이 있다"는 `Tile.cs`에 구현**


### 240729

#### 유사 명방

##### 오늘의 목표
- 적 생성 -> 도착 지점까지 자동으로 이동하기
- (완) MapEditorWindow.cs에 LoadMap 메서드 실행 시, 그리드에 정상적으로 반영되지 않는 문제 수정(이거만 몇 번째냐...)
	- `MapEditorWindow.InitializeNewMap` 관련 
		- 맵 에디터 윈도우를 열었을 때 
		- 이미 Map이 하이어라키에 존재한다면 해당 Map을 그리드에 그린다
		- 없다면 새로운 맵을 만들거나 불러오기를 선택할 수 있도록 한다
	- 그리드 포지션 관련 설정 : 프로퍼티만 설정하면 **프리팹에 저장(직렬화)되지 않는다!** 
		- `public` 필드, 혹은 `[SerializeField] private` 필드만 직렬화된다.
	- [[Unity - Awake, OnValidate, Initialize 차이]]
	- [[Unity - 직렬화]] **<- 불러온 맵의 각 타일이 자기 좌표를 올바르게 갖지 못했던 이유**


### 240727

#### 유사 명방
- `MapEditorWindow.cs` 관련 수정 
	- 로드 시 그리드 변화 인식하지 못하는 문제 해결
	- **특히 이 좌표가 엄청 헷갈리므로 잘 기억해두자!!!!!**
		- Tile의 이름은 그리드 좌표를 따르도록 `Tile_{x}_{y}`로 설정
		- 이는 월드 좌표와 다르다 
			- 그리드 좌표는 좌측 상단이 (0, 0)
			- 월드 좌표는 좌측 하단이 (0, 0)
- 아예 `Map` 프리팹에 2차원 행렬을 저장하는 방식으로 바꿈
	- 기존엔 `MapManager`가 `Map`의 구조를 뜯어보는 방식이었음


### 240726

#### 유사 명방
- [[GetComponentsInChildren에 관해]]
- 게임 시작 시, 맵을 정상적으로 인식하지 못하는 문제 해결
- 위 문제를 해결하니까 다시 MapEditorWindow.cs가 이상해짐. 수정 중.
- 스포너에서 적 생성 작업 시작

### 240725

#### 블로그
- `MyDoing`의 스타일 조정
- 커서 위치에 드래그 & 드랍으로 이미지 업로드 구현
	- 추가) 이미지를 드래그 중일 때, Quill의 텍스트 커서 위치도 마우스 커서 위치에 따라 이동할 수 있게끔 구현하기(당연히 이동할 수 없는 위치로는 텍스트 커서가 움직일 수 없음)
- 버튼 클릭 없이, 본문에 유튜브 링크 붙여넣기 시 바로 동영상 임베드 삽입 기능 구현



