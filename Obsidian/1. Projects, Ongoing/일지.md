## 참고
- **옵시디언으로 봐야 멀쩡하게 보임!!!**
- **옵시디언으로 작성된 만큼 깃허브의 마크다운에서는 지원하지 않는 기능들이 있을 수 있다.** `[[]]`, 이미지 첨부 방식 등이 대표적.
- `[[]]` 링크는 `유니티 - 보관함`이나 `일지`에 대부분 있다.

## 블로그
- 데이터가 제때 수집되고 있는지 눈팅 정도만 하면 충분할 것 같다.
- 사실 Quill을 쓰면서 되돌리기 / 붙여넣기 기능이 좀 이상하게 작동하고 있는 문제가 있긴 한데... 언제 해결할지는 모르겠음?

## 작업 예정

### 유사 명방(전체)

#### 진행 중
#### 구현 예정
- 스테이지 1-1 ~ 1-3 구현
- 도전과제 구현
	- 예를 들면 1-1에서 바리케이드만 이용해서 스테이지를 클리어하기 같은 게 있겠다
	- 혹은 오퍼레이터를 배치하지 않고 3성 클리어하기
	- 이거는 명방 본게임의 4-4에서 쇼만 배치하고 몹들의 동선을 꼬는 방식으로 

#### 발생 중인 이슈
- `StageData`의 `Spawner`들 관리하는 거
- (241216) 레벨업 후에 `OperatorLevelUpPanel`의 스냅핑 동작이 정상적으로 동작하지 않을 때가 있다. 

- 간헐적인 문제
	-  `Enemy` 기준, 바리케이드 파괴 로직이 동작하지 않는 현상이 있음

#### 하고 싶은데 못할 듯
- 캐릭터 스프라이트 
	- 현재 Capsule로 Operator나 Enemy 등을 구현한 상태
	- 이걸 투명한 Quad로 바꾸고 그 위에 2D 스프라이트들을 구현하는 방식이 명방에서 쓰고 있는 방식으로 보임
	- 직접 하려면 배워서 할 수는 있겠지만 시간이 문제겠다.

# 2월

## 250204

### 짭명방
#### 맵 구현하기
- 맵 1-2, 1-3 구현, 경로 데이터 설정
	- 맵의 순서는 뒤바뀔 수도 있을 것 같음. 1-3을 너무 작게 만들었다.

- 기본적인 맵이랑 경로 설정, 경로를 따라 적이 잘 이동하는가 등등은 잘 구현되었음!
- `PathData`에서 경로를 설정할 때
	1. 프리팹에서는 경로 설정이 안됨. 맵을 하이어라키에 띄우고 설정해야 함
	2. 왜인지는 모르겠는데 `Start` 타일을 클릭하면 노드가 추가되고 편집이 멈춘다. 나머지는 괜찮음.

> 어쨌든 맵의 구성 자체도 생각보다 엄청 빨리 진행했다.

- `Spawner`의 경우 단순히 `MapEditorWindow`에서 `Start` 타일을 만들 때 함께 들어가고, `StageManager`에서 맵에 있는 모든 `EnemySpawner`를 가져와서 전체 적의 숫자를 계산하는 정도로만 구현이 되어 있다. 이 정도로만 해도 충분할 것 같음. `FindObjectsOfType`을 쓰기는 하지만.. 1회성 연산이고 맵이 크지 않아서 큰 상관이 없지 않을까?
#### 기타 오류 수정
- `MapEditorWindow`에서 `Enemy Spawner` 프리팹을 찾지 못하는 현상 수정
	- 경로 주의! 에디터 단위의 편집이므로 `SerializeField`에 오브젝트를 할당하는 방식으로 접근하지 못함

- `MapEditorWindow`에서 맵을 저장하는 방식 수정
```cs
	//PrefabUtility.SaveAsPrefabAsset(currentMap.gameObject, path); // Map을 단순히 저장만 함(프리팹과 연결 X)
	PrefabUtility.SaveAsPrefabAssetAndConnect(currentMap.gameObject, path, InteractionMode.UserAction); // 프리팹과 연결까지 수행
```
>- 기존 : `PrefabUtility.SaveAsPrefabAsset`은 오브젝트를 복사 / 붙여넣기 하는 방식으로 저장함. 즉 유니티에서 하이어라키의 오브젝트를 프로젝트에 드래그&드랍할 때 프리팹으로 연결되면서 참조되는 게 아니라, 아예 통째로 복사되고 별도의 오브젝트로 취급됨
>- **프리팹화 : `PrefabUtlility.SvaeAsPrefabAssetAndConnect`은 오브젝트를 프리팹으로 저장하고, 하이어라키에 떠 있는 오브젝트도 프리팹과 연결시킨다.** 파라미터가 1개 추가됨. API 메서드가 호출되는 모드 설정이라는 듯.

> 별 차이는 아닐 수 있는데, 이렇게 수정하지 않으면 굳이 하이어라키에 띄우고 작업하는 의미가 없어보임.

- 프리팹 수정하기
	- 수정된 프리팹을 프로젝트의 원본 프리팹에 드래그&드롭 하는 것만 알고 있었는데
	- **인스펙터 - `Overrides - Apply All`로도 가능함**
	- 이걸 몇달을 만졌는데 이제야 알았다 엌ㅋㅋ 기존 방식은 새로 프리팹을 만드는 행위였다는데?

- 유니티 상-식 보충
	- `private`으로 설정된 필드는 일반적인 저장상황에서 그 값이 보존되지 않음
	- `[SerializeField]`는 여태까지 `private` 필드를 인스펙터에 노출시키는 용도로만 써왔지만, 이외에도 **해당 필드에 할당된 값을 직렬화해서 저장**하는 역할도 함
	- 예를 들어 내 프로젝트의 `Tile.gridPosition`이 있다.

- Enemy가 여러 명일 때 이펙트가 정상적으로 나타나지 않는 현상
	- 이펙트의 오브젝트 풀링에서 각 이펙트의 태그를 만들 때, 객체마다 갖는 태그가 모두 달라야 함. 이걸 고려를 안해서 여러 객체가 같은 오브젝트 풀을 공유하는 현상이었음.
	- `GetInstanceID()`는 각 객체의 고유한 인스턴스 ID를 `int`값으로 반환함. `ToString()` 메서드로 `string`으로 바꿔서 사용.


### 구독을 해야 하나 말아야 하나
> - 딥시크가 터지면서 끌로드 구독을 끊었는데, 다시 해야 하나? 아니면 무료 분으로 충분한가 고민 중이다. 프로젝트 기능을 쓰면 질문의 수가 엄청 줄어들어서.. 5시간에 10개 조금 넘는 질문은 너무 적긴 하다.
> - 근데 이미지 작업 등을 하는 날에는 아예 안 쓰기도 한다. 이렇듯 순간적으로 많이 필요한 느낌에 가까움.
> - 그래서 1개월에 3만원이나 하는 끌로드를 써야 하나, 말아야 하나.. 아니면 딥시크가 불러올 경쟁을 믿고 가격 인하를 존버해야 하나.. 등등이 고민된다. 일단은 chatGPT랑 끌로드를 번갈아가면서 쓰면서 버티는 중. 네이버의 클로바 X도 써봤는데 조금 긴 스크립트를 넣었더니 작동하지 않아서 아예 즐찾에서 뺐다.


## 250203

### 짭명방
- 남은 프로세스 정리
	- 맵 2개 더 추가로 구현하기
	- 도전과제 구현하기
		- 맵 1-1에서 `바리케이드만 배치해서 스테이지 클리어하기` 를 일단 생각하고 있음
		- 이걸 구현하려면 해당 타일을 밟았을 때 죽을 때까지 도트 대미지가 들어가되 공격 속도가 증가하는 타일을 만들어야 함
		- 도트 대미지가 들어가고 있음을 보여주는 알리는 아이콘?도 하나 필요함

#### 스테이지 진척도 구현
> - 여러 개의 스테이지, 스테이지 버튼 등을 구현하기에 앞서서, 스테이지의 진척도를 저장하는 규격을 하나 정의해놓고 시작하는 게 좋을 것 같다. 
> - 이를 ~~`StageProgressData`~~를 새로 만들려고 했는데 그 대신 `StageResultData`를 수정해서 사용하는 방식으로 수정하겠음

2. 이전 스테이지가 클리어됐을 때 다음 스테이지 버튼이 보여야 함
3. 사용자의 스테이지 진척도를 불러와서 체크해야 함
4. 스테이지 클리어 시 진척도를 저장해야 함

- 그리고 스테이지의 클리어 및 별 갯수는 `PlayerDataManager`에서 관리

- 결과물 1. [[스테이지 진척도 구현하기]]
- 결과물 2 - StageSelectPanel에 아래와 같은 자료를 추가
```cs
[System.Serializable]
public class StageUIData
{
    public string stageId;
    public StageButton stageButton;
    public Image lineImage; 
}
```
> - 각 스테이지의 클리어 여부를 검사, 이전 스테이지가 클리어된 경우 stageButton과 lineImage가 활성화되는 방식임
> - 만약 추가 챕터 등을 구성한다든가 하면, 이전 스테이지 자체를 넣을 수도 있을 듯. 현재는 단순히 string을 검사하는 식으로 조건을 체크하고 있다.

- 예시
- 임의로 1-1만 클리어했다고 정의해둔 상태임
![[Pasted image 20250203173957.png]]
> 여기에 아트를 추가를 한다면
- 클리어한 스테이지를 몇 성으로 클리어했나 정도만 추가하면 될 것 같음
	- 추가하고 오늘은 여기까지. 이게 생각보다 안 이쁘다.
- 저 선에 셰이더 그래프 머티리얼을 씌워서 좌->우로 가는 그라데이션을 추가하는 것도 떠오름
	- **이거 안된다.** 왜 안되는지는 모르겠음. 그라데이션 텍스쳐 + `Tiling And Offset`으로 우->좌로 그라데이션 이미지가 옮겨가도록 했는데, 그냥 검정색 이미지만 뜬다. 
	- 모든 `Source Image`에서 동일한 현상.

