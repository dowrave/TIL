
# 앞으로 구현할 거 정리

## 유사 명방
- 게임적인 목표
	- 스테이지 : `1-1 ~ 1-3` 까지 구현하기
	- **최소 8명**의 오퍼레이터 구현 (스킬도 일단은 1개씩만 구현)
- 시스템 관련
	- `DeployableManager`에서 받는 오퍼레이터들의 정보는, 이전 씬에서 가져와야 함(이를 `편성 씬`이라고 하자)
		- 추가로 그 스테이지에서만 쓸 수 있는 요소가 있다면 그것도 추가해서 최종적으로 `BottomPanel`에 모두 나타나도록 해야 함
	- 육성 요소 추가
		- 스테이지를 저런 식으로 구현할 거면, `레벨업 재화`를 1-1 시작 전에 얼마를 주고, 스테이지를 클리어할 때마다 `레벨업 재화`를 오퍼레이터에게 사용해서 육성을 시키게끔 구현하는 것도 괜찮을 듯(어떤 오퍼레이터에게 사용할지는 유저가 정하는 방식, **한정된 재화를 어떻게 사용할 것인가?**)
		- 오퍼레이터가 특정 레벨에 도달하면 재능(패시브)을 얻게 하거나 또다른 액티브 스킬을 얻게 하는 방식도 넣어볼 만 하겠다.


## 블로그
- 데이터가 제때 수집되고 있는지 눈팅 정도만 하면 충분할 것 같다.
- 사실 Quill을 쓰면서 되돌리기 / 붙여넣기 기능이 좀 이상하게 작동하고 있는 문제가 있긴 한데... 언제 해결할지는 모르겠음?

## 작업 예정

### 유사 명방(전체)
- 다 완료됐다면 그 다음에 구현할 것
	- **스킬** (진행 중)
	- 육성 : 오퍼레이터의 레벨
	- 편성 씬
	- 이 다음엔 스테이지 1-1 ~ 1-3 구현

### 유사 명방(디테일)
- **스킬**
	- 스킬 사용 가능 이펙트 구현
	- 스킬 사용 중 이펙트 구현
	- 스킬 사용 중일 때, 지속시간 동안 CurrentSP가 서서히 감소하는 방식으로 구현
		- 사용 중일 때는  SPBar의 색을 다른 색으로 변경
- 간헐적인 문제
	- `Barricade`를 부수는 경우에, 어떤 상황에서는 렉이 갑자기 심해지는 증상이 있다. 이게 컴퓨터의 이슈인지 경로 설정 로직의 이슈인지는 모르겠음.
	- 투사체의 경우, 날아가는 중에 목표가 사라지면(?) 오브젝트 풀로 돌아가지 않는 현상 발생
	-  `Enemy` 기준, 바리케이드 파괴 로직이 동작하지 않는 현상이 있음

# 10월
## 241002
[[241002 정리]]
### 유사 명방
> 이것들부터 수정한다.
- (O)스킬 사용은 SP가 가득 찼을 때만 가능함
- (O)Operator의 `MaxSP` 값은 스킬의 SP값이 되어야 함
- (O)Skill Button의 경우 SP가 가득 찼을 때만 활성화, 그 외에는 비활성화.
	- `InActivePanel` 추가 중..
	- 이벤트가 이상하게 작동이 안된다. 그거 때문에 시간이 좀 걸리는 중.
	- 오류는 안 뜨는데 중간에 실행 중지가 되어서 최초 이벤트 함수를 실행시키지 못하는 이상한 이슈가 있었다. 찾느라 헤멨다.
- (O)스킬의 변화로 인한 `OperatorInfo`의 값 변화 감시 필요 - 프로퍼티에 이벤트 추가하면 될 듯?

> 추가 문제
- (O) SP가 있는 오퍼레이터(?)의 경우 `ActionUI`가 띄워진 상태에서 외부를 클릭해도 취소 로직이 동작하지 않음
	- 일단 `ClickDetectionSystem`에서 `Clickable Layer`에서 `Tile`을 제거했다. 프로젝트를 진행할수록 굳이 타일을 클릭할 필요는 없다고 느껴졌기 때문이다. 
	- 실제로 그렇게 테스트를 해봐도 크게 위화감 없이 작동하는 것 같음.




## 241001

[[241001 정리]]

### 유사 명방
- `Operator` 스킬 구현하기
	- 스킬을 어떻게 구현할 것인지에 대한 접근부터 시작한다.  이거는 아예 처음 손대는 영역임. 

1. `Skill`이라는 클래스를 만듦
2. `OperatorData`에 `Skills`라는, 스킬들의 목록 추가
3. `Operator`에서 여러 스킬을 관리하게 하되, 1개만 활성화할 수 있게 함

- 그러면 오퍼레이터마다 다른 스킬은 어떻게 구현되는 것일까? 

> 내 구현
> 1. `Skill`이라는 기본 골자 클래스를 만듦
> 2. 대부분의 경우, 오퍼레이터에 버프가 되는 방식이다. 그래서 `BuffSkill`이라는 클래스부터 출발한다.

```cs
// Skill.cs
public abstract class Skill: ScriptableObject
{
	public string Name;
	[TextArea(3, 10)]
	public string description;
	public float cooldownTime;
	public float SPCost;
	public Sprite SkillIcon;

	public abstract void Activate(Operator op);
}

// BuffSkill.cs
[System.Serializable] 
public class BuffEffect
{
	public float HealthModifier = 1f;
	public float AttackPowerModifier = 1f;
	public float AttackSpeedModifier = 1f;
	public float DefenseModifier = 1f;
	public float MagicResistanceModifier = 1f;
	public Vector2Int[] ChangedAttackableTiles;
}

public float duration = 10f;
public BuffEffect BuffEffects;
public GameObject BuffVisualEffectPrefab;
//public Color SPBarColor = Color.yellow;
```

> 앞으로 수정할 것
1. 스킬 사용은 SP가 가득 찼을 때만 가능함
	- Operator의 `MaxSP` 값은 스킬의 SP값이 되어야 함
	- Skill Button의 경우 SP가 가득 찼을 때만 활성화, 그 외에는 비활성화.
	- 또 뭐가 있던 것 같은데 기억이 안 난다.