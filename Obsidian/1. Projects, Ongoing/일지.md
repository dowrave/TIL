
## 블로그
- 데이터가 제때 수집되고 있는지 눈팅 정도만 하면 충분할 것 같다.
- 사실 Quill을 쓰면서 되돌리기 / 붙여넣기 기능이 좀 이상하게 작동하고 있는 문제가 있긴 한데... 언제 해결할지는 모르겠음?
- **데이터 수집기에서 외부 주소 못 읽는 문제 발생 시작(`241001 ~ `).** 이걸 해결할 수가 있나?

## 작업 예정

### 유사 명방(전체)
#### 구현 예정
- 스킬 (오퍼레이터마다 2개씩)
- 캐릭터 스프라이트
- 육성 : 오퍼레이터의 레벨
- 이 다음엔 스테이지 1-1 ~ 1-3 구현
> - `OperatorSelectPanel.LeftArea`의 하단 부분은 나중에 스킬 등록하는 부분으로 만들 거임

#### 발생 중인 이슈

> 발견한 남은 문제


- `StageData`의 `Spawner`들 관리하는 거

- 간헐적인 문제
	- `Barricade`를 부수는 경우에, 어떤 상황에서는 렉이 갑자기 심해지는 증상이 있다. 이게 컴퓨터의 이슈인지 경로 설정 로직의 이슈인지는 모르겠음.
		- 특정 상황이 아니라, 왜인지 모르게 렉이 심해지는 타이밍이 있다. 무엇이 원인인지는 모르겠음.
	-  `Enemy` 기준, 바리케이드 파괴 로직이 동작하지 않는 현상이 있음

# 12월

## 241206
[[241206]]
- 적고 나니까 왤케 한 게 없어 보임?
### 짭명방

#### 아이템, 아이템 인벤토리 구현하기
- [[아이템, 아이템 인벤토리 구현하기]]

#### OperatorLevelUpPanel에 미리보기 기능, 최대 레벨 버튼 추가하기
- 계산 시스템 : `ExpCalculationSystem`
	- 보유한 아이템들로 도달할 수 있는 최대 레벨을 계산
		- 이거의 경우 `MaxLevelButton`을 구현해서 해당 레벨로 바로 스크롤될 수 있게끔도 함
		- 스크롤 중에는 살짝 오른쪽으로 밀려나고, 멈출 때는 원래 위치에서 클릭 가능하도록 움직임도 구현
	- 어떤 레벨에 도달하기까지 필요한 경험치 아이템의 종류와 수 계산

#### 기타 수정
- 정예화 후에 레벨이 1로 돌아갈 때 스탯도 1로 돌아가는 현상 수정
- `OwnedOperator`, `OperatorGrowthSystem`에 있는 오퍼레이터 성장 메서드들 정리
- `OperatorInventoryPanel`에 정예화 표시하기
	- `iconHelper`에 정예화 - 이미지 할당 기능 추가, `OperatorIconhelper`로 수정, `OperatorIconData`에 할당해서 관리함.
	- 정예화 이미지 구현 및 `OperatorSlot`, `OperatorDetailPanel`, `OperatorPromotionPanel` 등에서 해당 부분을 할당하게끔 작성. 없다면 이미지 오브젝트 끔

> 발견한 이슈
> - 인게임에서 레벨업한 내용이 반영이 안 됨. 아마 `ScriptableObject`을 가져와서 그럴 거임

- 스크립트가 많아지고 찾기 어려워져서 디렉토리 다시 정리.

## 241205
소녀전선 2 해보고 후기 글 쓰느라 많이 늦었다.
[[241205]]
### 짭명방

#### 정예화 패널 구현하기
- 미리보기 완성하기
	- 스킬은 아직 만든 게 없으니까 냅두고
	- 추가되는 공격범위만 미리보기 가능하게 하기
	- 확인 버튼의 조건 체크

- ~~정예화 이후의 레벨 관리(못함)~~
	- 0정예화 50레벨과 1정예화 1레벨의 스탯은 동일함
	- 레벨업 시의 스탯이 올라가는 로직은 똑같다.


#### 이슈 해결
> 해결해야 할 일
> - `OperatorInventoryPanel`과 달리, `DetailPanel`에서는 `UIHelper`의 클래스 초기화가 제대로 되지 않는 듯 보임
- 해결 : `DetailPanel`에서는 해당 클래스 초기화 시점을 `Initialize`로 옮겨줌
	- 추가로 패널이 켜지고 꺼질 때마다 기존 공격 범위가 남는 이슈가 있었음.  `CurrentOperator`가 변할 때마다 타일을 없앰.
- 패널마다 공격 범위 그리드 크기를 다르게 지정해주기 위해, `UIHelper`에서 타일 크기를 지정할 수 있게끔 변경함

---
- 깨알 지식
```cs
// tileSize를 지정하지 않게끔 메서드를 쓰고 싶을 경우
CreateAttackRangeHelper(container, offset);

// 1. 이렇게 쓰면 안됨
public AttackRangeHelper CreateAttackRangeHelper(RectTransform container, float offset, float? tileSize)
    {
        return new AttackRangeHelper(container, offset, tileSize);
    }

// 2. 이렇게 써야 함
public AttackRangeHelper CreateAttackRangeHelper(RectTransform container, float offset, float? tileSize = null)
    {
        return new AttackRangeHelper(container, offset, tileSize);
    }
```
여기서 `float? tileSize`로만 지정하는 경우, 실제로 이 메서드를 사용할 때에는 `tileSize`에 해당하는 값을 지정해야 함.
- `float?`을 쓴다는 건 해당 매개변수가 `null`이 와도 된다는 의미지만, **이 메서드를 사용할 때 해당 변수에 아무것도 쓰지 않아도 된다는 의미는 아님!**
- **기본값까지 설정해줘야 아무것도 안 써도 동작하는 선택적 매개변수가 된다.**
---
- 디테일 패널 초기화 이슈 : 레벨업 후 상태가 업데이트되지 않는 문제 수정
	- `OnEnable`에서 현재 오퍼레이터가 할당된 경우에만 업데이트하도록 함 -> 그래서 `Initialize` 하기 전에 패널이 켜졌을 때에는 `UpdateAllUI()`가 `OnEnable`에서 먼저 실행되는 걸 막았다.

- 레벨업 패널 스크롤 이슈
	- 어떤 오퍼레이터의 레벨업 수행 -> 다른 오퍼레이터의 레벨업 패널을 켜면 스크롤이 이전 오퍼레이터의 레벨과 현재 오퍼레이터의 레벨 사이에 위치하는 현상이 있음
	- `OperatorLevelUpPanel.OnDisable`에 패널의 정보를 정리하는 코드 추가

## 241204

### 짭명방
#### OperatorInventoryPanel
- `OperatorSlot`에 레벨 게이지 추가

#### OperatorLevelUpPanel
- 수정사항이 생기면서 스크롤이 다시 생성되거나 변동이 있는 경우에, 스크롤이 위에서 날아오는 현상이 있었음
	- `Movement Type`을 `Elastic -> Clamped`로 고치니까 원하는 구현이 나오는 것 같다.
- 레벨업 후 `targetLevel`이 `currentLevel`이 되면서 반영되어야 할 스탯 업데이트 반영
- `ConfirmButton` 활성화 조건 수정
- `ConfirmButton` 클릭 시 우측 상단에서 확인 패널 들어오게 하기
- `OwnedOperator`의 현재 경험치가 게이지에 반영되도록 함
	- `OperatorDetailPanel`도 같은 부분이 있어서 수정

#### 여러 패널 공통 사용 UI를 따로 빼둠 : UIHelper
- 인벤토리, 디테일, 정예화 패널에서 공통적으로 쓰이는 옵션들이 있어서 따로 게임 오브젝트로 뺌
- 정예화 패널의 경우 정예화가 된 다음의 공격 범위는 다른 색으로 미리 보여주는 기능을 구현할 것이기 때문에 추가적인 처리가 필요함


#### ~~아이템 인벤토리 시스템, 경험치 아이템 구현 시작 못함~~



## 241203
[[241203]]
### 짭명방

> 할 일

> - 정예화 후에 미리보기
> 	- 그냥 단순하게 어떤어떤 기능이 해금됩니다 정도만 있어도 무방할 것 같음

- 계속 헷갈린다. [[오퍼레이터 성장 시스템 만들기]]
	- `OperatorProgress`를 없애고 `OwnedOperator`에 통합 

> - 레벨업 패널의 확인 버튼 클릭 시 레벨업 반영하기

이거에 대해 생각하고 있는 옵션이 2가지가 있음. 원본 게임은 아마 1번일 거임
1. 일관된 동작을 위해 확인 버튼을 누른 후에도 레벨업 패널 유지
2. 만렙을 달성했을 경우 더 이상 올릴 레벨이 없으니 뒤로 가기

#### 현상 수정
- `OperatorLevelUpPanel` : 패널을 처음 열 때는 괜찮은데, 2번째부터는 스크롤이 위에서부터 날아오는 효과가 보임.
	- `currentLevel`이 1이 아닐 때 패널을 여는 상황에서 스크롤이 날아오는 현상이 있다. 레벨업 누른 직후에는 애니메이션을 없애야 할 듯.


## 241203
### 짭명방
?
## 241202
[[241202]]
### 짭명방

#### OperatorLevelUpPanel 마무리
- `OperatorData`에 레벨업 당 스탯 반영, 좌측 하단에 레벨업 시 적용될 스탯 보여주기
![[Pasted image 20241202163319.png]]
> 저 원 슬라이더에 나타날 노란 표시는 경험치 아이템을 먹이고 나서의 슬라이더 표현
> 그걸 구현하려면 특정 레벨에 도달하기 위해 필요한 경험치를 계산하는 식이라든가 이런 게 필요할 것 같다. 아직 경험치 아이템 같은 걸 구현하지는 않았으니 이 정도.

#### OperatorPromotionPanel 구현
- 업데이트 로직이랑 확인 버튼만 구현해둠. 
- 오늘은 확실히 게을렀다.



## 241201

### 블로그
- 휴일을 맞아!!!! 평소에 건드리지 못하는 자기소개랑 데이터 수집 관련한 이슈를 정리했다
	- 조회 단위를 `오늘로부터 n일 전` 같은 식으로 구현했는데, 이를 날짜 범위 및 드롭다운 버튼으로 수정했음.
	- 프론트랑 백엔드 다 고치고 프론트 버킷 지우고 클라우드 프론트 무효화 한 번 하고 백엔드 이미지 다시 만들어서 올렸는데
	- **갑자기 데이터 수집이 또 잘 작동한다.** 다행히 백엔드에 마지막 날짜에 관한 조건을 넣지는 않았어서 이미지 빌드는 다시 안 해도 될 것 같음. 버킷에만 조건 다시 정리해두면 될 듯.
- 올해는 버닝비버가 땡기지 않는구만 허허..


