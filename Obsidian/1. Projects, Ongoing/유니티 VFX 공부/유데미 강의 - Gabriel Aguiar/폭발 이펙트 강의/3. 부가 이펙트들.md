1. [[#퍼져나가는 파티클|퍼져나가는 파티클]]
	1. [[#퍼져나가는 파티클#Limit Velocity over Lifetime|Limit Velocity over Lifetime]]
	2. [[#퍼져나가는 파티클#파티클 셰이더 만들기|파티클 셰이더 만들기]]
2. [[#떠오르는 파티클 만들기|떠오르는 파티클 만들기]]
3. [[#연기 고리|연기 고리]]
	1. [[#연기 고리#메쉬 만들기 - 블렌더|메쉬 만들기 - 블렌더]]
	2. [[#연기 고리#유니티|유니티]]
	3. [[#연기 고리#텍스쳐 만들기 - Krita|텍스쳐 만들기 - Krita]]
	4. [[#연기 고리#Erosion Texture 셰이더|Erosion Texture 셰이더]]
	5. [[#연기 고리#세부 조정|세부 조정]]
4. [[#오렌지색 고리 구현|오렌지색 고리 구현]]
	1. [[#오렌지색 고리 구현#작은 오렌지 고리 구현|작은 오렌지 고리 구현]]
	2. [[#오렌지색 고리 구현#블렌더 3D 커서 위치 수치로 수정 & 오리진 이동 방법|블렌더 3D 커서 위치 수치로 수정 & 오리진 이동 방법]]
	3. [[#오렌지색 고리 구현#수직 고리 구현|수직 고리 구현]]

## 퍼져나가는 파티클
- 새로운 파티클 시스템을 하나 만듦
- 폭발 이펙트와 함께, 중앙에서 터져나가는 파티클 이펙트 구현
- 여기선 **구체적인 구현보다는 몰랐던 것들을 기록**함

### Limit Velocity over Lifetime
- 예전에 퍼져나가는 속도를 죽이려고 했을 때, `Velocity over Lifetime`에서 `Curve`로 `Speed Modifier`의 값을 확 죽이는 방식으로 구현한 적이 있었다.
- 그런데 `Limit Velocity over Lifetime`이라는 항목을 이럴 때 쓸 수 있다. 
- **`lifetime`이 끝날 때 쯤에 속도를 죽이고 싶을 때 사용하는 기능**임.
![[Pasted image 20250908174434.png]]
- `Speed`
	- 파티클이 도달할 수 있는 최대 속도. 정확히는 **기준선 개념**에 가깝다.
- `Dampen(감쇠)`
	- 파티클이 최대 속도를 초과했을 때 얼마나 강하게 속도를 줄일지를 결정한다.
	- `1` : 최대 제동력으로, 속도가 `Speed` 값을 넘으면 즉시 `Speed` 값으로 고정된다.
	- `0.5` : 부드러운 제동. 설정된 최대 속도를 향해 부드럽게 감속한다. 

- `Start Speed` 값이 여기의 `Speed` 값을 초과했을 때, 이를 감속시켜주는 기능이다~라고 생각하면 된다. 
	- `Start Speed` 값이 `Speed` 값을 초과할 수 없다는 개념은 아님.
- **빠르게 튀어나가되 급격히 멈추는 이펙트**를 만들 때 유용함.

### 파티클 셰이더 만들기
- 대체적인 구현은 동일함. `Vertex Color`까지 곱한 다음만 살짝 다른데
1. `Split`으로 알파값은 `Alpha`로 따로 전달한다는 것
2. `AlphaClipThreshold`에도 프로퍼티를 설정해서 연결한다는 것

이 2개만 다르다. `Material Override`를 셰이더 단위에서 켜면 머티리얼마다 다른 설정으로 적용할 수 있으니 참고. 예를 들면 강의에선 `Opaque`로 셰이더를 만들었지만 머티리얼에서 `Additive`로 수정해서 사용하고 있다.

![[VFXTutorial_Explosion_Particles.gif]]
- 설정. `Limit velocity over lifetime` 효과를 보면 좋을 것 같아서 `gif`로 따놨다.
	- `Start Speed` : 5 ~ 40
	- `Limit Velocity over Lifetime` 
		- `Speed` : 3
		- `Dampen` : 0.15

## 떠오르는 파티클 만들기
![[VFXTutorial_Explosion_ParticlesFloating.gif]]
> **`Noise` 안 썼음!**

- `ParticlesImpact`를 복붙함. `ParticlesFloating`

- **`Velocity over Lifetime`**
	- `Linear` : `-1.2 ~ 1.2, -1.2 ~ 1.2, 0.5 ~ 1.8`
	- **`Orbital`** : `Z축`만 `0 ~ 1.5`

- **`Shape`는 `Hemisphere`를 유지**함

> 이 두 옵션의 조화임 : `Velocity over Lifetime(Orbital 포함) + Shape`

- 시간에 따른 파티클 색이나 파티클 모양, 크기 같은 건 별도로 적어놓진 않겠음. 다른 이펙트보다 **조금 더 빨간색**에 가깝게 `Start Color`를 설정했다 정도만 알아두자.

## 연기 고리

### 메쉬 만들기 - 블렌더
- `Cylinder`를 만드는데 아래가 좁고 위가 넓은 모양. 이건 강의 보고 메쉬 만들고, 특기할  요소들만 기록해둔다.

![[Pasted image 20250908182841.png]]
- `Top(Numpad 07)`에서 본 시점

![[Pasted image 20250908182856.png]]
- `Front(Numpad 01)`에서 본 시점

저 아래 위치를 `Origin`으로 잡을 건데, 생각보다 간단하다. 
1. 뷰포트에 커서 올림 - `N`키 클릭 - 우측의 `View` 클릭 - `3D Cursor`에서 좌표보고 위치 지정(이게 제일 정확함)
2. `Object Mode`에서 `Object`를 클릭한 상태로 `Object - Set Origin to 3D Cursor` 지정
> 블렌더 사용 빈도가 잦은 게 아니라서 단축키를 자주 까먹으니까 이런 식으로 적어둠

- 저렇게 위치와 크기를 바꿔준 다음 `Ctrl + A - All Transform`을 적용해주자.

- `UV Map`을 보고 꽉 차게 수정해준 다음 내보내기 후 저장.

### 유니티
- 파티클 시스템 새로 만들고 방금 만든 메쉬를 적용해본다.
- 만약 머티리얼 설정 때문에 보이지 않는다면 `Wireframe Draw Mode`로 전환해서 보면 됨.
	- 이 때 메쉬가 한쪽 면만 보이는데, 기본 머티리얼 설정이 `Render Face - Front`로 되어 있기 때문.

- 메쉬에 적용하는 머티리얼은 `Alpha Blended`로 적용할 거임 - 어두운 색으로 만들 것이기 때문임.
	- `Render Face - Front`로 설정

### 텍스쳐 만들기 - Krita
- 강의에선 Krita로 진행한다. `Seamless` 텍스쳐를 만듦. `Shift + W`로 심리스 모드 전환이 가능하다.
![[Pasted image 20250908185054.png]]

- 유니티에 텍스쳐 파일을 넣을 때 **`Alpha Is Transparency` 옵션을 켜서 넣었다.** 

### Erosion Texture 셰이더
- `Unlit`, `Transparent`, `Alpha Blend`, `Both`
- 텍스쳐 * 색 * 버텍스 색 연결하는 부분은 동일
- 알파 : `Sample Texture 2D`의 알파값
- 알파 클립 : `UV1 - Split(R)값`
- `Tiling And Offset`도 설정. `Time`에 따른 애니메이션이므로 `MainTexSpeed(Vector 2)`를 곱한 형태다.

- 참고) 셰이더에서 프로퍼티로 설정한 `Texture2D`에는 `Tiling and Offset`을 설정할 수 있다. 이걸 켜면 머티리얼 단위에서 텍스쳐의 Tiling, Offset을 설정할 수 있음.

여기까지 하고 머티리얼로 만들어서 텍스쳐에 넣으면 됨. 
- 알파 클립 설정을 보면 위에서 `Custom Data`로 만들어서 넣었던 부분과 동일함. 
- `Custom Data`를 활성화하고, `Custom Vertex Streams`에서 `UV2`와 `Custom.xyzw`를 추가한 뒤 `Custom1`을 `Vector`로 설정하면 이제 `X`채널은 알파 클립을 조절하는 값이 된다.

아까 텍스쳐 단위에서 `Tiling And Offset`을 설정할 수 있다고 했는데, 그 기능을 여기서 쓴다. `Tiling`의 `X`를 늘리면 같은 텍스쳐를 여러 번 반복하니까, 그걸 시각화하면서 적절한 값을 찾아 설정할 수 있음.

- 메쉬 추가 설정 : 기존에 만든 메쉬가 `Low poly`라서 `Artifact`가 발생하므로 면을 더 추가해줌. 
	- **블렌더에서 `Ctrl + R`로 루프컷**을 해준다. 기존에 만들어진 중앙에서 밖으로 나가는 방향의 엣지를 3등분함.
![[Pasted image 20250908211858.png]]
> 이렇게 **면을 추가해주면 메쉬에 나타나는 텍스쳐의 형태가 더 부드러워진다.**


![[VFXTutorial_Explosion_Smoke.gif]]
> 여기까지 구현한 형태. 색은 HSV 기준 `20, 14, 64`로 설정 후 `Additive`로 변경했다.
- `Blend`로 설정하면 까맣게 변한 다음에 사라지고, `Additive`로 설정하면 까맣게 되면 Fade Out 처럼 나타남.

### 세부 조정
- 안쪽에 2개의 같은 파티클을 복붙해서 추가함. 크기가 더 작고, `lifetime`도 더 작아서 안쪽부터 서서히 사라지는 효과를 구현한다.
- 충격파도 위 파티클 시스템으로 구현한다. 크기는 비교적 크지만 높이는 더 낮고, `lifetime`은 아예 짧게 만든다. 알파 클립을 담당하는 `Custom Data`의 `R` 채널은 아예 0부터 1까지 직선으로 만든다(위에선 빠르게 증가 -> 잠깐 일정 -> 다시 빠르게 증가)하는 식으로 구현했음

## 오렌지색 고리 구현
- `SmokeRing`을 복붙, `OrangeRing`으로 구현
- `Shockwave`와 비슷한 형태지만 더 작고 더 오래 지속되며 위의 가장 큰 연기보다 더 큼. 색은 주황색, `Intensity` 값은 2로 설정.

### 작은 오렌지 고리 구현
- 폭발 뒤에서 살짝 보이는 느낌으로 위의 링을 복붙한 다음, `lifetime`과 `size`만 살짝 만져준다.

### 블렌더 3D 커서 위치 수치로 수정 & 오리진 이동 방법
- Z축 늘려보고 깨달은건데 **메쉬 새로 만들 때 3D Origin 값 위치가 잘못 설정되어 있다.** 
- 위에도 적어놨지만, 가장 정확한 방법은 수치값을 입력하는 거임.
- 블렌더에서 뷰포트에 커서 올림 -> `N` -> `View` -> `3D Cursor`의 위치 설정
- 이후 아래 2가지 방법 중 하나를 골라서 진행.
	- 방법 1) 오브젝트 모드 우클릭 - `Set Origin` - `Set Origin To 3D Cursor`
	- 방법 2) 상단 바의 `Object - Set Origin to 3D Cursor` 

### 수직 고리 구현
- 폭발과 함께 나타나는 **짧은 이펙트**로, `3D Size`에서 X, Y는 작게, Z는 크게 한다.

- `OrangeRing`에서 구현한 부분
![[VFXTutorial_Explosion_OrangeRing.gif]]

- 지금까지 진행한 모든 이펙트 한꺼번에 실행
![[VFXTutorial_Explosion_250908.gif]]
> `Smoke` 부분이 빠졌는데 메쉬 바꾸면서 빼먹었음. 해당 부분은 다시 설정했고, 재녹화하긴 귀찮으니까 이대로 둔다.

