오늘은 Unity의 ScrollRect를 사용한 레벨업 UI 구현에 대해 깊이 있게 다뤄보았습니다. 주요 내용을 정리해드리겠습니다:

ScrollRect와 스크롤 위치의 이해:
- ScrollRect의 verticalNormalizedPosition은 0(맨 아래)에서 1(맨 위) 사이의 값을 가집니다.
- 실제 스크롤 가능한 거리는 전체 콘텐츠 높이에서 viewport 높이를 뺀 값입니다.
- 레벨 항목이 화면 중앙에 오도록 하기 위해서는 패딩과 spacing을 정확히 계산해야 합니다.

스크롤 위치 계산의 정교한 구현:
- 각 레벨에 대한 정규화된 스크롤 위치를 계산할 때는 패딩과 spacing을 모두 고려해야 합니다.
- currentLevel은 스크롤 위치 0에서, maxLevel은 스크롤 위치 1에서 화면 중앙에 위치하도록 구현했습니다.
- 스크롤 위치 계산 시 totalScrollHeight를 기준으로 정규화하여 정확한 위치를 얻을 수 있습니다.

자연스러운 스크롤 동작 구현:
- 마우스 버튼이 눌린 상태에서는 스냅핑이 발생하지 않도록 하여 사용자 경험을 개선했습니다.
- 스크롤이 거의 멈추었을 때만 스냅핑이 동작하도록 했습니다.
- isUpdatingPanel 플래그를 도입하여 패널 업데이트 중 추가 스냅핑을 방지했습니다.

코드 개선:
- OnScrollValueChanged와 Update 메서드의 역할 중복을 제거했습니다.
- 스크롤 관련 로직을 Update 메서드로 통합하여 코드의 명확성을 높였습니다.
- 불필요한 위치 계산 로직을 제거하고 FindNearestLevel 메서드를 효율적으로 활용했습니다.

이러한 개선을 통해 더 안정적이고 사용자 친화적인 레벨업 UI를 구현할 수 있게 되었습니다. UI 요소의 정확한 배치와 자연스러운 상호작용은 좋은 사용자 경험을 만드는 핵심 요소임을 다시 한 번 확인할 수 있었습니다.