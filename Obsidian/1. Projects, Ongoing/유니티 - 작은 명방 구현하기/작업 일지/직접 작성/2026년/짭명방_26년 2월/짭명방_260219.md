
## 260219 - 짭명방

>[!done]
>- 효과음 추가
>	- `LightningHit01` 
>	- `Heal01`
>- 효과음 동시 재생 관리 
>	- 한 효과음의 최대 재생 2개
>	- 새로 재생 시 이전 효과음 중지 후 재생
>- 버그 수정
>	- 동시에 여러 사운드가 발생할 때, 지속시간이 끝났음에도 계속 소리가 나오는 현상이 있음
>		- 간헐적인 듯.. 다시 발생하면 보기로 함.

## 효과음 추가
- `LightningHit01`
	- `Thunder, Lightning` 등등 찾아봤는데 별로 쓸 게 없었음
	- `Impact` 폴더에서 하나 찾아서 사용함. `Designed, Impact, Hit, Granular, Futuristic, Long`의 2번째 음.
- `Heal01`
	1. `Soundly`에서 가져와서 `Edison`으로 길이랑 피치 조절하고 사용해봄
	2. 킥감이 느껴져서 EQ로 저음 대폭 깎아서 제거
	3. 2트에서 저음을 깎은 걸 보상을 안 해줘서 `3db` 올려줘서 다시 해봤음
		- 소리를 줄인 버전이 더 나아서 2트로 사용. 사실 얘도 겹치면 큰 감이 있다.
	

## 효과음 동시 재생 관리
- 일단 쌩으로 테스트해본 다음에 필요한 부분이 있어보이면 수정하는 방식으로 진행함

- 사전에 기능이 필요할 것 같은 부분
	- 너무 많은 효과음이 동시에 재생되면 소리가 너무 크게 나거나, 깨지거나 하는 등의 이슈가 발생할 것으로 보임
	- 그렇지만 이전 소리를 끊고 다음 소리가 재생되는 건 좀 이상해보일 것 같긴 함

- 일단 2개까지는 겹쳐도 크게 상관 없는데 3개부터는 확실히 크게 느껴짐
- `SoundManager`에서 일괄적으로 관리하면 3개 이상 들려도 되는 소리가 있고 아닌 소리도 있지 않나 싶기도 하다. 결국 체감이 중요할 듯.
	- `ArcaneFieldSkill`의 전기 효과음은 3개 이상 들리지 않아도 상관 없는데
	- 일반적인 `SlashAttack`의 효과음은 더 많이 실행되기 때문에 재생되다가 끊기는 게 어색하게 들리지 않을까? 라는 생각은 듦.

- 일단 같은 음원은 2개까지만 재생되는 것으로 처리함. 이를 위해 `SoundManager`에 `Dictionary<AudioClip, List<AudioSource>>`로 개별 오디오 클립마다 오디오 소스를 관리함



### AudioSource.PlayOneShot() vs AudioSource.Play()
- [[Unity - AudioSource PlayOneShot() vs Play()]]
- `PlayOneShot()`은 `AudioSource`의 메서드로 제어할 수 없다. 쏘고 나면 잊기 때문이다. 
- 제어가 필요하면 `Play()`를 써야 함. 
- 다만 실행 방식에 차이가 있음
```cs
// Clip을 직접 받아서 실행하는 PlayOneShot
source.PlayOneShot(clip)

// AudioSource에 clip을 할당한 다음 실행하는 Play
source.clip = clip;
source.Play();
```

## 버그 수정
- 소리가 겹쳐서 발생하는 상황에서 나중의 소리가 밀리는 듯한 현상이 있음
- 예를 들어서 2명의 적을 `ArcaneFieldSkill`로 때리고 있는데, 스킬이 종료됐으면 때리는 소리가 더 재생되면 안되는 상황임에도 재생이 되고 있음
### 개선 시작
- `Queue`로 재생됐던 걸 `List`로 다시 바꿔봄
- 간헐적으로 발생하는 듯. 나중에 또 발생하면 그 때 처리해보기로 함.
