
## 260121
- 몸이 으슬으슬하다.

>[!done]
>- 기타 이슈 수정
>- `EnemySkillController`, `EnemyAttackController` 구현
>- `Enemy, EnemyBoss` 및 스킬 컨트롤러들 사이의 조율

- 일단 스킬 관련 로직은 `EnemyBossSkill`에 있었기 때문에 이들을 `EnemySkillController`로 이동시킴

- `OnUpdate`와 `UpdateAllCooldowns`을 분리
```cs
// Enemy.Update
// 템플릿 메서드 패턴. EnemyBoss에선 Update를 구현하지 않아도 됨
protected override void Update()
{
	// update 동작 조건 : 전투 중 & 디스폰되지 않음 && 초기화됨 
	if (!IsUpdateValid()) return; 


	base.Update(); // 버프 효과 갱신

	// 행동 제약에 관계 없이 업데이트되어야 하는 요소들 처리
	// 예시) 스킬 쿨다운, 공격 쿨다운
	UpdateAllCooldowns();

	// 공격 시도
	OnUpdateAction();
}

// Enemy의 메서드들 ---
protected virtual void UpdateAllCooldowns()
{
	_attack.UpdateAllCooldowns();
}

protected virtual void OnUpdateAction()
{
	// 공격을 시도함
	bool attacked = _attack.OnUpdate();
	if (attacked) return;

	// 공격을 하지 않았다면 이동
	MoveAlongPath();
}

// EnemyBoss의 메서드들 ---
protected override void OnUpdateAction()
{
	bool skillUsed = _skillController.OnUpdate();
	if (skillUsed) return;  

	base.OnUpdateAction();
}

protected override void UpdateAllCooldowns()
{
	base.UpdateAllCooldowns();
	_skillController.UpdateAllCooldowns();
}
```

> 이걸 `FSM(유한상태기계)`로 전환하는 게 장기적으로 보면 더 낫겠지만 기능을 추가할 게 아니라서 지금은 그렇게 구현할 필요는 없을 듯. 시간만 잡아먹힌다.
