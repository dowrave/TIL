> 문제 상황 : 어떤 원인인지 모를 오류가 발생했다. 정확한 원인을 모르겠어서 과거로 돌아가서 해당 기능`스냅핑`이 잘 동작하는 지점을 찾고, 거기서 스냅핑이 잘 동작하는지를 계속 확인하면서, 현재까지의 변경 사항을 수정하려고 함.

- 로컬 브랜치는 `main`, 원격 브랜치는 `origin`이라고 가정함.
- **현재 작업 중인 에디터는 끈 상태에서 시작하자.**

## 1. 현재 작업 상태 보관
```sh
# 현재 브랜치 확인
git branch

# 현재 상태 커밋
git add .
git commit -m "WIP : 스냅핑 기능 문제 발생, 디버깅 전"
# WIP = Work In Progress
```
> 현재 상태를 명확한 기록으로 남겨둬서 언제든 이 기록으로 돌아올 수 있게 한다.

## 2. 문제의 원인이 된 커밋 찾아내기
- `git bisect`라는 이진탐색 기능도 있지만, 지금 상황에서는 다소 뚜렷한 게 있어서 해당 해시로 이동함
```sh
# 커밋들 확인하기
git log --oneline 

# 해당 커밋으로 이동
git checkout {커밋 해시}
```

## 3. 기능 테스트
- 기존에 동작했던 기능이 잘 동작하는지 진행
- 커밋을 이동하면서 어디서 기능이 동작하지 않는지 파악하면 된다. 그러면 어떤 커밋과 어떤 커밋 사이에 문제가 발생했는지 파악할 수 있다.

> 이걸 자동화하는 게 `git bisect`이며, `git bisect start`, `git bisect [정상 커밋], git bisect[문제 커밋]` 등을 입력하고 각 단계에서 테스트하고 `git bisect good`, `git bisect bad`를 입력해서 범인 커밋을 찾아낼 수도 있음.
## 4. 원인 분석 및 해결 방안 결정
- 범인 커밋을 찾아냈다면 어떤 변경 내용이 있는지 분석한다.
```sh
git show [범인 커밋 해시]
```

1. 간단한 경우라면 `git checkout main`으로 원래 브랜치로 돌아가서 해당 문제만 수정하고 커밋한다. 끝
2. 복잡한 경우라면 문제가 없던 마지막 커밋에서 시작해서, 현재 `main`의 필요한 기능을 가져와 합친다.

## 5. 복잡한 경우 
1. 문제가 없던 커밋에서 새 브랜치를 만든다.
```sh
git checkout -b main-fixed
```

2. 필요한 기능을 다시 구현하거나 가져온다.
	- 코드를 직접 복붙해도 되고
	- `git cherry-pick [가져올 커밋해시]`처럼 구현해도 되는데 내 경우는 전자처럼 진행할 듯.

3. `main-fixed` 브랜치가 정리됐다면, 기존 `main` 브랜치를 삭제하고 브랜치 이름을 `main`으로 변경한다.
```sh
# main 브랜치 강제(대문자) 삭제
git branch -D main
# 앞의 브랜치 이름을 뒤의 브랜치 이름으로 변경
git branch -m main-fixed main 

# 원격에 푸시
# main 브랜치가 달라진 상황이므로 원격 저장소는 바뀐 로컬 브랜치를 그대로 받아들이지 못한다.
# 일종의 덮어쓰기 상황이므로 협업 시에는 팀원 간의 협의가 필요
git push origin main --force 
```


