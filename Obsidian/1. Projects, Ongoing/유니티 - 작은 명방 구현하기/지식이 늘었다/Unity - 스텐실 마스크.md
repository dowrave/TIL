#Unity 

> 이걸 컴포넌트로 구현한 게 `Mask` 컴포넌트이다. `Image`가 함께 있어야 마스킹이 동작함에 유의.


- `스텐실 버퍼` : 픽셀마다 8비트 정수값을 저장할 수 있는 특별한 메모리 공간. 
- `스텐실 마스크` : 스텐실 버퍼를 사용해 어떤 부분을 그릴지 말지를 결정함.

작동 순서
1. 마스크 오브젝트가 먼저 렌더링, 스텐실 버퍼에 특정한 값을 기록한다.
2. 이후 렌더링되는 오브젝트들은 스텐실 버퍼의 값을 확인한다.
3. 설정 규칙(스텐실 테스트)에 따라 픽셀을 그릴지 말지를 결정한다.

- 셰이더 : `UI/Default`
![[Pasted image 20241128222456.png]]
- `Stencil Comparsion`
	- 스텐실 테스트 조건을 설정한다. 아래의 `Stencil ID` 값을 참조한다.
	- `0 - Never` 영원히 픽셀을 그리지 않습니다. 이 옵션은 특정 영역을 완전히 가리는 데 사용할 수 있습니다.
	- `1 - Less`  Stencil 버퍼 값이 참조값보다 작은 경우에만 픽셀을 그립니다.
	- `2 - Equal `Stencil 버퍼 값이 참조값과 정확히 일치하는 경우에만 픽셀을 그립니다.
	- `3 - LessEqual` Stencil 버퍼 값이 참조값 이하인 경우에 픽셀을 그립니다.
	- `4 - Greater ` : Stencil 버퍼 값이 참조값보다 큰 경우에만 픽셀을 그립니다.
	- `5 - NotEqual` Stencil 버퍼 값이 참조값과 다른 경우에만 픽셀을 그립니다.
	- `6 - GreaterEqual` Stencil 버퍼 값이 참조값 이상인 경우에 픽셀을 그립니다.
	- `8 - Always` 항상 픽셀을 그립니다. 이것이 가장 일반적으로 사용되는 기본값입니다.

- `Stencil ID` 
	- 스텐실 테스트에서 비교 대상이 되는 참조 값

- `Stencil Operation`
	- 스텐실 테스트의 성공/실패에 따른 스텐실 값 조작
	- `0 - Keep` Stencil 버퍼 값을 변경하지 않습니다. 단순히 기존 값을 유지합니다.
	 - `1 - Zero` Stencil 버퍼 값을 0으로 설정합니다.
	- `2 - Replace` Stencil 버퍼 값을 참조값으로 설정합니다.
	- `3 - Increment` Stencil 버퍼 값을 1 증가시킵니다. 최대값에 도달하면 값이 0으로 리셋됩니다.
	- ` 4 - Decrement` Stencil 버퍼 값을 1 감소시킵니다. 0 미만이 되면 최대값으로 설정됩니다.
	- `5 - IncrementWrap` Stencil 버퍼 값을 1 증가시킵니다. 최대값을 넘으면 다시 0으로 순환합니다.
	- `6 - DecrementWrap` Stencil 버퍼 값을 1 감소시킵니다. 0 미만이 되면 최대값으로 설정됩니다.
	- `7 - Invert` Stencil 버퍼 값의 비트를 반전시킵니다.

- `Stencil Write Mask`
	- 스텐실 값이 쓰일 때 영향을 받는 비트 마스크. 디폴트는 255로 모든 마스크가 영향을 받음.

- `Stencil Read Mask`
	- 스텐실 값이 읽힐 때 적용되는 비트 마스크. 역시 디폴트는 255.

