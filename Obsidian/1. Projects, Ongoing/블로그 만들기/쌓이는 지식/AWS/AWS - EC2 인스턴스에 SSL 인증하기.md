- **Let's Encrypt**를 사용함

Let's Encrypt 인증서 발급 과정
--
- Let's Encrypt는 무료 SSL 인증서를 제공하는 인증 기관입니다.
- 인증서 발급 과정은 Certbot이라는 도구를 사용하면 간편합니다.
- EC2 인스턴스에 Certbot을 설치합니다. (예: Ubuntu의 경우 `sudo apt-get install certbot`)
- 인증서 발급을 위해 도메인 소유권 검증이 필요합니다. Certbot은 두 가지 방법을 제공합니다:

1.  Webroot 방식: 도메인의 웹 루트 디렉토리에 검증 파일을 생성하는 방식입니다.
2. Standalone 방식: Certbot이 임시로 웹 서버를 실행하여 도메인 소유권을 검증하는 방식입니다.

- Webroot 방식을 사용하는 경우, 다음 명령어로 인증서를 발급받을 수 있습니다:
 ```
 sudo certbot certonly --webroot -w /path/to/webroot -d example.com -d www.example.com
 ```
 `/path/to/webroot`는 실제 웹 루트 경로로 대체하고, `example.com`은 실제 도메인으로 대체합니다.
 
- Standalone 방식을 사용하는 경우, 다음 명령어로 인증서를 발급받을 수 있습니다:
 ```
 sudo certbot certonly --standalone -d example.com -d www.example.com
 ```
- 인증서 발급이 완료되면 `/etc/letsencrypt/live/example.com/` 디렉토리에 인증서 파일들이 생성됩니다.
- 웹 서버 설정 파일에 발급받은 인증서 경로를 설정하고 웹 서버를 재시작하여 SSL 설정을 적용합니다.
- Let's Encrypt 인증서는 90일 동안 유효하며, Certbot을 사용하여 자동으로 갱신할 수 있습니다.

위의 과정을 통해 무료로 SSL 인증서를 발급받고 백엔드에 적용할 수 있습니다.

### 두 방식의 차이

- Webroot 방식:
    - 웹 서버가 이미 실행 중이어야 합니다.
    - 도메인의 웹 루트 디렉토리에 액세스할 수 있어야 합니다.
    - 웹 서버 설정을 변경하지 않아도 되므로 간편합니다.
    - 인증서 발급 과정에서 웹 서버를 중단할 필요가 없습니다.

- Standalone 방식:
    - 웹 서버가 실행 중이면 안 됩니다. (포트 충돌 방지를 위해)
    - 인증서 발급 과정에서 Certbot이 임시로 웹 서버를 실행합니다.
    - 웹 루트 디렉토리에 액세스할 필요가 없습니다.
    - 인증서 발급 중에는 웹 서비스가 일시적으로 중단됩니다.

일반적으로는 Webroot 방식을 권장합니다. 이미 웹 서버가 실행 중이고 웹 루트 디렉토리에 액세스할 수 있다면 Webroot 방식이 더 간편하고 웹 서비스 중단 없이 인증서를 발급받을 수 있습니다.

### 인증서 자동 갱신
인증서 자동 갱신:

- Let's Encrypt 인증서는 **90일** 동안 유효합니다.
- Certbot은 인증서 발급 시 자동 갱신을 위한 Cron 작업을 설정해줍니다.
- 기본적으로 Cron 작업은 매일 실행되며, 인증서 만료일이 가까워지면 자동으로 갱신 프로세스를 실행합니다.
- 사용자가 별도의 커맨드를 입력할 필요는 없습니다. Cron 작업이 자동으로 처리해줍니다.
- 자동 갱신이 제대로 이루어지는지 확인하려면 다음 명령어를 사용할 수 있습니다:
```
sudo certbot renew --dry-run
```
 
- 이 명령어는 실제로 인증서를 갱신하지 않고 갱신 프로세스를 시뮬레이션하여 문제가 없는지 확인합니다.
- 자동 갱신이 실패할 경우 Certbot은 오류 메시지를 출력하고 시스템 관리자에게 알림을 보내도록 설정할 수 있습니다.