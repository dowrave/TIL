- WSL에서 도커의 캐시된 이미지를 정리할 때 용량이 늘어나지 않는 현상이 있다.
```
docker system prune -a
docker builder prune
```
> 캐시된 이미지를 제거하는 명령어지만, 우분투가 설치된 드라이브의 용량은 변하지 않는다.

예전에는 이것 때문에 이미지를 빌드할 때마다 용량이 쌓였고 그래서 우분투를 아예 `unregister`하고 다시 `register`하는 과정을 반복했는데, 250701 기준 이게 왜 그런 건지 궁금해서 AI님께 물어봄.

## WSL2은 동적 확장 디스크를 쓴다
- WSL2의 리눅스 환경을 만들 때, 전체 파일 시스템은 `ext4.vhdx`라는 파일에 저장된다.
- **동적 확장 디스크** : **`ext4.vhdx` 파일은 동적 확장 디스크다. 데이터가 추가되면 파일 크기가 커지지만, 삭제되어도 파일 크기가 줄지 않는다.**
- `unregister` 명령어는 저 디스크 할당 자체를 빼버리는 것이다. 그래서 용량이 확보된다.

방법도 나와 있는데.. `Program Files/WindowApps`에 접근이 안된다. ??? 그래서 gg.

## 참고) 클라우드 / 네이티브 우분투는 곧바로 반영된다.
- 가상화 계층이 없기 때문에 여기서의 `docker prune -a`는 곧바로 남은 용량에 반영된다.
- 가상 머신이 있다면 가상 디스크 파일의 크기는 유지된 채 내부의 파일만 삭제하지만, 없다면 OS가 곧바로 사용 가능한 공간으로 인식할 수 있게 된다.