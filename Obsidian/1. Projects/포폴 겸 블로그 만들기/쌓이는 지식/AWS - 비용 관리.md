- 뭐 쓰지도 않는데 비용이 서서히 오르는 녀석들이 있었다. 어느덧 3$ 정도가 나왔음.
|                                                                    |            |          |
| ------------------------------------------------------------------ | ---------- | -------- |
| Amazon Virtual Private Cloud Public IPv4 Addresses                 |            | USD 0.30 |
| $0.00 per In-use public IPv4 address per hour for EC2 Free Tier    | 119 Hrs    | USD 0.00 |
| $0.005 per In-use public IPv4 address per hour                     | 59.868 Hrs | USD 0.30 |
| Amazon Virtual Private Cloud VpcEndpoint                           |            | USD 2.18 |
| $0.01 per GB for upto 1 PB monthly data processed by VPC Endpoints | 0 GB       | USD 0.00 |
| $0.013 per VPC Endpoint Hour                                       | 168 Hrs    | USD 2.18 |

- Claude Opus와의 대화 요약

### 1. VPC Endpoint Hour
- VPC 엔드포인트는 AWS 서비스에 비공개로 연결할 수 있는 기능입니다.
- 시간당 $0.013의 비용이 부과되며, 사용한 시간에 따라 비용이 청구됩니다.
- 168시간 동안 사용하여 $2.18의 비용이 청구되었습니다.

####  로컬에서 RDS나 Putty로 EC2에 접근하는 경우도 비용이 청구되는가?
- 로컬에서 VPC 내부의 RDS에 접근하여 `mysql` 쉘을 띄우는 것 자체는 VPC Endpoint 요금이 부과되지 않습니다. 이는 일반적인 EC2 인스턴스에서 RDS에 연결하는 것과 유사합니다.
- 로컬에서 Putty를 사용하여 EC2 인스턴스에 SSH 접속하는 것도 VPC Endpoint 요금이 부과되지 않습니다. 이는 일반적인 SSH 접속이며, VPC Endpoint를 사용하지 않습니다.
- 도커 이미지를 EC2 인스턴스에 배포하고 컨테이너를 실행하는 것도 VPC Endpoint 요금과는 관련이 없습니다. 컨테이너 실행 여부와 관계없이 EC2 인스턴스가 실행 중이라면 해당 인스턴스에 대한 비용이 청구됩니다.
VPC Endpoint 요금은 S3, DynamoDB, Kinesis 등의 AWS 서비스와 비공개로 통신할 때 발생합니다. 예를 들어, **S3 버킷에 액세스할 때 인터넷 게이트웨이 대신 VPC Endpoint를 사용하면 해당 요금**이 부과됩니다.

> 아마 예전에 환경변수 관리한다고 **ssm에 관한 엔드포인트를 설정**한 적이 있었는데, 그걸 쓰지 않더라도 유지하는 것 자체에서 요금이 발생한 것으로 보인다. 그거 쓰는 거 결국 포기했는데..
> - 아무튼 그런 것 같아서, **이전에 설정했던 엔드포인트를 삭제**했음.

```
인터페이스 엔드포인트를 사용하면 다음과 같은 요금이 부과될 수 있습니다:

1. VPC Endpoint 요금: 인터페이스 엔드포인트를 생성하고 사용하는 시간에 따라 요금이 부과됩니다. 시간당 $0.01의 비용이 발생합니다.
2. 데이터 처리량 요금: VPC 엔드포인트를 통해 전송되는 데이터 양에 따라 요금이 부과될 수 있습니다. AWS 서비스로 전송되는 데이터는 무료이지만, AWS 서비스에서 수신하는 데이터에 대해서는 GB당 요금이 부과됩니다.
```

### 2. In-use public IPv4 address per hour

- In-use public IPv4 address는 EC2 인스턴스에 할당된 퍼블릭 IP 주소를 의미합니다. EC2 인스턴스를 시작할 때 자동으로 할당되는 퍼블릭 IP 주소로, 인스턴스가 실행 중인 동안 해당 IP 주소를 사용할 수 있습니다.

- S3 버킷에 웹 호스팅을 설정하는 것은 In-use public IPv4 address 요금과는 직접적인 관련이 없습니다. S3 버킷은 별도의 서비스이며, **웹 호스팅을 위해 S3 버킷을 구성하는 것 자체에는 추가 비용이 발생하지 않습니다.** 다만, S3 버킷에 대한 데이터 전송량이나 요청 수에 따라 S3 서비스 요금이 부과될 수 있습니다.

In-use public IPv4 address 요금은 주로 다음과 같은 경우에 부과됩니다:
- EC2 인스턴스에 할당된 퍼블릭 IP 주소를 사용하는 경우
- NAT 게이트웨이에 할당된 Elastic IP 주소를 사용하는 경우
- Elastic Load Balancer(ELB)에 할당된 퍼블릭 IP 주소를 사용하는 경우

#### EC2 인스턴스에 할당된 퍼블릭 IP 주소를 사용 이라는 말의 의미
- EC2 인스턴스를 만들고 유지했다고 해서 요금이 나오는 게 아니다
- 해당 **IP 주소를 통한 데이터 전송에 대해 데이터 요금이 부과**될 수 있다는 의미.

### 3. WAF 관련
- 나는 WAF라는 걸 듣도보도 못했는데 요금이 청구되고 있음
- Cloudfront가 WAF와 통합된 서비스이기도 함. 그래서 비용이 나온 듯.
	- 클라우드 프론트는 연결된 Origin이 삭제되지 않는 한 삭제는 불가능한 듯 하다. 비활성화만 해놨다.

### 4. 기타 비용 청구가 가능한 상황

- **외부 인터넷에서 VPC로 데이터가 들어오는 경우(인바운드)는 비용이 무료**
- **VPC에서 외부 인터넷으로 데이터가 나가는 경우(아웃바운드)에는 비용이 발생할 수 있다.**
	- 프리티어의 경우 어느 정도 까지는 무료일 수 있다
