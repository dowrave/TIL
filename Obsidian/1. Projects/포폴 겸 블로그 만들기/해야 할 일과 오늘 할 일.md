
## 해야 할 일
- 진행 순서
	1. 전체적인 스타일 다듬기 - Responsive(화면 크기에 따른 레이아웃 정리)
	2. `Work - Info & Projects`에 자기 소개 및 프로젝트 나열

## 할 수도 있고 안할 수도 있음
- `WritePost`
	- 글을 수정할 때, 기존에 작성된 글이 있는 상태에서 `ctrl + z`를 누르면 내용이 다 사라지는 이슈
- `PostDetail`
	- 코드 복사 기능) 호버 시 아이콘 변경 & 애니메이션 추가

## 하는 중


# 날짜 별 한 일
## 24년 2월

### 230221
- 로그인 유지 기능 구현 계속


### 230220
- 새로고침 시 로그인은 유지되지만 관리자에게만 보이는 기능이 사라지는 문제가 있음
	- `Redux`에서 `관리자 상태` 또한 관리하고 있기 때문인데, 이걸 다른 방식으로 바꿔야 할 필요가 있음 - 새로고침 시 초기화 문제 & 보안 문제
	- [[★복합 - 리프레시 토큰 안전하게 보관하기]] : 로그인 관련 로직들을 다 뜯어봐야 하는 과정이 되었다. 간단할 것 같은데 은근 머릿속이 복잡해져서 내일 계속함

### 240219
- `SignIn.tsx` : 별도의 URL로 구현한 페이지 -> Navbar의 **컴포넌트로 변경**
- `SubsectionCustomizer` : `Section` 별로 한꺼번에 관리할 수 있는 페이지를 별도로 구현함
	- 한꺼번에 Post 보내고 정리하는 과정에서 생각보다 애먹음

### 240216
- 전체적인 페이지 다듬기 & 반응형 디자인 적용하기

### 240215
- `ArchivePage`
	- 프론트엔드 URL 구성 
		- 연, 월, 일을 구현하려고 한다면 **URL은 아래처럼 구현**하는 게 맞겠다
			- 연 : `YYYY`
			- 월 : `YYYY-mm`
			- 일 : `YYYY-mm-dd` 
		- 그러면 `useParams`에 쓰일 날짜를 `date`로 통합하고, URL에 보낼 값으로 가공하는 과정이 들어가줘야 함
		- 배열 내에 객체를 사용할 떄 map 함수를 쓴다면, key 값은 존재하는 값이어야 함(별칭을 사용할 수 없음) - [[TS - map 함수]]
	- `ActivityChart`
		- 1월 1일에 데이터가 표시되는데 막상 아카이브 페이지에 들어가면 아무 것도 뜨지 않는 문제 수정
			- 원인) 2월 1일의 데이터가 표시되는 것으로, 시각화 시 백엔드의 조회 조건을 수정함
		- 서식 `%Y-%m-%d` vs `%y-%m-%d` 맞춰야 함 -> `ArchivePage`의 조건도 바꿔야 함
		- 얼추 된 듯?


### 240214
- `ActivityChart.tsx`
	- 어제 발생했던 문제 해결 - 백엔드로 `api/blog/archive?archive=`로 요청을 보냈어야 했는데 `api/blog?archive=`로 요청을 보냈기 때문에 오류가 발생했음
	- 전체 아카이브 페이지 구현 완료
	- "일" 단위의 아카이브 페이지..는 굳이 만들어야 할까? 싶지만 그냥 만들자. 내일은 "일", "월" 단위를 만들기로 함.

### 240213
- `ActivityChart.tsx`
	- 일, 월, 전체 아카이브 페이지 구현하기
	- [[Django - annotate]]
	- 오류) URL 연결 과정 : 백엔드 - AssertionError: Expected a `Response`, `HttpResponse` or `HttpStreamingResponse` to be returned from the view, but received a `<class 'NoneType'>` 에러 발생
### 240211
- `ActivityChart.tsx`
	- 차트에 `월, 요일` 단위 추가하기 
	- `월`은 쉽게 구현되는데, 요일의 경우 계산이 꼬이더라도 `grid-rows-8`로 해서 다시 생각해보자.
		- `JSX` 내부에선 `for` 문 작성이 불가능.
	- 요일도 구현 완료




### 240208
- `ActivityChart.tsx`
	- 호버되는 박스가 z-index를 적용했음에도 기존 박스보다 더 낮은 우선순위로 렌더링 되는 현상 해결 [[CSS - z-index와 스택 컨텍스트]] - 정확히 이해하진 못했고(원인은 똑같아 보여서) 어떤 방식이 통했는지만 정리해둔다.
	- 말풍선 
	- 말풍선이 `div`요소 내에서 짤리는 문제 해결(부모 요소에 `overflow-visible` 지정...)


### 240207
- `ActivityChart.tsx`
	- 1. 깃허브처럼 일 단위로 구성된 박스들을 만듦
		- 시작 요일을 `Date.getDay()`로 구해서, 처음 며칠은 빈 상자를 만듦
	- 2. 각 박스는 호버 시 날짜와 글의 갯수를 알려주며, 클릭 시 해당 날짜의 아카이브 링크로 연결됨. 아래의 '주'나 '월'도 호버와 클릭 규칙은 동일하게 구성.
	- 3. 한 열에 7개씩 박스를 만듦. 각 열은 '주' 단위임
	- 4. 그 아래에 '월' 단위의 X축 Label을 넣음. '주'는 '월'의 부분 X축 Label이 되는 개념.
	- 5. 색은 `work` 및 `hobby` 각각의 카테고리 색상에 맞춘다.
- 위를 구현해본다. 어디까지 할 수 있을진 모르겠다
	- 호버되는 박스가 z-index를 적용했음에도 기존 박스보다 더 낮은 우선순위로 렌더링 되는 현상이 있음.


### 240206
- `MainPage.tsx`
	- 아카이브 박스 만들기 
		- 혹은 이걸 더 세련되게 메인 페이지에는 시각화만 넣고, 별도의 카테고리 별 아카이브 페이지를 만들어서 위처럼 구현하는 것도 괜찮겠다. <-- 이걸 구현 중인데 오늘은 왤케 집중이 안됩니까?


### 240205
-  각 `Category`의 `Home` 메뉴 구성
	- 게시글 박스를 만드는데, 최근에 작성한 글 순서로 최근 5개의 글을 화면에 표시
	- 게시판 종류별로 박스가 있으며 개월 단위로 정리한 아카이브도 포함시킨다
- `PostList`
	- 게시글에 있는 각 소분류에 스타일을 지정하고 링크를 추가함
		- 팁) Link에는 자체 스타일이 있기 때문에 Link 내부에 div나 span 태그를 이용해서 스타일을 지정해야 한다.

#### 세부 내용
- 각 카테고리의 `Home` 메뉴 구성
	- 각 `Category`에는 `Section`이 있다 : 그러나 테이블로 관리되는 개념은 아님 - 그 수가 적기 때문에 하나하나 직접 관리하고 있기 때문이다. **`Category` 및 그 속의 `Section`들은 프론트엔드에서만 관리 중**
	- `map`이나 `forEach` 함수를 사용할 때, 반환값이 있다면 `{}`이 아니라 `()`을 써야 한다. 안 그러면 렌더링이 안됨.

### 240202
- 소분류 커스터마이징 제작
	- `Redux`를 통해 상태 관리함
	- **금방 끝낼줄 알았는데 생각보다 걸렸다. 밖엔 축구하는데 나는 이거 두드리고 있음.**
### 240201
- 이미지 크기 수정 기능 넣기

#### 세부 내용
- 이미지 & 동영상 크기 수정 기능 넣기 : 너무 길을 돌아간 느낌이다. ㅋㅋㅋ
	- 직접 구현할 생각이었는데 있다. `quill-image-resize-module-ts`
	- `WritePost`
		- **기존) 이미지 업로드 시 바로 백엔드와 통신 후 그 링크를 받아옴**
		- (X)변경) 이미지 업로드 후 이미지 크기 변경 기능을 추가하고, 이미지를 백엔드로 전송하는 건 작성 버튼을 누른 시점으로 변경
			- 이슈 발생 
				1. 여러 이미지를 업로드하면 프론트엔드에서 글을 추가로 작성 시 버벅이는 문제
				2. 백엔드에서도 `django.core.exceptions.RequestDataTooBig: Request body exceeded settings.DATA_UPLOAD_MAX_MEMORY_SIZE.` 문제가 발생한다.
				- 검색해보면, 애초에 이미지를 `base64` 형태로 프론트엔드에 두지 않고 **서버에 업로드한 뒤 그 링크를 받아오는 형태로 구현하는 게 성능 이슈가 있기 때문**이다.
			- 따라서 기존 방법을 유지하고, 백엔드에서 받아온 URL에 아래의 코드만 추가하는 방식으로 구현했다. 이미지 크기 변경과 글 작성 시 렌더링 모두 잘 나오는 듯 함. 최소한 이미지 2~3개 올리고 버벅이는 현상은 사라짐.
```tsx
                    const imageElement = editor.scroll.domNode.querySelector(`img[src="${imageUrl}"]`);

                    if (imageElement) {
                        imageElement.setAttribute('data-resizable', 'true');
                    }
```

## 24년 1월
### 240131
- (완)나무위키 헤더 표시 따라하기 
- (완)PostDetail : 코드블럭 우측 상단에 코드 복사 기능 구현

### 240130
- 나무위키 헤더 표시 따라하기
#### 세부 내용
- PostDetail
	- `HeaderLinkBox` 수정 : 오른쪽에 헤더 링크 박스 대신 회색 점 및 마우스 오버 시 헤더의 이름이 들어간 태그 출력, 이를 클릭 시 해당 헤더로 스크롤 이동 구현 완료
	- 코드 복사 기능 구현 : 우측 상단에 언어 이름이 뜨고, 클릭 시 `복사되었습니다!`라는 메시지와 함께 클립보드로 복사됨.
	
		
### 240129
- PostDetail 수정
- WritePost 수정

#### 세부 내용
- PostDetail 
	- (완)헤더 위치 스크롤 구현
	- 헤더 펴고 접는 기능 구현하기
	- 코드 블럭 우측 상단에 코드 복사 기능 구현
- WritePost
	- 이미지, 동영상 크기 편집 기능 구현

### 240126
- QuillRead 코드 블럭 커스터마이징하기(X)
	- **QuillRead는 쓰지 않습니다. 백엔드에서 불러온 HTML을 그대로 씁니다.**
	- 추가) **`QuillRead`를 제거하면서 헤더 표시 기능이 사라졌다. 다시 만져야 함.**
	- 추가2) 우측 상단에 코드 복사 기능도 넣어야 함!!!


#### 세부 내용
##### QuillRead 코드 블럭 커스터마이징하기
- 이슈1) 프론트엔드에서 작성한 글에 하이라이트가 적용되었을 때, 백엔드에 전달이 잘 되고, 다시 글 읽기로 불러올 때도 전달이 잘 되지만, **ReactQuill에 넣는 과정에서 `<pre>` 태그 내부의 `<code>` 정보와 `<span>` 정보가 유실되는 문제가 있음.**
	- 애초에 글을 작성할 때 `code` 태그 내부에 언어 이름이 들어가기 때문에 이를 살릴 필요가 있다 : 이왕이면 백엔드에서 들어오는 정보가 거의 그대로 보존되면 좋고.
	- 기본적으로 `quillRead` 값에 따라 `delta` 값이 아예 달라진다. 
	- .. 오래 헤맨 결과, **`delta`에서는 기본적으로 `code` 객체나 `span` 객체가 보존되지 않는다.**(quill 객체 내부에 span 객체를 dangerouslypastehtml로 넣으면 code 태그로 나타난다.). 시간을 들이면 커스텀 블랏으로 해결할 수도 있겠는데, 그것보다는 기존의 `code-block` 기능을 이용하기로 한다.
- 개선하기)
	- 기존 `React-Quill`의 `code-block`을 이용한다.
		- `formats`을 아예 지정하지 않거나, 명시적으로 지정한 상황에서 `code-block`은 활성화되는데, 이 `formats`에 따라 `editor.getContent()`로 얻는 데이터도 달라진다.
		- `React-Quill`에서 **가공되기 전에는 htmlContent가 보존된다.** 현재 프론트엔드에서 글을 작성한 뒤 백엔드로 보낼 때, `delta` 객체로 보내지 않고 `HTML`로 보내고 있다. 따라서, 백엔드에서 **다시 프론트엔드로 받아올 때도 프로그래밍 언어가 보존되는 상황**이므로, 이를 이용하면 커스텀 블랏 처리 없이 `pre` 태그 내부에 글을 작성할 때와 비슷하게 `code` 태그 및 하이라이트 처리를 할 수 있을 것 같아 시도해봄.
	- **그냥 글을 읽을 때는 `React-Quill`을 안 쓰고 `<div dangerouslySetInnerHTML={{ __html: post.content }} />`로 가기로 했다.**
	- 스타일도 `quill.snow.css` 적용함.
	- 약간 불편한 거는, 수정할 때는 다시 `QuillEditor`를 거치기 때문에 코드 하이라이트가 초기화된다. 근데 이거 할 수도 있을듯?



### 240125
- QuillEditor 코드 블럭에 Highlight.js 적용하기

#### 세부 내용
#####  QuillEditor 코드 블럭에 Highlight.js 적용하기 
1. 하위 컴포넌트에 content를 작성한 뒤, 상위 컴포넌트의 title이나 subsection 상태의 변경이 일어나면 content 부분이 초기화되는 현상이 있었다. 
	- [[ReactQuill - 상위 컴포넌트 상태 변경에 의한 하위 컴포넌트 리렌더링 막기]]에 정리
2. 일단 **pre 태그 내에 code 를 넣고, 이 안에 하이라이트 처리하는 것까지는 성공**했다. 나머지는
	- 우측 상단에 프로그래밍 언어 이름을 넣고, 마우스를 이용해 그곳에 마우스 오버 시 복사 아이콘이 뜨고, 클릭 시 클립보드에 복사하는 기능 구현하기
	- ReactQuill에서 지원하는 pre 태그로 만드는 배경과 동일시하기
		- `pre.ql-syntax code.hljs`에 `pre.ql-syntax`에 있는 요소를 복붙했다. 그냥 `code.hljs`로 하면 적용 안됨.
	- [[CSS - 폰트 나열하는 이유]]
	- 코드 블럭 탭 키 = 스페이스 4개 적용 완료(에디터 전체)
3. 테마 이상하게 적용되는 문제 수정 완료
4. 현재 `code-block`을 작성하고, 이로 생성된 `pre` 태그가 있다. 이를 탈출할 때 `<p><br>""</p>` 같은 태그가 생기는데, 이 태그를 제거하면 생성한 코드의 마지막 줄의 하이라이트가 제거되는 문제가 있다.
	- 어차피 재적용하려면 맨 윗줄에 프로그래밍 언어를 다시 적어야 하므로 당장 크게 이슈가 될 건 없어서 넘어간다. 왜 저게 생기는지도 모르겠고.
5. **글 보기 기능에서 구현할 것들**(진행중...)
	1. 현재, 글을 보는 기능에서는 위에서 작성한 `code` 태그가 정상적으로 나타나지 않는 문제가 있다. 이를 다루기 위해 글을 저장할 때 작성한 HTML 태그 모두가 넘어가도록 다시 수정해야 함.
	2. 적용된 하이라이트의 언어를 이용해 프로그래밍 언어를 코드블럭 우측 상단에 띄우고, 그곳에 마우스 커서를 갖다 대면 복사 아이콘으로 바뀌며, 이를 클릭 시 코드블럭의 내용을 복사할 수 있도록 구현할 거임


### 240124
- QuillEditor: 코드 블럭에 Highlight.js 적용하기(fail..)

#### 세부내용
- QuillEditor: 코드 블럭에 Highlight.js 적용하기
	- `ReactQuill`에서 제공하는 코드 블럭이 좀 활용하기 힘든 면이 많아서, 프로그래밍 언어를 제공하는 역할만 하게 하고 싶다. 
		- `코드 블럭 생성 -> pre.ql-syntax 내부에 highlight.js에서 인식하는 프로그래밍 언어 입력 -> pre.ql-syntax를 제거하고, 새로운 pre태그 및 내부에 code 태그를 넣음
		- 근데 위처럼 할거면 **차라리 코드블럭을 생성할 때 어떤 언어를 사용할 건지를 인식하는 편이 더 명료하고 구현하기도 쉬워보임.** 왠지 예전에도 비슷한 말을 썼던 기분이?
	- 여기서 더 나아가면 우측 상단에 클립보드로 복사하기 같은 기능을 구현할 수 있을지도?



### 240123
- `WritePost`: `CreatePost`와 `EditPost` 통합
#### 세부내용
- [[Typescript - 함수 내 에러 처리]]
- [[Typescript - type과 interface의 차이점]]
##### `WritePost`: `CreatePost`와 `EditPost` 통합
  - 기존에 CreatePost와 EditPost가 분리되어 있었는데, 같은 컴포넌트를 쓰게 하고 받는 인자만 다르게 설정하면 좋을 것 같음 
	  - 고려 사항 
	  - PostDetail -> EditPost로 넘어갈 때, 기존에 받아온 Post 데이터를 사용하는가? 아니면 백엔드에서 데이터를 다시 받아오는가?
		  - EditPost는 글 작성자만 접근 가능하고, PostDetail은 모든 사용자가 접근 가능하므로 새로 백엔드에서 데이터를 받아오는 게 더 나아 보인다.
	- 생성과 편집을 구분하는 기준은 `slug`를 파라미터에서 가져오느냐 아니냐로 판단했음.



##### QuillEditor + Highlight.js 
- Highlight.js가 자동으로 언어를 찾아서 인식하는 것보다, 마크다운처럼 `유저가 코드블럭 생성 -> 첫줄에 언어 입력 -> 언어 입력을 인식해서 highlight.js에서 해당 언어를 찾음 -> 해당 코드블럭 전체에 해당 언어로 된 highlight.js 입력` 같은 기능을 구현하고 싶음.
- 오늘은 머리 터져서 gg : 

### 240122
- **헤더 위치 스크롤 링크 만들기**(해결) 마참내!
#### 세부 내용
##### 헤더위치 스크롤 링크 만들기
- [[★React + Quill - ReactQuill의 렌더링이 사라지는 이슈]] : 여기에 정리해뒀다. 며칠 동안 골머리를 앓았죠? `useCallback`과 `React.memo`를 기억해둡시다.
- 그 다음 이슈 : 새로고침이나 편집기에서 저장 버튼을 누르면 링크가 뜨지만, 처음에 글을 클릭해서 들어갔을 때는 링크가 뜨지 않는다. [[React - useState vs Redux]] 여기에 정리해뒀음.

### 240119
- 오늘도 헤더위치 잡는거 실패함 ㅋㅋㅋㅋㅋ아 뭐가 문제냐
#### 세부 내용
- **글 헤더 위치 링크 생성하기**
	- 일단 ReactQuill이 정상적으로 렌더링되지 않는 상황은, 이를 이용하는 컴포넌트에서 `useState`를 이용해 정의한 상태의 변경이 발생했을 때 나타났다. 
		- 이는 아무 의미도 없는 상태를 설정한 뒤 바꿔도 동일했음.
		- 상위 컴포넌트든 하위 컴포넌트든 크게 상관 X
		- 단 `setPost`를 이용한 `fetchData`는 영향이 없었다. `useEffect(() => {}, [])`으로 페이지가 초기에 렌더링될 때만 작동하는 함수라서 그런가? 아니면 `async, await` 함수라서 그런가?
	
	

### 240118
- `해야 할 일 - 진행 순서` 순으로 앞으로 할 일을 정리해뒀다.

#### 세부 내용
- **글 헤더 위치 링크 생성하기**
	- 리액트를 공부하기로는, 상위 컴포넌트에서 하위 컴포넌트로 상태를 전달하고, 상태를 변경하는 함수도 같이 전달한다고 했다. 근데 하위 컴포넌트에서 불러오는 상태가 완료되면 이를 상위 컴포넌트에 알려주는 변수`isLoading` 및 함수`setIsLoading`를 만들어서 전달하는데, `useEffect`에서 `setIsLoading`을 이용해 `isLoading`을 바꾸면, `ReactQuill` 에디터가 렌더링되지 않는 현상이 있다. 외않되???? <--- 후

### 240116
- **소분류 게시판 구현 완료**
	- `subsectionBox` 기능 구현 완료
	- `Navbar`에 관련된 전체 레이아웃`Layout.tsx`과 글을 보는 뷰(`PostViewLayout.tsx`) 분리
	- 페이지네이션 링크도 수정 완료(URL 이슈)
- 글의 헤더 위치를 화면 오른쪽에 표시하고, 해당 위치로 스크롤하는 기능 구현 ㄱㄱ
	- 다시 ReactQuill과 싸우기 시작. delta를 잘 다뤄야 하나?

#### 세부 내용
- 다른 URL에서 같은 컴포넌트를 쓰고 인자를 다르게 받는 경우, 자동으로 렌더링이 업데이트되지 않을 수 있다. -> `useEffect`로 바뀌는 인자를 의존성 배열에 추가해준다.
- [[Django - URL과 슬래쉬]]


### 240115
- **로그인 이슈(로그인 중 새로고침 -> 로그아웃, 로그아웃 중 새로고침 -> 로그인) 해결**
- **로그인 리다이렉트 페이지는 현재 카테고리의 홈으로 수정**
- **subsection 글 리스트 만드는 중...**
#### 세부 내용
- 로그인 유지 관련 
	- 로그인 중에 새로고침을 누르면 로그아웃되는 문제, 로그아웃 중에 새로고침을 누르면 이전에 로그인했던 계정으로 들어가는 문제 모두 해결(`App.tsx`)
- Signin 후 리다이렉트되는 페이지를 Navbar의 Category에 맞는 Home으로 이동하도록 수정
	- 기존에 `useState`로 관리되는 상태를 Redux를 이용해 `useSelector`와 `useDispatch`를 이용해 수정하도록 재구성했음.
- `Subsection`에 따른 글 리스트 만들기
	- 백엔드에는 `PostListView`에 `subsection`이 들어오는 경우만 추가로 구현해주면 됨
	- 프론트에는 왼쪽에 해당 `게시판/섹션`에 따른 `subsection`과 글의 개수를 보여주고, 해당 `subsection`을 클릭하면 그 소분류를 가진 글만 보여준다.

### 240113

#### 세부 내용
- (X)토큰 저장 위치 변경
	- 액세스 토큰 : 로컬 스토리지 -> 메모리 or 세션 스토리지(휘발성)
	- 리프레시 토큰 : HttpOnly 쿠키 (XSS 공격으로부터 보호가 목적, 100% 보호는 불가능)
	- 이거 너무 복잡해진다. 일단 오늘 변경사항 이전으로 돌리고 DeletePost만 구현하겠음;
- DeletePost 구현 완료(인증까지)
### 240112
- **`EditPost` 구현 완료**
- **토큰 재발급 구현 완료**
- **405 에러 해결 완료**
#### 세부 내용
- 액세스 토큰 만료 후에도 정상적으로 리프레시 토큰을 이용해 액세스 토큰을 재발급받지 못하는 문제 해결 필요
	- 현재 이거 처리 중. 백엔드의 `TokenRefreshView`에서 보내는 Response를 이상하게 처리했을 가능성이 높음. -> 왜인지 모르겠는데 해결됨;
- `CreatePost`에서 `405` 에러가 갑자기 발생한다. 
```python
	re_path(r'^post/(?P<slug>[\w-]+)$', PostDetailView.as_view(), name='PostDetail'),
    re_path(r'^post/create$', PostCreateView.as_view(), name='PostCreate'),
```
> - `urls.py`가 이렇게 정의되어 있었는데, 이 경우 `PostCreate`에 대한 요청을 보냄에도 `create`라는 단어를 슬러그로 봤기 때문에 해당 에러가 발생한 것이다.
> - 따라서 `post/create`를 `post/slug`보다 위로 올려야 함.
> 추후에 다른 종류의 충돌이 발생할 수도 있으므로, `detail`을 아예 따로 추가해뒀다.
```python
    re_path(r'^post/create$', PostCreateView.as_view(), name='PostCreate'),
    re_path(r'^post/detail/(?P<slug>[\w-]+)$', PostDetailView.as_view(), name='PostDetail'),
```
> - 이거 안 번뜩였으면 ㄹㅇ 해결 못했겠는데 ㅋㅋㅋㅋㅋㅋㅋ

- `EditPost.tsx`
	- 제목을 수정할 경우, 프론트엔드와 백엔드 모두에서 슬러그를 수정해야 할 것이다.
	- 기존엔 `PostSerilalizer`로 구현하고 그 안에 `create`와 `update`로 분리해서 관리했는데, 양쪽에 필수적인 필드가 다르기도 하고 해서 **Serializer 자체를 분리하기로 했다.**

### 240111
- 일단 렌더링 기능 자체의 문제는 `highlight.js`을 적용하는 것과 관련있어 보임. `onChange`가 문제인가? 싶었는데, 다르게 추적해보니 `syntax` 부분을 주석처리하면 정상적으로 작동하는 것을 확인할 수 있었음
	- **이 부분 수정이 생각보다 어려워서 다시 뒤져보는 중...**

- EditPost 구현
	- (완료)PostDetail, EditPost 백엔드 URL 수정 중


### 240110
- EditPost
	- setContent로 불러온 내용이 QuillEditor에 전달되지 않는지, QuillEditor의 렌더링 자체가 되지 않는 현상이 있다. 수정 방법을 알아보는 중.
	- (완료) `subsections` 또한 `createpost`와는 약간 다르게 지정해야 한다. 이미 있는 걸 가져오는 거니까 선택 박스를 디폴트로 놓아야 함 
	- 직접 입력 / 있는 것 중 선택 버튼을 글씨 대신 아이콘을 넣어 통합하자
	- ☆글 내용이 바뀔 때마다 **`setContent` 등 useState를 사용하는 경우, `QuillEditor`가 아니라 상위 컴포넌트로 뺀다.** (`CreatePost, EditPost` 등) <-- 이거 해결 안돼서 골머리앓는 중


### 240109
- 로그인한 상태에서만 작동 가능하게 하기 
	- ★`MyUser`의 `__str__` 부분이 닉네임임 (일반적으로 아이디를 의미하는 `username`이 아님)
	- `PostList` - 글쓰기
	- `CreatePost` - 링크를 별개로 타고 들어가는 경우, 로그인하고 들어간 뒤 로그아웃하는 경우
	- `PostDetail` - 수정, 삭제 버튼 활성화(이건 그 게시글을 작성한 사람만 보이게)
- 로그인 시 발급받는 JWT 토큰에는 유효 시간이 있다. 이 시간이 지나면 백엔드에 로그인한 상태로 요청을 보내더라도 권한이 없다는 오류가 뜸. 기존엔 설정안했더니 터무니없이 짧았음;
	- `django`의 `settings.py`에서 `SIMPLE_JWT` 항목에서 발급하는 토큰의 유효 시간을 설정해줄 수 있다. **근데 6시간으로 적용했는데 계속 5분으로 나옴. 뭐지????** 
	- 해결 : [[복합 - 로그인(인증)이 필요한 기능 구현하기]] 참조. 
		- 전체 과정을 질문하고, **리프레쉬 토큰**이라는 것을 배우고 적용해서 알았다.
- `utils/getAccessToken.tsx` 구현
	- 액세스 토큰의 유효 시간이 지나면 갱신해줘야 하므로, 해당 로직도 구현해줘야 한다. -> **프론트엔드에서 리프레쉬 토큰을 백엔드로 전달하고, 백엔드에선 뷰를 따로 구현하지 않고 불러오기만 해서 연결**해주면 됨.
	- 해당 컴포넌트는 유효 시간이 지나지 않았다면 그대로 로컬 스토리지의 값을 이용하고, 지났다면 백엔드에서 다시 받아온다. `async` 함수이므로 받아온 값을 이용하려면 함수 앞에 `await`를 붙여준다.

### 240108
- NavBar - Login 위치 변경
- Index.css - form-input에 자주 쓰는 css 통합
- SignIn.tsx - 로그인 구현
	- 로그인 상태 관리 작업 -> Redux 사용 시작
	- **그럼 로그아웃도 만들어야겠네?** -> Json Web Token(JWT)을 이용할 경우, 백엔드에 로그아웃 로직은 구현하지 않아도 된다. 프론트엔드에서 토큰만 제거하면 됨
		- 만약 세션을 추적해서 사용자의 패턴을 분석하고 싶다면 JWT 대신 다른 방법을 써야 한다.
		- 근데 내 블로그의 경우는 나중에 구글 애널리틱스를 달 걸 생각했을 때, 구글 애널리틱스는 로그인과는 별개로 작동하기 때문에 JWT로 구현해도 괜찮을 것 같다.
- 로그인 상태 관리) 새로고침 시 로그인 정보가 날아가는 거 수정(App.tsx 및 로그인 기능에 구현)
- SignUp
	- `onMouseUp` 부분 제거 및 `useEffect`에서 `window.addEventListener('mouseup', handleMouseUp);`을 이용하기로 함
	- `onMouseDown, onMouseUp`으로 비밀번호 보이기 on/off 를 구현하면, 클릭한 채로 `input` 태그 밖으로 커서를 빼면 비밀번호가 보이는 상태를 유지하게 되기 때문
	- 따라서 이를 처리하기 위해 페이지 전역에서 상태를 관리한다.

### 240106
- SignUp
	- 이메일 인증 기능
		- 프론트엔드에서 유효성(형식) 검사 -> 백엔드에서 중복 검사
		- 통과 시 해당 메일로 6자리 숫자 코드를 보내고, 백엔드의 인증 테이블에 이메일과 코드, 생성 시간을 저장
		- 프론트엔드는 인증 버튼 클릭시, 새로운 `input`이 나타나서 인증 코드 6자리를 입력함
		- 다시 백엔드에서는 인증 코드 6자리가 테이블에 있는 이메일, 코드 및 5분 이내의 시간과 일치하는 지 확인
			- 5분이 지난 경우, 자동으로 청소하도록 `django-background-tasks`을 설치 및 `tasks.py`에 구현... 하려고 했는데 그냥 인증 요청이 들어올 때마다 정리하는 걸로.
		- 모두 통과시 submit 버튼 활성화 조건 중 하나 만족
	- 닉네임 어떻게 처리할까? - 걍 2~6자 / 필수 입력 / 유니코드 문자, 숫자 가능하게 함
	- **SignUp이 이렇게 오래 걸릴줄은 몰랐네요;** 오늘 잠깐 할 생각이었는데 벌써 7일 새벽2시임

### 240105
- SignUp.tsx 
	- 1월 4일 - `input` 태그가 `focus`이면서 `valid`일 때 `style`이 바뀌어야 하는데 안바뀌는 이슈 해결해야 함
	- `border`가 있고, `outline`이 있음. [[tailwind CSS - border와 outline]] 참고
	- id 유효성 & 중복 점검 및 그에 따른 스타일 변경 : 언제 초록색과 빨간색으로 바꿀까?
		- 그냥 `idAvailable` 변수를 정수로 다루자
			- `0` : 유효성 통과 X
			- `1` : 유효성 통과 O / 중복 통과 X
			- `2` : 유효성, 중복 통과 
- 백엔드 
	- 백엔드에서 관리하는 `id`와, 사용자가 직접 입력하는 `username` 항목을 분리함
	- `SubsectionSerializer`를 분리했음 - `create`의 경우, 프론트엔드에서 소분류를 만들 때 에러가 발생했는데 필드 이름을 `name`으로 안하고 `subsection`으로 해서 발생한 문제


### 240104
- SignUp.tsx
	- 실시간 피드백 구현하는 중


### 240103
- App.tsx의 라우터 구조 변경
	- Navbar.tsx가 모든 경로(로그인 , 회원 가입, NotFound)에도 적용되게 변경
- 로그인 기능 구현 시작
	- 백엔드에 user 관련 앱 만듦
	- 프론트엔드에도 로그인 페이지 만듦

### 240102

- 게시글 조회 : id -> slug로 변경하기
	- **특수문자만으로 제목을 만든다면, 슬러그로 표시되는 건 아무 것도 없다.** `???`로 제목을 작성한 글 링크가 타지지 않는 걸 보고 알았네 ㅋㅋㅋ
	- 수정) 슬러그의 중첩을 방지하고자, 제목을 슬러그화했을 때 겹치는 슬러그가 있다면 뒤에 `-번호`를 붙임 - 슬러그는 링크에 쓰이기 때문에 `unique`해야 한다.
- `try - error` 부분들 - 에러 발생 시 `catch (e)`로 잡았다면, `e.message`를 해야 표시된다.
  - 내용을 HTML로 잡기 때문에 빈 공간임에도 p태그가 존재해서 글이 생성되는 경우가 있었음. 수정.

### 240101
- PostList(수정 완료)
	- 미리보기 기능이 제대로 적용되지 않는 현상이 있음 : 백엔드에 저장된 HTML 태그를 파싱하는 과정에서 일어나는 문제
	- **텍스트를 가공하는 기능을 백엔드에 구현함** : 그 중에서도 `PostList`에만 사용할 것이기 때문에 `views.py`에 구현함. 이외에도 `serializers.py`에 구현하는 옵션도 있다.


## 23년 12월
### 231230
- WritePost
	- Content가 담기지 않는 문제가 있다. -> 수정 완료 : `submit` 버튼을 누를 때에만 `content`가 갱신된다.

### 231229
#### highlight.js 적용하기 
- 가장 큰 이슈는 `onChange`를 구현하면 `modules.syntax`에 highlight 를 구현했을 때와 충돌이 발생한다는 것이었다. (뭐라도 하나 쓰면 바로 컴포넌트가 날아가는 이슈.)
- 따라서 일단 onChange를 제외하기로 했음.
- 무슨 마크다운 문법을 HTML에 적용하고 별 생쇼를 다하다가 결국 돌아온 곳이 이거다.. ㅠㅠ 하루 종일 했는데..

### 231228
- PostDetail
	- 게시글로 돌아가기 버튼 구현
	- Quill 본문은 그냥 TextArea가 차지하는 크기만큼을 차지하게 하기로 했다. 대신 패딩을 집어넣자.
- Navbar
	- 각 아이콘은 각 category의 홈으로 가는 링크여야 하는데, Intro로 돌아가게 구성되었음. 이를 수정.
- QuillEditor
	- 글자에 색 배경, 색 적용 안되는 문제 수정 - formats만 수정하면 되는 ez한 문제였음


### 231227
- QuillEditor에는 읽기 전용 모드가 있다 -> 이걸 이용하면 `PostDetail`을 어떻게 보여줄까 하는 고민이 해결됨
	- 이를 위해 QuillEditor에 `isReadOnly`라는 인자를 받도록 하고, return 값에 `readonly = {isReadOnly}`를 추가한다.
	- isReadOnly 값에 따라 툴바가 나타나거나 나타나지 않도록 한다.
	- 아무런 글을 입력하지 않더라도, 초기 영역이 어느 정도의 공간을 차지하게끔 구성해야 함
### 231226
- PostList 수정
	- 미리보기 표시 : 백엔드에서 HTML 태그를 포함해 150글자까지 가져오고, 이 중 p태그로 완전히 열고 닫히는 모든 내용을 표시한다. 단 p 태그 내부의 HTML 태그는 별도로 표시하지 않는다.
	- [테일윈드 예시](https://freefrontend.com/tailwind-code-examples/)에 PostList에 적용할 만한 괜찮은 예시가 있어서 PostList에 적용했다. 별도로 구성해야 할 것도 있어서, 화면의 가운데 쪽에만 수정해서 구현.
- NavBar 통합
	- 기존엔 NavBar의 Category 전환 버튼을 클릭하면 기존에 렌더링 됐던 요소들이 다 사라졌다. 이는 `Link`로 연결되어 있어서 바로 해당 url로 넘어갔기 때문이다.
	- 이게 마음에 들지 않아서 NavBar만을 전환할 수 있지 않을까라고 생각해서 구현 완료
	- NavBar를 통합했다. 최초엔 useParams을 이용해 URL에서 값을 가져오지만 그 이후에는 useState를 통해 상태를 관리하는 식으로 작업했음. 굳이 NavBar를 나누지 않아도 될 듯.

### 231225
- PostDetail 수정
	- `ma`에서 정상적으로 글 등록되지 않는 현상 수정 - 백엔드에서 ma를 movieanimation으로 바꾸는 과정을 전부 제거했고, 해당 category를 `ma`로 수정했다.

- PostList 수정
	- HTML 태그가 Content 미리보기에서 보이는 현상 수정 중
```tsx
        const textContent = new DOMParser().parseFromString(content, 'text/html').body.textContent.replace(/<[^>]+>/g, '') || "";
```
> `~textContent`까지는 특수문자를 없애고, `replace()` 부분은 HTML 태그를 없앤다.
	- 그러나 이런 식의 미리보기가 맞는지 모르겠음 : 차라리 1번째 p태그를 가져오는 게 나을지도?

### 231223
- (완료) 글 업로드 구현 중
	- (완료) `PostSerializer`을 통합하려는 시도 중 : 겹치는 코드가 많아서
	- 마참내 ㅠㅠㅠㅠㅠㅠㅠㅠㅠㅠㅠ

### 231222

- 글 업로드 구현 중
	1. subSection을 직접 입력하는 상황이라면 subSection부터 등록하게끔 구현(중)
	2. subSection의 중복 체크 & 글 업로드 기능 구현
> 글 업로드 과정에서 계속 이슈 발생) 아마 백엔드의 테이블과 매칭하는 과정에서 계속 이슈가 나는 듯?

### 231221
- 이미지 업로드 구현 완료 : 백엔드에 등록하고, 해당 링크를 HTML 태그와 함께 가져오는 방식

### 231220
1. 글 작성 페이지 : `subsection` 상태 초기화 안되는 문제 해결


### 231219
- Quill을 이용해 글을 작성하고, 이미지까지 저장하기
	- Quill : 글 작성, 폰트 지정, 색깔 설정, 볼드, 이탤릭 등등 다 기본 기능에 있긴 하다. 공식 문서의 `Toolbar`에 있음.
	- `Code-Block`도 있는데, 언어에 따라 지정하는 `highlight.js`를 따로 설치해준 뒤, 설정해야 하는 듯? <-- 에서 막힘

### 231218

1. 제목, 소분류 입력란 가로 너비 : 상위 `flex`, 하위 `w-full`
2. 소분류 불러오기 / 소분류를 직접 입력하거나, 있는 것 중에 선택하기
	- **RESTful API 디자인의 원칙 중 하나인 "Single Responsibility Principle"** : 하나의 엔드포인트는 1개의 기능만을 갖는다 - 즉, 게시글을 불러오는 요소에 카테고리나 서브카테고리를 불러오는 기능이 있더라도, 프론트엔드에서 이 기능을 가져올 때는 해당 기능만을 제공하는 URL에 접근하는 게 맞다는 것이다.


