### 240229
- 완료(혹은 스킵)
	- `WritePost` 
		- 백틱 적용하기 : ChatGPT는 HTML 태그를 직접 넣는 것보다, `Quill API`를 이용하는 방법이 더 안정적이라고 했다.
			- 그러나 실제로는, 백틱 입력 시 백틱 2개를 넣고, 그 안에 커서가 들어가는 것까지는 구현이 되는데, 정작 구현한 CustomBlot이 적용되지 않는 이슈가 있다.
		- 자꾸 Quill이 나를 방해한다 -> 그냥 **백틱 대신 글자를 강조하는 식으로 문서를 작성해야겠음.** 배경 색이나 글자 색은 Quill 자체에서 변경할 수 있는 기능이니까.
	- `SubsectionCustomizePage`
		- `ColorPicker`가 나타날 때, 다른 `Subsection` 설정 영역과 겹칠 경우 `ColorPicker`가 나타나는 우선순위가 더 뒤임 
		- **`Grid`의 배치를 바꾸고, 겹치지 않는 위치에 `ColorPicker`가 나타나도록 수정**
- 진행 중
	- `PostDetail`
		- 헤더 접는 기능 구현하기
	
### 240228
- 진행 중
	- 코드 버튼 마우스 오버 시 애니메이션으로 코드 복사 기능 나타나게 수정하기
		- 현재 복사 버튼을 백엔드의 HTML을 받은 다음 프론트엔드에서 생성하는 방식으로 구현하고 있는데, 이 경우 `react-icon`의 컴포넌트가 어디에 들어가야 할 지 애매해진다. 프론트엔드의 구현은 `return` 문에서 이뤄지는 게 아니라 함수 부분에서 이뤄지고 있기 때문임.
		- React 컴포넌트는 React 렌더링을 거쳐서 DOM 요소로 변환되어야 하므로, 컴포넌트를 `innerHTML`로 직접 삽입하는 것 또한 불가능하다. `innerHTML`은 HTML의 문법 자체를 넣어야 하기 때문이다.
		- 따라서, `react-icon`의 컴포넌트를 사용하는 대신, **별도의 복사 버튼 이미지를 구해서 삽입**하는 방식을 쓴다.
- 완료
	- `CookieTokenMiddleware`
		- 이전에 `쿠키 -> 헤더` 토큰을 옮기는 조건에서, `GET` 요청을 제외한 나머지 모든 요청에 대해서 작동하게끔 바꿨음
			- 수정의 `PUT`이나 삭제 `DELETE` 등에서도 권한을 체크하는 기능이 작동해야 하므로.
	- `WritePost`
		- 작은 화면에서의 양옆의 마진 크기 수정
	- 전체) 폰트 가져오기 & 커스터마이징하기
		- [Orbit](https://noonnu.cc/font_page/1242) - 리썰컴퍼니 한글패치에 적용된 폰트라고 함. 사실 모르고 적용했음 헤헤
		- [소요단풍체](https://noonnu.cc/font_page/1244) 



### 240227
- 완료
	- `로그인 기능`
		- 액세스 코드 만료 시 로그인 해제되는 현상 수정 필요함
			- 백엔드 미들웨어에서 `Authorization`이 필요한 기능은 일반적으로 `POST` 요청에 한해서이다. 모든 요청에 해당 기능을 넣으면 액세스 토큰이 만료됐을 때는 작동하지 않는 이슈가 있음.
			- **쿠키의 토큰을 헤더로 옮기는 로직은 `POST` 요청에서만 작동**하도록 수정했음.
	-  `PostDetail`
		- 코드블럭 외부에 정체불명의 검은색 (패딩 영역인 듯 한데, 어디서 만지는지 스타일이나 개발자 모드로 봐도 모르겠음)
			- `.ql-snow .ql-editor pre.ql-syntax`로 들어가야 수정이 된다. 내부 코드 블럭은 `.ql-snow .ql-editor pre.ql-syntax code.hljs`이며, 둘 모두 `bg-gray-900`으로 적용했음.

### 240226
- 완료)
	- `Archive.tsx` - 사이즈 축소 시 특정 그리드는 아예 깨짐 : **너비 640픽셀 미만은 아예 고려하지 않겠음**
		- 특정 사이즈 미만에서는 작성일이랑 제목만 남기는 식으로..?
		- `Tailwind CSS`에서 `sm:`이 `640px`인데, 이보다 미만인 화면 너비는 고려하지 않기로 한다 - 2013년이나 그 이전에 나온 스마트폰이 더 낮은 너비를 가짐 - 2013년 아이폰 5가 `640 x 1136`이라고 함
	- `Navbar` - 사이즈 축소 시 겹치는 현상 수정 : **640픽셀 미만은 아예 고려하지 않겠음**
	- 로그인 유지 이슈 여전히 발생 : [[복합 - 헤더 노출시키기]]
		- 백엔드의 `login-extend view`는 그냥 Response만 반환함.
	


### 240223
- 완료)
	- **POST 요청에 대한 인증 이슈 : 관리자 계정 로그인임에도 `401` or `404` 에러 발생**
		- 기존엔 헤더에 있는 토큰 정보로 `permission_classes` 및 `authentication_classes` 과정을 수행했던 것으로 보이는데, 지금은 쿠키에 있는 토큰으로 이를 수행해야 하기 때문에 코드를 다르게 작성해야 하는 듯 하다.
		- 해당 권한 / 인증 클래스를 조회해보면, `request.user`를 확인하는 것을 볼 수 있다. 근데 내가 관리하는 로그인 상태는 `request.user`에 있는 게 아니라 쿠키에 있기 때문에, 쿠키에서 헤더로 토큰을 옮기는 과정이 필요하다.
	- **로그인 갱신 로직 : 별도의 뷰 -> 미들웨어로 이동**
		- 백엔드에서 뷰를 처리하기 전에 실행시킬 수 있는 `미들웨어`라는 것이 있다. 이를 이용하는데, 이왕 얘를 쓸거면 한 발 더 나아가서 URL에 액세스 토큰을 갱신하는 로직을 짤 것이 아니라, 미들웨어에 해당 로직을 구현하기로 한다.
	- 
### 240222
- 완료)
	1. 로그인 유지)`액세스 토큰 만료 & 리프레시 토큰 유효 상황`에서 **액세스 토큰 재발급이 안되는 이슈**가 있었음. [[★복합 - 리프레시 토큰 안전하게 보관하기]]에 내용 정리.
	2. 권한 체크 & 조건부 렌더링 로직 수정
		- `PostList` : 로그인된 유저의 권한을 확인하고, 게시글 작성 기능과 `subsection` 스타일 조건부 렌더링
		- `PostDetail` : 로그인된 유저의 권한을 확인하고, 게시글 수정 / 삭제 기능 조건부 렌더링
		- 버튼의 렌더링은 해당 컴포넌트에서 **백엔드로 유저의 권한을 확인하고 그 상태를 받아오는 방식으로 구현함 **(Redux 대신, 해당 컴포넌트들에서 일시적으로 관리함)
			- 대신 해당 페이지에서 POST 요청을 보내는 기능은 백엔드에서 로그인 여부 및 관리자 여부를 점검하여 실행할 수 있도록 설정

### 240221
- 로그인 유지 기능 구현 계속 - 대부분의 작업 완료


### 240220
- 새로고침 시 로그인은 유지되지만 관리자에게만 보이는 기능이 사라지는 문제가 있음
	- `Redux`에서 `관리자 상태` 또한 관리하고 있기 때문인데, 이걸 다른 방식으로 바꿔야 할 필요가 있음 - 새로고침 시 초기화 문제 & 보안 문제
	- [[★복합 - 리프레시 토큰 안전하게 보관하기]] : 로그인 관련 로직들을 다 뜯어봐야 하는 과정이 되었다. 간단할 것 같은데 은근 머릿속이 복잡해져서 내일 계속함

### 240219
- `SignIn.tsx` : 별도의 URL로 구현한 페이지 -> Navbar의 **컴포넌트로 변경**
- `SubsectionCustomizer` : `Section` 별로 한꺼번에 관리할 수 있는 페이지를 별도로 구현함
	- 한꺼번에 Post 보내고 정리하는 과정에서 생각보다 애먹음

### 240216
- 전체적인 페이지 다듬기 & 반응형 디자인 적용하기

### 240215
- `ArchivePage`
	- 프론트엔드 URL 구성 
		- 연, 월, 일을 구현하려고 한다면 **URL은 아래처럼 구현**하는 게 맞겠다
			- 연 : `YYYY`
			- 월 : `YYYY-mm`
			- 일 : `YYYY-mm-dd` 
		- 그러면 `useParams`에 쓰일 날짜를 `date`로 통합하고, URL에 보낼 값으로 가공하는 과정이 들어가줘야 함
		- 배열 내에 객체를 사용할 떄 map 함수를 쓴다면, key 값은 존재하는 값이어야 함(별칭을 사용할 수 없음) - [[TS - map 함수]]
	- `ActivityChart`
		- 1월 1일에 데이터가 표시되는데 막상 아카이브 페이지에 들어가면 아무 것도 뜨지 않는 문제 수정
			- 원인) 2월 1일의 데이터가 표시되는 것으로, 시각화 시 백엔드의 조회 조건을 수정함
		- 서식 `%Y-%m-%d` vs `%y-%m-%d` 맞춰야 함 -> `ArchivePage`의 조건도 바꿔야 함
		- 얼추 된 듯?


### 240214
- `ActivityChart.tsx`
	- 어제 발생했던 문제 해결 - 백엔드로 `api/blog/archive?archive=`로 요청을 보냈어야 했는데 `api/blog?archive=`로 요청을 보냈기 때문에 오류가 발생했음
	- 전체 아카이브 페이지 구현 완료
	- "일" 단위의 아카이브 페이지..는 굳이 만들어야 할까? 싶지만 그냥 만들자. 내일은 "일", "월" 단위를 만들기로 함.

### 240213
- `ActivityChart.tsx`
	- 일, 월, 전체 아카이브 페이지 구현하기
	- [[Django - annotate]]
	- 오류) URL 연결 과정 : 백엔드 - AssertionError: Expected a `Response`, `HttpResponse` or `HttpStreamingResponse` to be returned from the view, but received a `<class 'NoneType'>` 에러 발생
### 240211
- `ActivityChart.tsx`
	- 차트에 `월, 요일` 단위 추가하기 
	- `월`은 쉽게 구현되는데, 요일의 경우 계산이 꼬이더라도 `grid-rows-8`로 해서 다시 생각해보자.
		- `JSX` 내부에선 `for` 문 작성이 불가능.
	- 요일도 구현 완료




### 240208
- `ActivityChart.tsx`
	- 호버되는 박스가 z-index를 적용했음에도 기존 박스보다 더 낮은 우선순위로 렌더링 되는 현상 해결 [[CSS - z-index와 스택 컨텍스트]] - 정확히 이해하진 못했고(원인은 똑같아 보여서) 어떤 방식이 통했는지만 정리해둔다.
	- 말풍선 
	- 말풍선이 `div`요소 내에서 짤리는 문제 해결(부모 요소에 `overflow-visible` 지정...)


### 240207
- `ActivityChart.tsx`
	- 1. 깃허브처럼 일 단위로 구성된 박스들을 만듦
		- 시작 요일을 `Date.getDay()`로 구해서, 처음 며칠은 빈 상자를 만듦
	- 2. 각 박스는 호버 시 날짜와 글의 갯수를 알려주며, 클릭 시 해당 날짜의 아카이브 링크로 연결됨. 아래의 '주'나 '월'도 호버와 클릭 규칙은 동일하게 구성.
	- 3. 한 열에 7개씩 박스를 만듦. 각 열은 '주' 단위임
	- 4. 그 아래에 '월' 단위의 X축 Label을 넣음. '주'는 '월'의 부분 X축 Label이 되는 개념.
	- 5. 색은 `work` 및 `hobby` 각각의 카테고리 색상에 맞춘다.
- 위를 구현해본다. 어디까지 할 수 있을진 모르겠다
	- 호버되는 박스가 z-index를 적용했음에도 기존 박스보다 더 낮은 우선순위로 렌더링 되는 현상이 있음.


### 240206
- `MainPage.tsx`
	- 아카이브 박스 만들기 
		- 혹은 이걸 더 세련되게 메인 페이지에는 시각화만 넣고, 별도의 카테고리 별 아카이브 페이지를 만들어서 위처럼 구현하는 것도 괜찮겠다. <-- 이걸 구현 중인데 오늘은 왤케 집중이 안됩니까?


### 240205
-  각 `Category`의 `Home` 메뉴 구성
	- 게시글 박스를 만드는데, 최근에 작성한 글 순서로 최근 5개의 글을 화면에 표시
	- 게시판 종류별로 박스가 있으며 개월 단위로 정리한 아카이브도 포함시킨다
- `PostList`
	- 게시글에 있는 각 소분류에 스타일을 지정하고 링크를 추가함
		- 팁) Link에는 자체 스타일이 있기 때문에 Link 내부에 div나 span 태그를 이용해서 스타일을 지정해야 한다.

#### 세부 내용
- 각 카테고리의 `Home` 메뉴 구성
	- 각 `Category`에는 `Section`이 있다 : 그러나 테이블로 관리되는 개념은 아님 - 그 수가 적기 때문에 하나하나 직접 관리하고 있기 때문이다. **`Category` 및 그 속의 `Section`들은 프론트엔드에서만 관리 중**
	- `map`이나 `forEach` 함수를 사용할 때, 반환값이 있다면 `{}`이 아니라 `()`을 써야 한다. 안 그러면 렌더링이 안됨.

### 240202
- 소분류 커스터마이징 제작
	- `Redux`를 통해 상태 관리함
	- **금방 끝낼줄 알았는데 생각보다 걸렸다. 밖엔 축구하는데 나는 이거 두드리고 있음.**
### 240201
- 이미지 크기 수정 기능 넣기

#### 세부 내용
- 이미지 & 동영상 크기 수정 기능 넣기 : 너무 길을 돌아간 느낌이다. ㅋㅋㅋ
	- 직접 구현할 생각이었는데 있다. `quill-image-resize-module-ts`
	- `WritePost`
		- **기존) 이미지 업로드 시 바로 백엔드와 통신 후 그 링크를 받아옴**
		- (X)변경) 이미지 업로드 후 이미지 크기 변경 기능을 추가하고, 이미지를 백엔드로 전송하는 건 작성 버튼을 누른 시점으로 변경
			- 이슈 발생 
				1. 여러 이미지를 업로드하면 프론트엔드에서 글을 추가로 작성 시 버벅이는 문제
				2. 백엔드에서도 `django.core.exceptions.RequestDataTooBig: Request body exceeded settings.DATA_UPLOAD_MAX_MEMORY_SIZE.` 문제가 발생한다.
				- 검색해보면, 애초에 이미지를 `base64` 형태로 프론트엔드에 두지 않고 **서버에 업로드한 뒤 그 링크를 받아오는 형태로 구현하는 게 성능 이슈가 있기 때문**이다.
			- 따라서 기존 방법을 유지하고, 백엔드에서 받아온 URL에 아래의 코드만 추가하는 방식으로 구현했다. 이미지 크기 변경과 글 작성 시 렌더링 모두 잘 나오는 듯 함. 최소한 이미지 2~3개 올리고 버벅이는 현상은 사라짐.
```tsx
                    const imageElement = editor.scroll.domNode.querySelector(`img[src="${imageUrl}"]`);

                    if (imageElement) {
                        imageElement.setAttribute('data-resizable', 'true');
                    }
```
