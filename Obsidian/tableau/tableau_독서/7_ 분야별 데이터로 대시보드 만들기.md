#tableau #데이터시각적분석태블로로끝내기

#### 실습 예제가 많긴 한데, Hyper 파일을 사용하는 예제는 Public에서 사용할 수 없음
- [원본 데이터 링크](https://github.com/bjpublic/tableau2)


- 얻어갈 팁들 위주로 구성함

## 1. COVID-19 지역별 확진자
> 생각할 점
> 1. 누적확진자를 일별 신규 확진자로 변경하는 방법
> 2. 누적 확진자와 신규 확진자를 번갈아가며 화면을 구성하는 방법?

### 얻어갈 팁들

#### 1. 데이터 원본 탭에서 피벗하기
- **피벗** : **여러 개로 된 필드를 1개의 필드 안에 합치고,  기존 필드명은 새로 생긴 필드에 값으로 들어감**
	- `합계 ~ 검역` **탭들을 지정 -> 우클릭 -> 피벗**

#### 2. 데이터를 올려서 살펴본 다음 다시 데이터 원본으로 가서 제외해도 됨

#### 3. 누적값에서 일별값 구하기
- 주어진 데이터는 일자별 누적 값이 나타난 상황임
- **누적 연속값 우클릭 -> 퀵 테이블 계산 -> 차이** 만으로 일별 확진자로 데이터를 바꿀 수 있음
	- 왜냐면 `테이블(옆으로)` 상태 & 단위는 `연속형, 일`이므로.
- 맨 처음 날은 `Null`값이 뜸(전 날 값이 없기 떄문) -> 우클릭해서 `표시기 숨기기`
- 이렇게 **퀵테이블계산으로 변경한 값을 `ctrl + 클릭` -> 좌측 탭에 드래그앤 드랍해서 새로운 특성으로 만들 수도 있음**
```tableau
ZN(SUM([누적확진자])) - LOOKUP(ZN(SUM([누적확진자])), -1)
```
	- 뜯어보면 요런 식으로 표시됨

#### 4. 누적<->신규 확진자 토글하면서 화면 스위치하기
- **매개변수**가 이 때 쓰인다 : 데이터에 아무런 변경을 주지 않은 채로 강조하고 싶은 걸 바꿀 때 쓰임(**대시보드에서 다른 건 유지한 채로 강조하고 싶은 걸 바꾸는 기능이 매개변수**였던 거임 엌ㅋ)
1. `매개변수 만들기`
	- 필드명 : `누적 <-> 신규`
	- 데이터 유형 : Bool
	- 참 : 누적 확진
	- 거짓 : 신규 확진
정상적으로 만들어졌다면 왼쪽 탭 아래에 매개변수가 추가됨

2. `누적 <-> 신규`의 계산식 만들기
- `계산된 필드 만들기`
```TABLEAU
IIF([누적 <-> 신규], SUM([누적확진자]), [신규확진자])
```
- `[신규확진자]`에 집계식이 없는 이유는, 이미 퀵테이블계산에서 집계되었기 때문임

3. 기존에 올라가 있던 `[신규확진자]` 를 없앤 뒤, `[누적<->신규 계산식]` 특성을 선반에 올림
4. `매개변수 표시` -> 매개변수를 바꿈에 따라 그래프가 바뀌는지 체크하자.

> 즉, 기존에 올라가 있는 누적확진자는 SUM([누적확진자])였다는 걸 알 수 있음. 태블로는 전체에서 쪼개나가기 때문에 필드가 아니라 필드의 집계값을 주로 이용한다는 걸 꼭 유념해두자..

#### 5. X축 대칭 그래프 만들기
- 기존 측정값 복붙 -> 측정값 알약 더블클릭해서 앞에 `-`를 추가함

#### 6. 이미 있는 특성을 매개변수로 만들고, 매개변수 선택에 따른 하이라이트 만들기
- 이걸 이용하면 특정 값만 강조하는 것도 가능할듯?

- 특성 이름 : `시도`

1. 왼쪽 탭에서 특성 우클릭 -> 만들기 -> 매개 변수 -> 이름 `p. 시도`
2. 매개변수 표시 후 계산식 만들기`h. 시도`
```tableau
[시도] = [p. 시도] 
```
3. `h. 시도`를 `누적<->신규 확진자 수 마크`의 **색상**에 올림
4. 색상 마크로 올라간 `h. 시도`를 `내림차순`으로 변경
5. **색상**의 참/거짓을 구분하는 색깔을 부여(핑크 : `#ff007f`, 회색 : `767f8b`)

#### 7. 분리된 것 같은 막대 그래프를 연결해서 표시하기
1. **연속형 날짜 필드를 우클릭해서 불연속형으로 변경**
	- 날짜의 형태는 연속적인 상태이지만 보여주는 방식을 축 대신 머리글로 표시함
2. 툴바 맞춤 `표준` -> `전체 보기`

#### 8. 그래프 깔끔하게 표시
1. 축들 제거 : 머리글 표시 제거
2. 뷰 우클릭 -> 서식 
	1) `테두리` 서식 - `시트` 탭의 `행 구분선`, `열 구분선` 패널을 `없음`으로 변경
	2) `라인` 서식 - `행` 탭의 `격자선, 영(0) 기준선`을 `없음`으로 변경

#### 9. 맵도 이중 축이 가능함
1. `지리적 역할`로 경도, 위도가 선반에 올라가 있는 상황
2. `경도`를 `ctrl + 클릭`해서 오른쪽에 하나 더 만듦
3. 왼쪽의 `경도`를 `원 -> 맵`으로 변경, 본체 흰색, 테두리 보라색
4. 오른쪽의 `경도`를 우클릭 -> `이중 축`
- 이러면 맵 마크와 원 마크가 같은 위치에 이중으로 나타난다.

#### 10. 맵 : 나타내고 싶은 지역 이외는 투명화
- 상단 `맵 - 백그라운드 레이어` -> 좌측 `투명도 100%`

#### 11. 최근 날짜, 어제 날짜
```TABLEAU
{FIXED : MAX([날짜])} // f. 최근 날짜
{FIXED : MAX([날짜])} - 1 // f. 어제 날짜
```

#### 12.  계산식 이해하기
- 누적 확진자는 테이블에 있는 상황
- 변수 2개를 만듦 : 최근 날짜 누적 확진자, 최근 전날 누적 확진자
```TABLEAU
IIF([f. 최근 날짜], [누적 확진자], NULL)
IIF([f. 어제 날짜], [누적 확진자], NULL)
```

- 이 두 특성으로 최근 날짜의 신규 확진자를 구할 수 있음
```TABLEAU
SUM([최근 누적 확진자]) - SUM([어제 누적 확진자])
```
- 왜 여기는 **SUM()** 이 들어갈까?가 궁금해짐.
	- 물론 `SUM()`을 넣으면 성립하는 식임. 어떤 날짜의 값만 있기 때문에 `SUM()`해도 그 날짜의 값만 나오니까
	- **`VLOD`에 따라 변하지 않게 하기 위함일까?**

- 위 `최근 날짜 신규 확진자`를 누적, 신규 확진자 수에 따라 맵 위의 원 마크 크기를 바꾸기 위해 아래 계산식을 만든다
```tableau
IIF([p. 누적 <-> 신규], SUM([최근 날짜 누적 확진자]), [최근 날짜 신규 확진자])
```
- 이 계산식을 `원` 마크가 있는 `크기` 탭에 올리고, 매개변수를 바꾸면서 원 마크가 바뀌는지 확인해본다.

#### 13. 대시보드 구성
- 왼쪽 아래의 `개체`를 활용하고 있음
- `가로 개체`를 올린다 -> 시트를 그 `가로 개체`위에 올린다 -> 2번째 시트를 `가로 개체` 위에 올린다 -> 2번째 시트 오른쪽에 `빈 페이지` 개체를 올린다 
- **시트를 올리기 전에 개체를 넣고, 부동 / 바둑판**을 왔다갔다 하면서 대시보드를 구성할 수 있음
- **부동의 경우 어떤 시트가 앞에 올지 결정할 수 있으며, 바둑판 대비 시트의 구성이 자유로운 편임**

#### 14. 아래 탭 우클릭 - 모든 시트 숨기기
- 원하는 대시보드를 작성했다면, 시트들만 숨길 수 있다.

#### 15. 마우스 오버 시 뜨는 도구 설명 편집하기
- `도구 설명`은 마크 카드에 있음
> 예시
> h. 시도: <h. 시도>
> 시도: <시도>
> 날짜일: <일(날짜)>
> 누적 <-> 신규 계산식: <집계(누적 <<->> 신규 계산식)>

> 위 값을
> <시도> 지역 <일(날짜)> 기준 <매개 변수.누적 <<->> 신규> <집계(누적 <<->> 신규 계산식)>명입니다.
> 으로 수정함

## 2. 
