## 1. 스위칭 방법과 종류
> `스위칭` 
>    노드 사이의 링크가 있을 때, 이 **링크를 임시로 잠시 연결**해주는 것

- 모든 장치가 서로 링크로 연결되어 있다면 문제점이 발생함
	- 장치가 많아질수록 **연결 비용**이 많이 발생함
	- 링크의 대다수는 **유휴시간**이 많아 효율이 떨어짐

![[Pasted image 20221221180834.png]]
- 따라서 모든 노드를 연결하지 않고 중간에 하나의 연결장치`스위치`를 둔다.
- 스위치는 필요할 때마다 두 장치를 연결함

### 스위칭 방식의 종류

#### 1. 회선 스위칭(Circuit Switching)
- 두 장치 사이에 물리(논리)적인 선을 연결하는 방식
![[Pasted image 20221221181152.png]]
- 예시) 전화 네트워크 = `PSTN Public Switched Telephone Network`
	- 즉 전화 네트웍은 `Circuit Switching`이다
- 특징
	- 회선 연결 시 데이터를 주고 받는 동안 유지 : 자원이 **연결된 동안 계속 점유**
		- 전화를 쓰지 않아도 전화비를 내는 이유는, 송-수신자 간에 전달된 정보가 없더라도 다른 사람은 절대 못 쓰게 하고 나에게만 할당해줬기 때문에 그럼
	- **고정된 속도**를 가짐
	- **연결 설정에 시간**이 걸리나 이후엔 지연 시간이 없음
	- 데이터 전송이 많을 때 유용

#### 2. 메시지 스위칭 
- 누군가 데이터를 보내지 않을 때 다른 사람이 데이터를 보내게 할 수 있지 않을까?
![[Pasted image 20221221181740.png]]
- 핵심 키워드 : `Store and Forward`
- 특징
	- 중간에 있는 모든 장비가 저장한 다음 송신(Store and Forward)을 함
	- 유휴 링크는 다른 메시지 전송에 사용하므로 효율적임
	- 각 노드는 메시지 저장 공간 확보
		- 전달할 데이터가 너무 크다면 메모리가 감당할 수 없음

#### 3. 패킷 스위칭
- 메시지 교환에서 데이터를 뭉탱이로 보내면 메모리가 감당을 못하니, **`패킷`으로 잘라서 보내자는 아이디어**에서 나옴
![[Pasted image 20221221182047.png]]
- 큰 데이터를 자르기 때문에 어떤 패킷이 어디에 위치한 정보인지 알려줘야 함 : 여기서 `헤더`가 쓰임
- 특징
	- `Bursty : 군집성이 있는` 트래픽 전송에 적합함 
		- ex) 글을 읽다가 인터넷 링크를 클릭하면 정보가 **한꺼번에** 날아옴
			-  글을 읽는 동안에는 트래픽이 발생하지 않음
	- 두 장치가 하나의 전송 속도를 갖지 않음 : 우선 순위 적용 가능
	- 회선교환(1) 방식은 링크에 문제가 발생하면 다른 링크로 바꿀 수 없음

##### 1. 데이터그램
- 각 패킷이 독립적으로 처리, 목적지에 순서와 관계없이 도착함
- 연결 설정 과정이 없음
- 통상적으로 양단에 응답 - 요청의 과정을 거침
- 항상 같은 경로로 전달하지 않음
![[Pasted image 20221221182446.png]]
- 각 패킷(1, 2, 3, 4 각각)이 이동하는 경로가 다를 수 있음 -> 목적지에 보낸 순서와 다르게 도착할 수 있음
- 장점) 네트워크를 항상 효율적으로 쓸 수 있음
- 단점) 어딘가에서 순서를 제어해줘야 함(추가 기능 필요)

##### 2. 가상회선
- 데이터를 보내기 전 연결 설정(개념은 서킷 스위칭과 유사)
- 그러나 **지정된 회선을 다른 사람도 공유해서 사용할 수 있음**
![[Pasted image 20221221182642.png]]
- 선은 여러 패킷이 공유할 수 있도록 구조가 만들어져 있음
> 순서
> 1. 가상회선 설정
> 2. 여러 패킷이 **순서대로** 가상회선을 따라 전달됨
- 각 링크에는 `Label`이 존재해서 패킷 요청이 들어오면 **어떤 `Label`로 지나가는지 결정되는 것 같음**(몇 번 봤는데 정확히 이해했는지 모르겠다)

#### MPLS
- `Multi-Protocol Label Switching`
- 데이터그램 방식인데 Label을 붙여서 보냄
	- 기존 데이터그램의 문제는, 패킷이 들어왔을 때 효율적으로 보내기 위해 결정할 시간이 걸린다는 점이 있었음
- Label이 붙게 되면,  어떤 패킷을 어떤 포트로 보낼지 다 결정되어 있어 바로 보낼 수 있음
- 라우터 or 스위치 처럼 동작 가능함
	- 라우터 : MPLS는 대상 주소를 기반으로 패킷 전달
	- 스위치 : Label을 기반으로 패킷을 전달
		-  패킷을 받았을 때 어디로 보낸다가 확실히 결정되어 있기 때문에 **빠름**

- 실제로 인터넷은 속도를 개선하기 위해 MPLS를 많이 쓰고 있다.

## 2. 다중접속 프로토콜

### Multiple Access
- 링크를 여러 장치들이 공유하는 환경에서 전송을 시도하는 경우를 의미
-  여러 컴퓨터가 하나의 매체에 접근할 때 발생할 수 있는 문제 해결이 필요하다
- 일반적으로 **데이터링크 계층**에서 수행 
	- 그 중에서도 `접근 제어` 관련 내용

- 데이터링크 계층도 2개로 나눔
![[Pasted image 20221221184041.png]]
- 상위 부계층은 데이터 링크 제어
- 하위 부계층은 공유 매체의 접근 문제를 해결함

- 여러 시스템이 공통의 링크에 연결된 경우, `멀티 포인트 연결`이라 하는데, 발생하는 매체 접근 문제를 해결해야 함
![[Pasted image 20221221184203.png]]

#### 1. Random Access
- 서로 대등한 관계의 통신을 하며, 한 시스템이 다른 시스템을 통제하지 않음
- 임의의 시스템이 전송을 위해 **시간을 정하지 않음**(`무작위 접근Random Access`)
- 어떤 시스템이 전송할 차례인지 정하는 **규칙이 없음**(`경쟁Contention`)
- 여러 시스템이 전송하면 `충돌Collision`이 발생, 해당 프레임은 손상되어 재사용 불가능

- `MA` -> `CSMA` -> (유선)`CSMA/CD` -// (무선)`CSMA/CA`

##### ALOHA
- 1970년대 초반 하와이 대학교에서 개발
- 각 시스템은 (`Star Network`같이) `기지국Base Station`으로 데이터 전송, 기지국은 수신된 프레임을 목적지로 전달
	- 컴퓨터는 안테나를 달아 통신했으며, 송신 주파수와 수신 주파수가 달랐음
	- 여러 컴퓨터가 동시에 데이터를 쏘면 `충돌`이 났다고 표현 
- 송신 시스템은 `ACK:ACKnowledgement`을 기다림
- `충돌` 문제 및 `ACK`를 기다리는 시간이 너무 길었음

##### CSMA(Carrier Sense Mutliple Access)
- 각 시스템은 **데이터 전송 전에 매체를 우선 검사**
	- `Sense Before Transmit` / `Listen Before Talk` 이라고 함
![[Pasted image 20221221184752.png]]
- `Carrier Sense` : 데이터를 보내기 전에 `Carrier Frequency`가 잡히는지 감지해본다는 의미
- 그럼에도 **전파지연시간**으로 인한 충돌 가능성이 존재함

##### CSMA/CD(CSMA with Collision Detection)
- CSMA + 충돌 발생 절차 추가

![[Pasted image 20221221185032.png]]
- 데이터를 보내기 전 `Carrier Sense` -> 데이터를 보냄 -> `Collision` **계속 검사**
	- 만약 충돌이 발생하면 즉시 전송 중지

##### CSMA/CA(CSMA with Collision Avoidance)
- 무선에서는 `CSMA/CD` 방식 사용이 어려움 : 
	- 충돌 신호가 오다가 신호 감쇄가 발생하면 충돌이 난 건지 원래 이런건지 구분이 안 가기 떄문임
- 따라서 무선에서는 아예 `Collision Avoidance`를 함
> 1. `IFS:InterFrame Space`는 채널이 비어도 바로 보내지 않고 잠시 기다려 충돌 회피
> 2. `Contention Window` : 충돌 윈도우는 전송 준비 완료 시 임의의 수를 선택해 시간만큼 기다림
> 3. `ACK`(ALOHA 참고)을 송신 시스템이 받지 못한다면 송신 시스템은 데이터가 유실되었다고 판단함
![[Pasted image 20221221185403.png]]

#### 2. Controlled Access
-  한 시스템이 제어국이 되어 다른 시스템의 전송 권한을 제어함
- 동시에 둘 이상의 전송 방지 & 시스템은 자신 차례가 오기 전엔 전송 불가능

##### 1. 예약(Reservation)
- 시스템은 데이터 송신 전에 예약 필요
- N개의 시스템은 N개의 예약된 미니 슬롯이 예약 프레임 내부에 존재
- 예약된 시스템은 데이터프레임을 예약 프레임 뒤에 전송

##### 2. 폴링(Polling)
- 제어 시스템 + 송수신 시스템
- 송신 시 제어 시스템에 알림, 수신 시 제어 시스템에 문의

##### 3. 토큰 패싱(Token Passing)
- 토큰을 가진 시스템이 데이터 송신 권한이 있음

#### 3. 채널화 : Channelization Protocol
- 링크를 시간, 주파수, 코드로 나눠 여러 채널을 만들고 서로 다른 시스템들이 이용하는 방법
	- 주파수 : `FDMA:Frequency-Division Multiple Access`
	- 시간 : `TDMA:Time-Division Multiple Access`
	- 코드 : `CDMA:Code-Division Multiple Access`

##### FDMA
- 사용가능한 대역폭은 모든 시스템이 공유
- 각 시스템은 할당된 대역을 이용, 각 대역은 특정 시스템만을 위해 예약됨

##### TDMA
- 단일 주파수 대역을 사용
- 주파수를 시간 간격으로 분할, 모든 시스템이 동시에 데이터 전송

##### CDMA
- 링크가 전체 대역폭을 한 채널에서 공유
- 모든 시스템은 시분할 없이 동시에 데이터 송신 가능